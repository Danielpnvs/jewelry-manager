(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function X0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ap={exports:{}},qa={},Pp={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=Symbol.for("react.element"),J0=Symbol.for("react.portal"),Z0=Symbol.for("react.fragment"),ex=Symbol.for("react.strict_mode"),tx=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),sx=Symbol.for("react.forward_ref"),ix=Symbol.for("react.suspense"),ox=Symbol.for("react.memo"),ax=Symbol.for("react.lazy"),_f=Symbol.iterator;function lx(t){return t===null||typeof t!="object"?null:(t=_f&&t[_f]||t["@@iterator"],typeof t=="function"?t:null)}var kp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rp=Object.assign,Vp={};function vs(t,e,n){this.props=t,this.context=e,this.refs=Vp,this.updater=n||kp}vs.prototype.isReactComponent={};vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bp(){}bp.prototype=vs.prototype;function Oc(t,e,n){this.props=t,this.context=e,this.refs=Vp,this.updater=n||kp}var Fc=Oc.prototype=new bp;Fc.constructor=Oc;Rp(Fc,vs.prototype);Fc.isPureReactComponent=!0;var wf=Array.isArray,Dp=Object.prototype.hasOwnProperty,Uc={current:null},Lp={key:!0,ref:!0,__self:!0,__source:!0};function Mp(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Dp.call(e,r)&&!Lp.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Bi,type:t,key:i,ref:o,props:s,_owner:Uc.current}}function ux(t,e){return{$$typeof:Bi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bi}function cx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ef=/\/+/g;function Bl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cx(""+t.key):e.toString(36)}function Bo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bi:case J0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bl(o,0):r,wf(s)?(n="",t!=null&&(n=t.replace(Ef,"$&/")+"/"),Bo(s,e,n,"",function(h){return h})):s!=null&&(zc(s)&&(s=ux(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ef,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",wf(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Bl(i,u);o+=Bo(i,e,n,c,s)}else if(c=lx(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Bl(i,u++),o+=Bo(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _o(t,e,n){if(t==null)return t;var r=[],s=0;return Bo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dt={current:null},qo={transition:null},hx={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:qo,ReactCurrentOwner:Uc};function Op(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:_o,forEach:function(t,e,n){_o(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _o(t,function(){e++}),e},toArray:function(t){return _o(t,function(e){return e})||[]},only:function(t){if(!zc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=vs;re.Fragment=Z0;re.Profiler=tx;re.PureComponent=Oc;re.StrictMode=ex;re.Suspense=ix;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;re.act=Op;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Uc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Dp.call(e,c)&&!Lp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Bi,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:rx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nx,_context:t},t.Consumer=t};re.createElement=Mp;re.createFactory=function(t){var e=Mp.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:sx,render:t}};re.isValidElement=zc;re.lazy=function(t){return{$$typeof:ax,_payload:{_status:-1,_result:t},_init:dx}};re.memo=function(t,e){return{$$typeof:ox,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=qo.transition;qo.transition={};try{t()}finally{qo.transition=e}};re.unstable_act=Op;re.useCallback=function(t,e){return dt.current.useCallback(t,e)};re.useContext=function(t){return dt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return dt.current.useDeferredValue(t)};re.useEffect=function(t,e){return dt.current.useEffect(t,e)};re.useId=function(){return dt.current.useId()};re.useImperativeHandle=function(t,e,n){return dt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return dt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return dt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return dt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return dt.current.useReducer(t,e,n)};re.useRef=function(t){return dt.current.useRef(t)};re.useState=function(t){return dt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return dt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return dt.current.useTransition()};re.version="18.3.1";Pp.exports=re;var W=Pp.exports;const fx=X0(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx=W,px=Symbol.for("react.element"),gx=Symbol.for("react.fragment"),yx=Object.prototype.hasOwnProperty,vx=mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xx={key:!0,ref:!0,__self:!0,__source:!0};function Fp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yx.call(e,r)&&!xx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:px,type:t,key:i,ref:o,props:s,_owner:vx.current}}qa.Fragment=gx;qa.jsx=Fp;qa.jsxs=Fp;Ap.exports=qa;var l=Ap.exports,Eu={},Up={exports:{}},At={},zp={exports:{}},Bp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,q){var Y=M.length;M.push(q);e:for(;0<Y;){var he=Y-1>>>1,ne=M[he];if(0<s(ne,q))M[he]=q,M[Y]=ne,Y=he;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var q=M[0],Y=M.pop();if(Y!==q){M[0]=Y;e:for(var he=0,ne=M.length,K=ne>>>1;he<K;){var ge=2*(he+1)-1,ft=M[ge],Le=ge+1,Me=M[Le];if(0>s(ft,Y))Le<ne&&0>s(Me,ft)?(M[he]=Me,M[Le]=Y,he=Le):(M[he]=ft,M[ge]=Y,he=ge);else if(Le<ne&&0>s(Me,Y))M[he]=Me,M[Le]=Y,he=Le;else break e}}return q}function s(M,q){var Y=M.sortIndex-q.sortIndex;return Y!==0?Y:M.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,p=null,_=3,C=!1,S=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(M){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=M)r(h),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(h)}}function b(M){if(P=!1,T(M),!S)if(n(c)!==null)S=!0,oe(R);else{var q=n(h);q!==null&&U(b,q.startTime-M)}}function R(M,q){S=!1,P&&(P=!1,I(y),y=-1),C=!0;var Y=_;try{for(T(q),p=n(c);p!==null&&(!(p.expirationTime>q)||M&&!j());){var he=p.callback;if(typeof he=="function"){p.callback=null,_=p.priorityLevel;var ne=he(p.expirationTime<=q);q=t.unstable_now(),typeof ne=="function"?p.callback=ne:p===n(c)&&r(c),T(q)}else r(c);p=n(c)}if(p!==null)var K=!0;else{var ge=n(h);ge!==null&&U(b,ge.startTime-q),K=!1}return K}finally{p=null,_=Y,C=!1}}var k=!1,x=null,y=-1,E=5,N=-1;function j(){return!(t.unstable_now()-N<E)}function A(){if(x!==null){var M=t.unstable_now();N=M;var q=!0;try{q=x(!0,M)}finally{q?v():(k=!1,x=null)}}else k=!1}var v;if(typeof w=="function")v=function(){w(A)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ie=G.port2;G.port1.onmessage=A,v=function(){ie.postMessage(null)}}else v=function(){D(A,0)};function oe(M){x=M,k||(k=!0,v())}function U(M,q){y=D(function(){M(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){S||C||(S=!0,oe(R))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(_){case 1:case 2:case 3:var q=3;break;default:q=_}var Y=_;_=q;try{return M()}finally{_=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=_;_=M;try{return q()}finally{_=Y}},t.unstable_scheduleCallback=function(M,q,Y){var he=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?he+Y:he):Y=he,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,M={id:m++,callback:q,priorityLevel:M,startTime:Y,expirationTime:ne,sortIndex:-1},Y>he?(M.sortIndex=Y,e(h,M),n(c)===null&&M===n(h)&&(P?(I(y),y=-1):P=!0,U(b,Y-he))):(M.sortIndex=ne,e(c,M),S||C||(S=!0,oe(R))),M},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(M){var q=_;return function(){var Y=_;_=q;try{return M.apply(this,arguments)}finally{_=Y}}}})(Bp);zp.exports=Bp;var _x=zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx=W,St=_x;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qp=new Set,pi={};function Tr(t,e){rs(t,e),rs(t+"Capture",e)}function rs(t,e){for(pi[t]=e,t=0;t<e.length;t++)qp.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=Object.prototype.hasOwnProperty,Ex=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tf={},Nf={};function Tx(t){return Tu.call(Nf,t)?!0:Tu.call(Tf,t)?!1:Ex.test(t)?Nf[t]=!0:(Tf[t]=!0,!1)}function Nx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ix(t,e,n,r){if(e===null||typeof e>"u"||Nx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bc=/[\-:]([a-z])/g;function qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bc,qc);Ge[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bc,qc);Ge[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bc,qc);Ge[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function $c(t,e,n,r){var s=Ge.hasOwnProperty(e)?Ge[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ix(e,n,s,r)&&(n=null),r||s===null?Tx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=wx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wo=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),Hc=Symbol.for("react.strict_mode"),Nu=Symbol.for("react.profiler"),$p=Symbol.for("react.provider"),Hp=Symbol.for("react.context"),Qc=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Cu=Symbol.for("react.suspense_list"),Wc=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),Qp=Symbol.for("react.offscreen"),If=Symbol.iterator;function Fs(t){return t===null||typeof t!="object"?null:(t=If&&t[If]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,ql;function Ks(t){if(ql===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ql=e&&e[1]||""}return`
`+ql+t}var $l=!1;function Hl(t,e){if(!t||$l)return"";$l=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{$l=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ks(t):""}function Cx(t){switch(t.tag){case 5:return Ks(t.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 2:case 15:return t=Hl(t.type,!1),t;case 11:return t=Hl(t.type.render,!1),t;case 1:return t=Hl(t.type,!0),t;default:return""}}function ju(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mr:return"Fragment";case Lr:return"Portal";case Nu:return"Profiler";case Hc:return"StrictMode";case Iu:return"Suspense";case Cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hp:return(t.displayName||"Context")+".Consumer";case $p:return(t._context.displayName||"Context")+".Provider";case Qc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wc:return e=t.displayName||null,e!==null?e:ju(t.type)||"Memo";case Tn:e=t._payload,t=t._init;try{return ju(t(e))}catch{}}return null}function jx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ju(e);case 8:return e===Hc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sx(t){var e=Wp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eo(t){t._valueTracker||(t._valueTracker=Sx(t))}function Kp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Su(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$n(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gp(t,e){e=e.checked,e!=null&&$c(t,"checked",e,!1)}function Au(t,e){Gp(t,e);var n=$n(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pu(t,e.type,$n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pu(t,e,n){(e!=="number"||oa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gs=Array.isArray;function Kr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$n(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ku(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Gs(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$n(n)}}function Yp(t,e){var n=$n(e.value),r=$n(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Af(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ru(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var To,Jp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=To.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ax=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(t){Ax.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ni[e]=ni[t]})});function Zp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ni.hasOwnProperty(t)&&ni[t]?(""+e).trim():e+"px"}function eg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Zp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Px=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vu(t,e){if(e){if(Px[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function bu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Du=null;function Kc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lu=null,Gr=null,Yr=null;function Pf(t){if(t=Hi(t)){if(typeof Lu!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ka(e),Lu(t.stateNode,t.type,e))}}function tg(t){Gr?Yr?Yr.push(t):Yr=[t]:Gr=t}function ng(){if(Gr){var t=Gr,e=Yr;if(Yr=Gr=null,Pf(t),e)for(t=0;t<e.length;t++)Pf(e[t])}}function rg(t,e){return t(e)}function sg(){}var Ql=!1;function ig(t,e,n){if(Ql)return t(e,n);Ql=!0;try{return rg(t,e,n)}finally{Ql=!1,(Gr!==null||Yr!==null)&&(sg(),ng())}}function yi(t,e){var n=t.stateNode;if(n===null)return null;var r=Ka(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Mu=!1;if(dn)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Mu=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Mu=!1}function kx(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var ri=!1,aa=null,la=!1,Ou=null,Rx={onError:function(t){ri=!0,aa=t}};function Vx(t,e,n,r,s,i,o,u,c){ri=!1,aa=null,kx.apply(Rx,arguments)}function bx(t,e,n,r,s,i,o,u,c){if(Vx.apply(this,arguments),ri){if(ri){var h=aa;ri=!1,aa=null}else throw Error(z(198));la||(la=!0,Ou=h)}}function Nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function og(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kf(t){if(Nr(t)!==t)throw Error(z(188))}function Dx(t){var e=t.alternate;if(!e){if(e=Nr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kf(s),t;if(i===r)return kf(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function ag(t){return t=Dx(t),t!==null?lg(t):null}function lg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lg(t);if(e!==null)return e;t=t.sibling}return null}var ug=St.unstable_scheduleCallback,Rf=St.unstable_cancelCallback,Lx=St.unstable_shouldYield,Mx=St.unstable_requestPaint,ke=St.unstable_now,Ox=St.unstable_getCurrentPriorityLevel,Gc=St.unstable_ImmediatePriority,cg=St.unstable_UserBlockingPriority,ua=St.unstable_NormalPriority,Fx=St.unstable_LowPriority,dg=St.unstable_IdlePriority,$a=null,Xt=null;function Ux(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot($a,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:qx,zx=Math.log,Bx=Math.LN2;function qx(t){return t>>>=0,t===0?32:31-(zx(t)/Bx|0)|0}var No=64,Io=4194304;function Ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ca(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Ys(u):(i&=o,i!==0&&(r=Ys(i)))}else o=n&~s,o!==0?r=Ys(o):i!==0&&(r=Ys(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qt(e),s=1<<n,r|=t[n],e&=~s;return r}function $x(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-qt(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=$x(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Fu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hg(){var t=No;return No<<=1,!(No&4194240)&&(No=64),t}function Wl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=n}function Qx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function fg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mg,Xc,pg,gg,yg,Uu=!1,Co=[],kn=null,Rn=null,Vn=null,vi=new Map,xi=new Map,In=[],Wx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vf(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":vi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(e.pointerId)}}function zs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hi(e),e!==null&&Xc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Kx(t,e,n,r,s){switch(e){case"focusin":return kn=zs(kn,t,e,n,r,s),!0;case"dragenter":return Rn=zs(Rn,t,e,n,r,s),!0;case"mouseover":return Vn=zs(Vn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return vi.set(i,zs(vi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xi.set(i,zs(xi.get(i)||null,t,e,n,r,s)),!0}return!1}function vg(t){var e=or(t.target);if(e!==null){var n=Nr(e);if(n!==null){if(e=n.tag,e===13){if(e=og(n),e!==null){t.blockedOn=e,yg(t.priority,function(){pg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $o(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Du=r,n.target.dispatchEvent(r),Du=null}else return e=Hi(n),e!==null&&Xc(e),t.blockedOn=n,!1;e.shift()}return!0}function bf(t,e,n){$o(t)&&n.delete(e)}function Gx(){Uu=!1,kn!==null&&$o(kn)&&(kn=null),Rn!==null&&$o(Rn)&&(Rn=null),Vn!==null&&$o(Vn)&&(Vn=null),vi.forEach(bf),xi.forEach(bf)}function Bs(t,e){t.blockedOn===e&&(t.blockedOn=null,Uu||(Uu=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Gx)))}function _i(t){function e(s){return Bs(s,t)}if(0<Co.length){Bs(Co[0],t);for(var n=1;n<Co.length;n++){var r=Co[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&Bs(kn,t),Rn!==null&&Bs(Rn,t),Vn!==null&&Bs(Vn,t),vi.forEach(e),xi.forEach(e),n=0;n<In.length;n++)r=In[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)vg(n),n.blockedOn===null&&In.shift()}var Xr=vn.ReactCurrentBatchConfig,da=!0;function Yx(t,e,n,r){var s=fe,i=Xr.transition;Xr.transition=null;try{fe=1,Jc(t,e,n,r)}finally{fe=s,Xr.transition=i}}function Xx(t,e,n,r){var s=fe,i=Xr.transition;Xr.transition=null;try{fe=4,Jc(t,e,n,r)}finally{fe=s,Xr.transition=i}}function Jc(t,e,n,r){if(da){var s=zu(t,e,n,r);if(s===null)ru(t,e,r,ha,n),Vf(t,r);else if(Kx(s,t,e,n,r))r.stopPropagation();else if(Vf(t,r),e&4&&-1<Wx.indexOf(t)){for(;s!==null;){var i=Hi(s);if(i!==null&&mg(i),i=zu(t,e,n,r),i===null&&ru(t,e,r,ha,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ru(t,e,r,null,n)}}var ha=null;function zu(t,e,n,r){if(ha=null,t=Kc(r),t=or(t),t!==null)if(e=Nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=og(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ha=t,null}function xg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ox()){case Gc:return 1;case cg:return 4;case ua:case Fx:return 16;case dg:return 536870912;default:return 16}default:return 16}}var jn=null,Zc=null,Ho=null;function _g(){if(Ho)return Ho;var t,e=Zc,n=e.length,r,s="value"in jn?jn.value:jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ho=s.slice(t,1<r?1-r:void 0)}function Qo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jo(){return!0}function Df(){return!1}function Pt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jo:Df,this.isPropagationStopped=Df,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),e}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ed=Pt(xs),$i=Ce({},xs,{view:0,detail:0}),Jx=Pt($i),Kl,Gl,qs,Ha=Ce({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:td,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(Kl=t.screenX-qs.screenX,Gl=t.screenY-qs.screenY):Gl=Kl=0,qs=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:Gl}}),Lf=Pt(Ha),Zx=Ce({},Ha,{dataTransfer:0}),e_=Pt(Zx),t_=Ce({},$i,{relatedTarget:0}),Yl=Pt(t_),n_=Ce({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),r_=Pt(n_),s_=Ce({},xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i_=Pt(s_),o_=Ce({},xs,{data:0}),Mf=Pt(o_),a_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=u_[t])?!!e[t]:!1}function td(){return c_}var d_=Ce({},$i,{key:function(t){if(t.key){var e=a_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?l_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:td,charCode:function(t){return t.type==="keypress"?Qo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h_=Pt(d_),f_=Ce({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=Pt(f_),m_=Ce({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:td}),p_=Pt(m_),g_=Ce({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),y_=Pt(g_),v_=Ce({},Ha,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x_=Pt(v_),__=[9,13,27,32],nd=dn&&"CompositionEvent"in window,si=null;dn&&"documentMode"in document&&(si=document.documentMode);var w_=dn&&"TextEvent"in window&&!si,wg=dn&&(!nd||si&&8<si&&11>=si),Ff=" ",Uf=!1;function Eg(t,e){switch(t){case"keyup":return __.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Or=!1;function E_(t,e){switch(t){case"compositionend":return Tg(e);case"keypress":return e.which!==32?null:(Uf=!0,Ff);case"textInput":return t=e.data,t===Ff&&Uf?null:t;default:return null}}function T_(t,e){if(Or)return t==="compositionend"||!nd&&Eg(t,e)?(t=_g(),Ho=Zc=jn=null,Or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wg&&e.locale!=="ko"?null:e.data;default:return null}}var N_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!N_[t.type]:e==="textarea"}function Ng(t,e,n,r){tg(r),e=fa(e,"onChange"),0<e.length&&(n=new ed("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ii=null,wi=null;function I_(t){Dg(t,0)}function Qa(t){var e=zr(t);if(Kp(e))return t}function C_(t,e){if(t==="change")return e}var Ig=!1;if(dn){var Xl;if(dn){var Jl="oninput"in document;if(!Jl){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),Jl=typeof Bf.oninput=="function"}Xl=Jl}else Xl=!1;Ig=Xl&&(!document.documentMode||9<document.documentMode)}function qf(){ii&&(ii.detachEvent("onpropertychange",Cg),wi=ii=null)}function Cg(t){if(t.propertyName==="value"&&Qa(wi)){var e=[];Ng(e,wi,t,Kc(t)),ig(I_,e)}}function j_(t,e,n){t==="focusin"?(qf(),ii=e,wi=n,ii.attachEvent("onpropertychange",Cg)):t==="focusout"&&qf()}function S_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qa(wi)}function A_(t,e){if(t==="click")return Qa(e)}function P_(t,e){if(t==="input"||t==="change")return Qa(e)}function k_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qt=typeof Object.is=="function"?Object.is:k_;function Ei(t,e){if(Qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Tu.call(e,s)||!Qt(t[s],e[s]))return!1}return!0}function $f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hf(t,e){var n=$f(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$f(n)}}function jg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sg(){for(var t=window,e=oa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=oa(t.document)}return e}function rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function R_(t){var e=Sg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jg(n.ownerDocument.documentElement,n)){if(r!==null&&rd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Hf(n,i);var o=Hf(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var V_=dn&&"documentMode"in document&&11>=document.documentMode,Fr=null,Bu=null,oi=null,qu=!1;function Qf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qu||Fr==null||Fr!==oa(r)||(r=Fr,"selectionStart"in r&&rd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oi&&Ei(oi,r)||(oi=r,r=fa(Bu,"onSelect"),0<r.length&&(e=new ed("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fr)))}function So(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ur={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionend:So("Transition","TransitionEnd")},Zl={},Ag={};dn&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Wa(t){if(Zl[t])return Zl[t];if(!Ur[t])return t;var e=Ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ag)return Zl[t]=e[n];return t}var Pg=Wa("animationend"),kg=Wa("animationiteration"),Rg=Wa("animationstart"),Vg=Wa("transitionend"),bg=new Map,Wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(t,e){bg.set(t,e),Tr(e,[t])}for(var eu=0;eu<Wf.length;eu++){var tu=Wf[eu],b_=tu.toLowerCase(),D_=tu[0].toUpperCase()+tu.slice(1);Gn(b_,"on"+D_)}Gn(Pg,"onAnimationEnd");Gn(kg,"onAnimationIteration");Gn(Rg,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(Vg,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function Kf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bx(r,e,void 0,t),t.currentTarget=null}function Dg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Kf(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Kf(s,u,h),i=c}}}if(la)throw t=Ou,la=!1,Ou=null,t}function _e(t,e){var n=e[Ku];n===void 0&&(n=e[Ku]=new Set);var r=t+"__bubble";n.has(r)||(Lg(e,t,2,!1),n.add(r))}function nu(t,e,n){var r=0;e&&(r|=4),Lg(n,t,r,e)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function Ti(t){if(!t[Ao]){t[Ao]=!0,qp.forEach(function(n){n!=="selectionchange"&&(L_.has(n)||nu(n,!1,t),nu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ao]||(e[Ao]=!0,nu("selectionchange",!1,e))}}function Lg(t,e,n,r){switch(xg(e)){case 1:var s=Yx;break;case 4:s=Xx;break;default:s=Jc}n=s.bind(null,e,n,t),s=void 0,!Mu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ru(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=or(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}ig(function(){var h=i,m=Kc(n),p=[];e:{var _=bg.get(t);if(_!==void 0){var C=ed,S=t;switch(t){case"keypress":if(Qo(n)===0)break e;case"keydown":case"keyup":C=h_;break;case"focusin":S="focus",C=Yl;break;case"focusout":S="blur",C=Yl;break;case"beforeblur":case"afterblur":C=Yl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=e_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=p_;break;case Pg:case kg:case Rg:C=r_;break;case Vg:C=y_;break;case"scroll":C=Jx;break;case"wheel":C=x_;break;case"copy":case"cut":case"paste":C=i_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Of}var P=(e&4)!==0,D=!P&&t==="scroll",I=P?_!==null?_+"Capture":null:_;P=[];for(var w=h,T;w!==null;){T=w;var b=T.stateNode;if(T.tag===5&&b!==null&&(T=b,I!==null&&(b=yi(w,I),b!=null&&P.push(Ni(w,b,T)))),D)break;w=w.return}0<P.length&&(_=new C(_,S,null,n,m),p.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",_&&n!==Du&&(S=n.relatedTarget||n.fromElement)&&(or(S)||S[hn]))break e;if((C||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,C?(S=n.relatedTarget||n.toElement,C=h,S=S?or(S):null,S!==null&&(D=Nr(S),S!==D||S.tag!==5&&S.tag!==6)&&(S=null)):(C=null,S=h),C!==S)){if(P=Lf,b="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=Of,b="onPointerLeave",I="onPointerEnter",w="pointer"),D=C==null?_:zr(C),T=S==null?_:zr(S),_=new P(b,w+"leave",C,n,m),_.target=D,_.relatedTarget=T,b=null,or(m)===h&&(P=new P(I,w+"enter",S,n,m),P.target=T,P.relatedTarget=D,b=P),D=b,C&&S)t:{for(P=C,I=S,w=0,T=P;T;T=Rr(T))w++;for(T=0,b=I;b;b=Rr(b))T++;for(;0<w-T;)P=Rr(P),w--;for(;0<T-w;)I=Rr(I),T--;for(;w--;){if(P===I||I!==null&&P===I.alternate)break t;P=Rr(P),I=Rr(I)}P=null}else P=null;C!==null&&Gf(p,_,C,P,!1),S!==null&&D!==null&&Gf(p,D,S,P,!0)}}e:{if(_=h?zr(h):window,C=_.nodeName&&_.nodeName.toLowerCase(),C==="select"||C==="input"&&_.type==="file")var R=C_;else if(zf(_))if(Ig)R=P_;else{R=S_;var k=j_}else(C=_.nodeName)&&C.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(R=A_);if(R&&(R=R(t,h))){Ng(p,R,n,m);break e}k&&k(t,_,h),t==="focusout"&&(k=_._wrapperState)&&k.controlled&&_.type==="number"&&Pu(_,"number",_.value)}switch(k=h?zr(h):window,t){case"focusin":(zf(k)||k.contentEditable==="true")&&(Fr=k,Bu=h,oi=null);break;case"focusout":oi=Bu=Fr=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,Qf(p,n,m);break;case"selectionchange":if(V_)break;case"keydown":case"keyup":Qf(p,n,m)}var x;if(nd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Or?Eg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(wg&&n.locale!=="ko"&&(Or||y!=="onCompositionStart"?y==="onCompositionEnd"&&Or&&(x=_g()):(jn=m,Zc="value"in jn?jn.value:jn.textContent,Or=!0)),k=fa(h,y),0<k.length&&(y=new Mf(y,t,null,n,m),p.push({event:y,listeners:k}),x?y.data=x:(x=Tg(n),x!==null&&(y.data=x)))),(x=w_?E_(t,n):T_(t,n))&&(h=fa(h,"onBeforeInput"),0<h.length&&(m=new Mf("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=x))}Dg(p,e)})}function Ni(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yi(t,n),i!=null&&r.unshift(Ni(t,i,s)),i=yi(t,e),i!=null&&r.push(Ni(t,i,s))),t=t.return}return r}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gf(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=yi(n,i),c!=null&&o.unshift(Ni(n,c,u))):s||(c=yi(n,i),c!=null&&o.push(Ni(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var M_=/\r\n?/g,O_=/\u0000|\uFFFD/g;function Yf(t){return(typeof t=="string"?t:""+t).replace(M_,`
`).replace(O_,"")}function Po(t,e,n){if(e=Yf(e),Yf(t)!==e&&n)throw Error(z(425))}function ma(){}var $u=null,Hu=null;function Qu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wu=typeof setTimeout=="function"?setTimeout:void 0,F_=typeof clearTimeout=="function"?clearTimeout:void 0,Xf=typeof Promise=="function"?Promise:void 0,U_=typeof queueMicrotask=="function"?queueMicrotask:typeof Xf<"u"?function(t){return Xf.resolve(null).then(t).catch(z_)}:Wu;function z_(t){setTimeout(function(){throw t})}function su(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_i(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_i(e)}function bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _s=Math.random().toString(36).slice(2),Yt="__reactFiber$"+_s,Ii="__reactProps$"+_s,hn="__reactContainer$"+_s,Ku="__reactEvents$"+_s,B_="__reactListeners$"+_s,q_="__reactHandles$"+_s;function or(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jf(t);t!==null;){if(n=t[Yt])return n;t=Jf(t)}return e}t=n,n=t.parentNode}return null}function Hi(t){return t=t[Yt]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ka(t){return t[Ii]||null}var Gu=[],Br=-1;function Yn(t){return{current:t}}function Ee(t){0>Br||(t.current=Gu[Br],Gu[Br]=null,Br--)}function ye(t,e){Br++,Gu[Br]=t.current,t.current=e}var Hn={},ot=Yn(Hn),vt=Yn(!1),mr=Hn;function ss(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function pa(){Ee(vt),Ee(ot)}function Zf(t,e,n){if(ot.current!==Hn)throw Error(z(168));ye(ot,e),ye(vt,n)}function Mg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,jx(t)||"Unknown",s));return Ce({},n,r)}function ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,mr=ot.current,ye(ot,t),ye(vt,vt.current),!0}function em(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Mg(t,e,mr),r.__reactInternalMemoizedMergedChildContext=t,Ee(vt),Ee(ot),ye(ot,t)):Ee(vt),ye(vt,n)}var an=null,Ga=!1,iu=!1;function Og(t){an===null?an=[t]:an.push(t)}function $_(t){Ga=!0,Og(t)}function Xn(){if(!iu&&an!==null){iu=!0;var t=0,e=fe;try{var n=an;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}an=null,Ga=!1}catch(s){throw an!==null&&(an=an.slice(t+1)),ug(Gc,Xn),s}finally{fe=e,iu=!1}}return null}var qr=[],$r=0,ya=null,va=0,Rt=[],Vt=0,pr=null,ln=1,un="";function rr(t,e){qr[$r++]=va,qr[$r++]=ya,ya=t,va=e}function Fg(t,e,n){Rt[Vt++]=ln,Rt[Vt++]=un,Rt[Vt++]=pr,pr=t;var r=ln;t=un;var s=32-qt(r)-1;r&=~(1<<s),n+=1;var i=32-qt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ln=1<<32-qt(e)+s|n<<s|r,un=i+t}else ln=1<<i|n<<s|r,un=t}function sd(t){t.return!==null&&(rr(t,1),Fg(t,1,0))}function id(t){for(;t===ya;)ya=qr[--$r],qr[$r]=null,va=qr[--$r],qr[$r]=null;for(;t===pr;)pr=Rt[--Vt],Rt[Vt]=null,un=Rt[--Vt],Rt[Vt]=null,ln=Rt[--Vt],Rt[Vt]=null}var Ct=null,Nt=null,Te=!1,Bt=null;function Ug(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,Nt=bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pr!==null?{id:ln,overflow:un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,Nt=null,!0):!1;default:return!1}}function Yu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xu(t){if(Te){var e=Nt;if(e){var n=e;if(!tm(t,e)){if(Yu(t))throw Error(z(418));e=bn(n.nextSibling);var r=Ct;e&&tm(t,e)?Ug(r,n):(t.flags=t.flags&-4097|2,Te=!1,Ct=t)}}else{if(Yu(t))throw Error(z(418));t.flags=t.flags&-4097|2,Te=!1,Ct=t}}}function nm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function ko(t){if(t!==Ct)return!1;if(!Te)return nm(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qu(t.type,t.memoizedProps)),e&&(e=Nt)){if(Yu(t))throw zg(),Error(z(418));for(;e;)Ug(t,e),e=bn(e.nextSibling)}if(nm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=Ct?bn(t.stateNode.nextSibling):null;return!0}function zg(){for(var t=Nt;t;)t=bn(t.nextSibling)}function is(){Nt=Ct=null,Te=!1}function od(t){Bt===null?Bt=[t]:Bt.push(t)}var H_=vn.ReactCurrentBatchConfig;function $s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ro(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rm(t){var e=t._init;return e(t._payload)}function Bg(t){function e(I,w){if(t){var T=I.deletions;T===null?(I.deletions=[w],I.flags|=16):T.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=On(I,w),I.index=0,I.sibling=null,I}function i(I,w,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<w?(I.flags|=2,w):T):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,w,T,b){return w===null||w.tag!==6?(w=hu(T,I.mode,b),w.return=I,w):(w=s(w,T),w.return=I,w)}function c(I,w,T,b){var R=T.type;return R===Mr?m(I,w,T.props.children,b,T.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Tn&&rm(R)===w.type)?(b=s(w,T.props),b.ref=$s(I,w,T),b.return=I,b):(b=Zo(T.type,T.key,T.props,null,I.mode,b),b.ref=$s(I,w,T),b.return=I,b)}function h(I,w,T,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=fu(T,I.mode,b),w.return=I,w):(w=s(w,T.children||[]),w.return=I,w)}function m(I,w,T,b,R){return w===null||w.tag!==7?(w=dr(T,I.mode,b,R),w.return=I,w):(w=s(w,T),w.return=I,w)}function p(I,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=hu(""+w,I.mode,T),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wo:return T=Zo(w.type,w.key,w.props,null,I.mode,T),T.ref=$s(I,null,w),T.return=I,T;case Lr:return w=fu(w,I.mode,T),w.return=I,w;case Tn:var b=w._init;return p(I,b(w._payload),T)}if(Gs(w)||Fs(w))return w=dr(w,I.mode,T,null),w.return=I,w;Ro(I,w)}return null}function _(I,w,T,b){var R=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return R!==null?null:u(I,w,""+T,b);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wo:return T.key===R?c(I,w,T,b):null;case Lr:return T.key===R?h(I,w,T,b):null;case Tn:return R=T._init,_(I,w,R(T._payload),b)}if(Gs(T)||Fs(T))return R!==null?null:m(I,w,T,b,null);Ro(I,T)}return null}function C(I,w,T,b,R){if(typeof b=="string"&&b!==""||typeof b=="number")return I=I.get(T)||null,u(w,I,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wo:return I=I.get(b.key===null?T:b.key)||null,c(w,I,b,R);case Lr:return I=I.get(b.key===null?T:b.key)||null,h(w,I,b,R);case Tn:var k=b._init;return C(I,w,T,k(b._payload),R)}if(Gs(b)||Fs(b))return I=I.get(T)||null,m(w,I,b,R,null);Ro(w,b)}return null}function S(I,w,T,b){for(var R=null,k=null,x=w,y=w=0,E=null;x!==null&&y<T.length;y++){x.index>y?(E=x,x=null):E=x.sibling;var N=_(I,x,T[y],b);if(N===null){x===null&&(x=E);break}t&&x&&N.alternate===null&&e(I,x),w=i(N,w,y),k===null?R=N:k.sibling=N,k=N,x=E}if(y===T.length)return n(I,x),Te&&rr(I,y),R;if(x===null){for(;y<T.length;y++)x=p(I,T[y],b),x!==null&&(w=i(x,w,y),k===null?R=x:k.sibling=x,k=x);return Te&&rr(I,y),R}for(x=r(I,x);y<T.length;y++)E=C(x,I,y,T[y],b),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),k===null?R=E:k.sibling=E,k=E);return t&&x.forEach(function(j){return e(I,j)}),Te&&rr(I,y),R}function P(I,w,T,b){var R=Fs(T);if(typeof R!="function")throw Error(z(150));if(T=R.call(T),T==null)throw Error(z(151));for(var k=R=null,x=w,y=w=0,E=null,N=T.next();x!==null&&!N.done;y++,N=T.next()){x.index>y?(E=x,x=null):E=x.sibling;var j=_(I,x,N.value,b);if(j===null){x===null&&(x=E);break}t&&x&&j.alternate===null&&e(I,x),w=i(j,w,y),k===null?R=j:k.sibling=j,k=j,x=E}if(N.done)return n(I,x),Te&&rr(I,y),R;if(x===null){for(;!N.done;y++,N=T.next())N=p(I,N.value,b),N!==null&&(w=i(N,w,y),k===null?R=N:k.sibling=N,k=N);return Te&&rr(I,y),R}for(x=r(I,x);!N.done;y++,N=T.next())N=C(x,I,y,N.value,b),N!==null&&(t&&N.alternate!==null&&x.delete(N.key===null?y:N.key),w=i(N,w,y),k===null?R=N:k.sibling=N,k=N);return t&&x.forEach(function(A){return e(I,A)}),Te&&rr(I,y),R}function D(I,w,T,b){if(typeof T=="object"&&T!==null&&T.type===Mr&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case wo:e:{for(var R=T.key,k=w;k!==null;){if(k.key===R){if(R=T.type,R===Mr){if(k.tag===7){n(I,k.sibling),w=s(k,T.props.children),w.return=I,I=w;break e}}else if(k.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Tn&&rm(R)===k.type){n(I,k.sibling),w=s(k,T.props),w.ref=$s(I,k,T),w.return=I,I=w;break e}n(I,k);break}else e(I,k);k=k.sibling}T.type===Mr?(w=dr(T.props.children,I.mode,b,T.key),w.return=I,I=w):(b=Zo(T.type,T.key,T.props,null,I.mode,b),b.ref=$s(I,w,T),b.return=I,I=b)}return o(I);case Lr:e:{for(k=T.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(I,w.sibling),w=s(w,T.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=fu(T,I.mode,b),w.return=I,I=w}return o(I);case Tn:return k=T._init,D(I,w,k(T._payload),b)}if(Gs(T))return S(I,w,T,b);if(Fs(T))return P(I,w,T,b);Ro(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,T),w.return=I,I=w):(n(I,w),w=hu(T,I.mode,b),w.return=I,I=w),o(I)):n(I,w)}return D}var os=Bg(!0),qg=Bg(!1),xa=Yn(null),_a=null,Hr=null,ad=null;function ld(){ad=Hr=_a=null}function ud(t){var e=xa.current;Ee(xa),t._currentValue=e}function Ju(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jr(t,e){_a=t,ad=Hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(ad!==t)if(t={context:t,memoizedValue:e,next:null},Hr===null){if(_a===null)throw Error(z(308));Hr=t,_a.dependencies={lanes:0,firstContext:t}}else Hr=Hr.next=t;return e}var ar=null;function cd(t){ar===null?ar=[t]:ar.push(t)}function $g(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cd(e)):(n.next=s.next,s.next=n),e.interleaved=n,fn(t,r)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nn=!1;function dd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fn(t,n)}return s=r.interleaved,s===null?(e.next=e,cd(r)):(e.next=s.next,s.next=e),r.interleaved=e,fn(t,n)}function Wo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yc(t,n)}}function sm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wa(t,e,n,r){var s=t.updateQueue;Nn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=h=c=null,u=i;do{var _=u.lane,C=u.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:C,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,P=u;switch(_=e,C=n,P.tag){case 1:if(S=P.payload,typeof S=="function"){p=S.call(C,p,_);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=P.payload,_=typeof S=="function"?S.call(C,p,_):S,_==null)break e;p=Ce({},p,_);break e;case 2:Nn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[u]:_.push(u))}else C={eventTime:C,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=C,c=p):m=m.next=C,o|=_;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;_=u,u=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yr|=o,t.lanes=o,t.memoizedState=p}}function im(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Qi={},Jt=Yn(Qi),Ci=Yn(Qi),ji=Yn(Qi);function lr(t){if(t===Qi)throw Error(z(174));return t}function hd(t,e){switch(ye(ji,e),ye(Ci,t),ye(Jt,Qi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ru(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ru(e,t)}Ee(Jt),ye(Jt,e)}function as(){Ee(Jt),Ee(Ci),Ee(ji)}function Qg(t){lr(ji.current);var e=lr(Jt.current),n=Ru(e,t.type);e!==n&&(ye(Ci,t),ye(Jt,n))}function fd(t){Ci.current===t&&(Ee(Jt),Ee(Ci))}var Ne=Yn(0);function Ea(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ou=[];function md(){for(var t=0;t<ou.length;t++)ou[t]._workInProgressVersionPrimary=null;ou.length=0}var Ko=vn.ReactCurrentDispatcher,au=vn.ReactCurrentBatchConfig,gr=0,Ie=null,Oe=null,ze=null,Ta=!1,ai=!1,Si=0,Q_=0;function et(){throw Error(z(321))}function pd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qt(t[n],e[n]))return!1;return!0}function gd(t,e,n,r,s,i){if(gr=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ko.current=t===null||t.memoizedState===null?Y_:X_,t=n(r,s),ai){i=0;do{if(ai=!1,Si=0,25<=i)throw Error(z(301));i+=1,ze=Oe=null,e.updateQueue=null,Ko.current=J_,t=n(r,s)}while(ai)}if(Ko.current=Na,e=Oe!==null&&Oe.next!==null,gr=0,ze=Oe=Ie=null,Ta=!1,e)throw Error(z(300));return t}function yd(){var t=Si!==0;return Si=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ie.memoizedState=ze=t:ze=ze.next=t,ze}function Mt(){if(Oe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=ze===null?Ie.memoizedState:ze.next;if(e!==null)ze=e,Oe=t;else{if(t===null)throw Error(z(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},ze===null?Ie.memoizedState=ze=t:ze=ze.next=t}return ze}function Ai(t,e){return typeof e=="function"?e(t):e}function lu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Oe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((gr&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Ie.lanes|=m,yr|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,Qt(r,e.memoizedState)||(yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,yr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Qt(i,e.memoizedState)||(yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Wg(){}function Kg(t,e){var n=Ie,r=Mt(),s=e(),i=!Qt(r.memoizedState,s);if(i&&(r.memoizedState=s,yt=!0),r=r.queue,vd(Xg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Pi(9,Yg.bind(null,n,r,s,e),void 0,null),Be===null)throw Error(z(349));gr&30||Gg(n,e,s)}return s}function Gg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yg(t,e,n,r){e.value=n,e.getSnapshot=r,Jg(e)&&Zg(t)}function Xg(t,e,n){return n(function(){Jg(e)&&Zg(t)})}function Jg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qt(t,n)}catch{return!0}}function Zg(t){var e=fn(t,1);e!==null&&$t(e,t,1,-1)}function om(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},e.queue=t,t=t.dispatch=G_.bind(null,Ie,t),[e.memoizedState,t]}function Pi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ey(){return Mt().memoizedState}function Go(t,e,n,r){var s=Gt();Ie.flags|=t,s.memoizedState=Pi(1|e,n,void 0,r===void 0?null:r)}function Ya(t,e,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var o=Oe.memoizedState;if(i=o.destroy,r!==null&&pd(r,o.deps)){s.memoizedState=Pi(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Pi(1|e,n,i,r)}function am(t,e){return Go(8390656,8,t,e)}function vd(t,e){return Ya(2048,8,t,e)}function ty(t,e){return Ya(4,2,t,e)}function ny(t,e){return Ya(4,4,t,e)}function ry(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sy(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4,4,ry.bind(null,e,t),n)}function xd(){}function iy(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oy(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ay(t,e,n){return gr&21?(Qt(n,e)||(n=hg(),Ie.lanes|=n,yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=n)}function W_(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=au.transition;au.transition={};try{t(!1),e()}finally{fe=n,au.transition=r}}function ly(){return Mt().memoizedState}function K_(t,e,n){var r=Mn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uy(t))cy(e,n);else if(n=$g(t,e,n,r),n!==null){var s=ct();$t(n,t,r,s),dy(n,e,r)}}function G_(t,e,n){var r=Mn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uy(t))cy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Qt(u,o)){var c=e.interleaved;c===null?(s.next=s,cd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=$g(t,e,s,r),n!==null&&(s=ct(),$t(n,t,r,s),dy(n,e,r))}}function uy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function cy(t,e){ai=Ta=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yc(t,n)}}var Na={readContext:Lt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Y_={readContext:Lt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:am,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Go(4194308,4,ry.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Go(4194308,4,t,e)},useInsertionEffect:function(t,e){return Go(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=K_.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:om,useDebugValue:xd,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=om(!1),e=t[0];return t=W_.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=Gt();if(Te){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Be===null)throw Error(z(349));gr&30||Gg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,am(Xg.bind(null,r,i,t),[t]),r.flags|=2048,Pi(9,Yg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Be.identifierPrefix;if(Te){var n=un,r=ln;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Si++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Q_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},X_={readContext:Lt,useCallback:iy,useContext:Lt,useEffect:vd,useImperativeHandle:sy,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:oy,useReducer:lu,useRef:ey,useState:function(){return lu(Ai)},useDebugValue:xd,useDeferredValue:function(t){var e=Mt();return ay(e,Oe.memoizedState,t)},useTransition:function(){var t=lu(Ai)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Wg,useSyncExternalStore:Kg,useId:ly,unstable_isNewReconciler:!1},J_={readContext:Lt,useCallback:iy,useContext:Lt,useEffect:vd,useImperativeHandle:sy,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:oy,useReducer:uu,useRef:ey,useState:function(){return uu(Ai)},useDebugValue:xd,useDeferredValue:function(t){var e=Mt();return Oe===null?e.memoizedState=t:ay(e,Oe.memoizedState,t)},useTransition:function(){var t=uu(Ai)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Wg,useSyncExternalStore:Kg,useId:ly,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xa={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Mn(t),i=cn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Dn(t,i,s),e!==null&&($t(e,t,s,r),Wo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Mn(t),i=cn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Dn(t,i,s),e!==null&&($t(e,t,s,r),Wo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Mn(t),s=cn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Dn(t,s,r),e!==null&&($t(e,t,r,n),Wo(e,t,r))}};function lm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ei(n,r)||!Ei(s,i):!0}function hy(t,e,n){var r=!1,s=Hn,i=e.contextType;return typeof i=="object"&&i!==null?i=Lt(i):(s=xt(e)?mr:ot.current,r=e.contextTypes,i=(r=r!=null)?ss(t,s):Hn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xa.enqueueReplaceState(e,e.state,null)}function ec(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Lt(i):(i=xt(e)?mr:ot.current,s.context=ss(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Zu(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xa.enqueueReplaceState(s,s.state,null),wa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ls(t,e){try{var n="",r=e;do n+=Cx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function cu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z_=typeof WeakMap=="function"?WeakMap:Map;function fy(t,e,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ca||(Ca=!0,dc=r),tc(t,e)},n}function my(t,e,n){n=cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){tc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){tc(t,e),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Z_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fw.bind(null,t,e,n),e.then(t,t))}function dm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cn(-1,1),e.tag=2,Dn(n,e,1))),n.lanes|=1),t)}var ew=vn.ReactCurrentOwner,yt=!1;function ut(t,e,n,r){e.child=t===null?qg(e,null,n,r):os(e,t.child,n,r)}function fm(t,e,n,r,s){n=n.render;var i=e.ref;return Jr(e,s),r=gd(t,e,n,r,i,s),n=yd(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,mn(t,e,s)):(Te&&n&&sd(e),e.flags|=1,ut(t,e,r,s),e.child)}function mm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,py(t,e,i,r,s)):(t=Zo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ei,n(o,r)&&t.ref===e.ref)return mn(t,e,s)}return e.flags|=1,t=On(i,r),t.ref=e.ref,t.return=e,e.child=t}function py(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ei(i,r)&&t.ref===e.ref)if(yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,mn(t,e,s)}return nc(t,e,n,r,s)}function gy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Wr,Tt),Tt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Wr,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Wr,Tt),Tt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Wr,Tt),Tt|=r;return ut(t,e,s,n),e.child}function yy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nc(t,e,n,r,s){var i=xt(n)?mr:ot.current;return i=ss(e,i),Jr(e,s),n=gd(t,e,n,r,i,s),r=yd(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,mn(t,e,s)):(Te&&r&&sd(e),e.flags|=1,ut(t,e,n,s),e.child)}function pm(t,e,n,r,s){if(xt(n)){var i=!0;ga(e)}else i=!1;if(Jr(e,s),e.stateNode===null)Yo(t,e),hy(e,n,r),ec(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Lt(h):(h=xt(n)?mr:ot.current,h=ss(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&um(e,o,r,h),Nn=!1;var _=e.memoizedState;o.state=_,wa(e,r,o,s),c=e.memoizedState,u!==r||_!==c||vt.current||Nn?(typeof m=="function"&&(Zu(e,n,m,r),c=e.memoizedState),(u=Nn||lm(e,n,u,r,_,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hg(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Ut(e.type,u),o.props=h,p=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lt(c):(c=xt(n)?mr:ot.current,c=ss(e,c));var C=n.getDerivedStateFromProps;(m=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||_!==c)&&um(e,o,r,c),Nn=!1,_=e.memoizedState,o.state=_,wa(e,r,o,s);var S=e.memoizedState;u!==p||_!==S||vt.current||Nn?(typeof C=="function"&&(Zu(e,n,C,r),S=e.memoizedState),(h=Nn||lm(e,n,h,r,_,S,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return rc(t,e,n,r,i,s)}function rc(t,e,n,r,s,i){yy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&em(e,n,!1),mn(t,e,i);r=e.stateNode,ew.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=os(e,t.child,null,i),e.child=os(e,null,u,i)):ut(t,e,u,i),e.memoizedState=r.state,s&&em(e,n,!0),e.child}function vy(t){var e=t.stateNode;e.pendingContext?Zf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zf(t,e.context,!1),hd(t,e.containerInfo)}function gm(t,e,n,r,s){return is(),od(s),e.flags|=256,ut(t,e,n,r),e.child}var sc={dehydrated:null,treeContext:null,retryLane:0};function ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function xy(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ne,s&1),t===null)return Xu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=el(o,r,0,null),t=dr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ic(n),e.memoizedState=sc,t):_d(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return tw(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=On(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=On(u,i):(i=dr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ic(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=sc,r}return i=t.child,t=i.sibling,r=On(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _d(t,e){return e=el({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vo(t,e,n,r){return r!==null&&od(r),os(e,t.child,null,n),t=_d(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=cu(Error(z(422))),Vo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=el({mode:"visible",children:r.children},s,0,null),i=dr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&os(e,t.child,null,o),e.child.memoizedState=ic(o),e.memoizedState=sc,i);if(!(e.mode&1))return Vo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(z(419)),r=cu(i,r,void 0),Vo(t,e,o,r)}if(u=(o&t.childLanes)!==0,yt||u){if(r=Be,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fn(t,s),$t(r,t,s,-1))}return Cd(),r=cu(Error(z(421))),Vo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=bn(s.nextSibling),Ct=e,Te=!0,Bt=null,t!==null&&(Rt[Vt++]=ln,Rt[Vt++]=un,Rt[Vt++]=pr,ln=t.id,un=t.overflow,pr=e),e=_d(e,r.children),e.flags|=4096,e)}function ym(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ju(t.return,e,n)}function du(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _y(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ut(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ym(t,n,e);else if(t.tag===19)ym(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ea(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),du(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ea(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}du(e,!0,n,null,i);break;case"together":du(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=On(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=On(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nw(t,e,n){switch(e.tag){case 3:vy(e),is();break;case 5:Qg(e);break;case 1:xt(e.type)&&ga(e);break;case 4:hd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(xa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?xy(t,e,n):(ye(Ne,Ne.current&1),t=mn(t,e,n),t!==null?t.sibling:null);ye(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _y(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,gy(t,e,n)}return mn(t,e,n)}var wy,oc,Ey,Ty;wy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oc=function(){};Ey=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,lr(Jt.current);var i=null;switch(n){case"input":s=Su(t,s),r=Su(t,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=ku(t,s),r=ku(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ma)}Vu(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(pi.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&_e("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ty=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hs(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rw(t,e,n){var r=e.pendingProps;switch(id(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return xt(e.type)&&pa(),tt(e),null;case 3:return r=e.stateNode,as(),Ee(vt),Ee(ot),md(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ko(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(mc(Bt),Bt=null))),oc(t,e),tt(e),null;case 5:fd(e);var s=lr(ji.current);if(n=e.type,t!==null&&e.stateNode!=null)Ey(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return tt(e),null}if(t=lr(Jt.current),ko(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yt]=e,r[Ii]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Xs.length;s++)_e(Xs[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Cf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Sf(r,i),_e("invalid",r)}Vu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Po(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Po(r.textContent,u,t),s=["children",""+u]):pi.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Eo(r),jf(r,i,!0);break;case"textarea":Eo(r),Af(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ma)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[Ii]=r,wy(t,e,!1,!1),e.stateNode=t;e:{switch(o=bu(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xs.length;s++)_e(Xs[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Cf(t,r),s=Su(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Sf(t,r),s=ku(t,r),_e("invalid",t);break;default:s=r}Vu(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?eg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Jp(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&gi(t,c):typeof c=="number"&&gi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_e("scroll",t):c!=null&&$c(t,i,c,o))}switch(n){case"input":Eo(t),jf(t,r,!1);break;case"textarea":Eo(t),Af(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$n(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ma)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(t&&e.stateNode!=null)Ty(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=lr(ji.current),lr(Jt.current),ko(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(i=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:Po(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Po(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return tt(e),null;case 13:if(Ee(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Nt!==null&&e.mode&1&&!(e.flags&128))zg(),is(),e.flags|=98560,i=!1;else if(i=ko(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Yt]=e}else is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),i=!1}else Bt!==null&&(mc(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Fe===0&&(Fe=3):Cd())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return as(),oc(t,e),t===null&&Ti(e.stateNode.containerInfo),tt(e),null;case 10:return ud(e.type._context),tt(e),null;case 17:return xt(e.type)&&pa(),tt(e),null;case 19:if(Ee(Ne),i=e.memoizedState,i===null)return tt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Hs(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ea(t),o!==null){for(e.flags|=128,Hs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>us&&(e.flags|=128,r=!0,Hs(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ea(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return tt(e),null}else 2*ke()-i.renderingStartTime>us&&n!==1073741824&&(e.flags|=128,r=!0,Hs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=Ne.current,ye(Ne,r?n&1|2:n&1),e):(tt(e),null);case 22:case 23:return Id(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function sw(t,e){switch(id(e),e.tag){case 1:return xt(e.type)&&pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return as(),Ee(vt),Ee(ot),md(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fd(e),null;case 13:if(Ee(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));is()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ne),null;case 4:return as(),null;case 10:return ud(e.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var bo=!1,st=!1,iw=typeof WeakSet=="function"?WeakSet:Set,$=null;function Qr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function ac(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var vm=!1;function ow(t,e){if($u=da,t=Sg(),rd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,p=t,_=null;t:for(;;){for(var C;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(C=p.firstChild)!==null;)_=p,p=C;for(;;){if(p===t)break t;if(_===n&&++h===s&&(u=o),_===i&&++m===r&&(c=o),(C=p.nextSibling)!==null)break;p=_,_=p.parentNode}p=C}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hu={focusedElem:t,selectionRange:n},da=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var P=S.memoizedProps,D=S.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ut(e.type,P),D);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Ae(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return S=vm,vm=!1,S}function li(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ac(e,n,i)}s=s.next}while(s!==r)}}function Ja(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ny(t){var e=t.alternate;e!==null&&(t.alternate=null,Ny(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Ii],delete e[Ku],delete e[B_],delete e[q_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iy(t){return t.tag===5||t.tag===3||t.tag===4}function xm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ma));else if(r!==4&&(t=t.child,t!==null))for(uc(t,e,n),t=t.sibling;t!==null;)uc(t,e,n),t=t.sibling}function cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}var $e=null,zt=!1;function En(t,e,n){for(n=n.child;n!==null;)Cy(t,e,n),n=n.sibling}function Cy(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount($a,n)}catch{}switch(n.tag){case 5:st||Qr(n,e);case 6:var r=$e,s=zt;$e=null,En(t,e,n),$e=r,zt=s,$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?su(t.parentNode,n):t.nodeType===1&&su(t,n),_i(t)):su($e,n.stateNode));break;case 4:r=$e,s=zt,$e=n.stateNode.containerInfo,zt=!0,En(t,e,n),$e=r,zt=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ac(n,e,o),s=s.next}while(s!==r)}En(t,e,n);break;case 1:if(!st&&(Qr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ae(n,e,u)}En(t,e,n);break;case 21:En(t,e,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,En(t,e,n),st=r):En(t,e,n);break;default:En(t,e,n)}}function _m(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iw),e.forEach(function(r){var s=pw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:$e=u.stateNode,zt=!1;break e;case 3:$e=u.stateNode.containerInfo,zt=!0;break e;case 4:$e=u.stateNode.containerInfo,zt=!0;break e}u=u.return}if($e===null)throw Error(z(160));Cy(i,o,s),$e=null,zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Ae(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jy(e,t),e=e.sibling}function jy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),Kt(t),r&4){try{li(3,t,t.return),Ja(3,t)}catch(P){Ae(t,t.return,P)}try{li(5,t,t.return)}catch(P){Ae(t,t.return,P)}}break;case 1:Ft(e,t),Kt(t),r&512&&n!==null&&Qr(n,n.return);break;case 5:if(Ft(e,t),Kt(t),r&512&&n!==null&&Qr(n,n.return),t.flags&32){var s=t.stateNode;try{gi(s,"")}catch(P){Ae(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Gp(s,i),bu(u,o);var h=bu(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?eg(s,p):m==="dangerouslySetInnerHTML"?Jp(s,p):m==="children"?gi(s,p):$c(s,m,p,h)}switch(u){case"input":Au(s,i);break;case"textarea":Yp(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Kr(s,!!i.multiple,C,!1):_!==!!i.multiple&&(i.defaultValue!=null?Kr(s,!!i.multiple,i.defaultValue,!0):Kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ii]=i}catch(P){Ae(t,t.return,P)}}break;case 6:if(Ft(e,t),Kt(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Ae(t,t.return,P)}}break;case 3:if(Ft(e,t),Kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_i(e.containerInfo)}catch(P){Ae(t,t.return,P)}break;case 4:Ft(e,t),Kt(t);break;case 13:Ft(e,t),Kt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Td=ke())),r&4&&_m(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(st=(h=st)||m,Ft(e,t),st=h):Ft(e,t),Kt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for($=t,m=t.child;m!==null;){for(p=$=m;$!==null;){switch(_=$,C=_.child,_.tag){case 0:case 11:case 14:case 15:li(4,_,_.return);break;case 1:Qr(_,_.return);var S=_.stateNode;if(typeof S.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(P){Ae(r,n,P)}}break;case 5:Qr(_,_.return);break;case 22:if(_.memoizedState!==null){Em(p);continue}}C!==null?(C.return=_,$=C):Em(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Zp("display",o))}catch(P){Ae(t,t.return,P)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){Ae(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ft(e,t),Kt(t),r&4&&_m(t);break;case 21:break;default:Ft(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Iy(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gi(s,""),r.flags&=-33);var i=xm(t);cc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=xm(t);uc(t,u,o);break;default:throw Error(z(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aw(t,e,n){$=t,Sy(t)}function Sy(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bo;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||st;u=bo;var h=st;if(bo=o,(st=c)&&!h)for($=s;$!==null;)o=$,c=o.child,o.tag===22&&o.memoizedState!==null?Tm(s):c!==null?(c.return=o,$=c):Tm(s);for(;i!==null;)$=i,Sy(i),i=i.sibling;$=s,bo=u,st=h}wm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):wm(t)}}function wm(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||Ja(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&im(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}im(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&_i(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}st||e.flags&512&&lc(e)}catch(_){Ae(e,e.return,_)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Em(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Tm(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ja(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ae(e,s,c)}}var i=e.return;try{lc(e)}catch(c){Ae(e,i,c)}break;case 5:var o=e.return;try{lc(e)}catch(c){Ae(e,o,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){$=null;break}var u=e.sibling;if(u!==null){u.return=e.return,$=u;break}$=e.return}}var lw=Math.ceil,Ia=vn.ReactCurrentDispatcher,wd=vn.ReactCurrentOwner,Dt=vn.ReactCurrentBatchConfig,ue=0,Be=null,Ve=null,We=0,Tt=0,Wr=Yn(0),Fe=0,ki=null,yr=0,Za=0,Ed=0,ui=null,pt=null,Td=0,us=1/0,on=null,Ca=!1,dc=null,Ln=null,Do=!1,Sn=null,ja=0,ci=0,hc=null,Xo=-1,Jo=0;function ct(){return ue&6?ke():Xo!==-1?Xo:Xo=ke()}function Mn(t){return t.mode&1?ue&2&&We!==0?We&-We:H_.transition!==null?(Jo===0&&(Jo=hg()),Jo):(t=fe,t!==0||(t=window.event,t=t===void 0?16:xg(t.type)),t):1}function $t(t,e,n,r){if(50<ci)throw ci=0,hc=null,Error(z(185));qi(t,n,r),(!(ue&2)||t!==Be)&&(t===Be&&(!(ue&2)&&(Za|=n),Fe===4&&Cn(t,We)),_t(t,r),n===1&&ue===0&&!(e.mode&1)&&(us=ke()+500,Ga&&Xn()))}function _t(t,e){var n=t.callbackNode;Hx(t,e);var r=ca(t,t===Be?We:0);if(r===0)n!==null&&Rf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rf(n),e===1)t.tag===0?$_(Nm.bind(null,t)):Og(Nm.bind(null,t)),U_(function(){!(ue&6)&&Xn()}),n=null;else{switch(fg(r)){case 1:n=Gc;break;case 4:n=cg;break;case 16:n=ua;break;case 536870912:n=dg;break;default:n=ua}n=Ly(n,Ay.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ay(t,e){if(Xo=-1,Jo=0,ue&6)throw Error(z(327));var n=t.callbackNode;if(Zr()&&t.callbackNode!==n)return null;var r=ca(t,t===Be?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sa(t,r);else{e=r;var s=ue;ue|=2;var i=ky();(Be!==t||We!==e)&&(on=null,us=ke()+500,cr(t,e));do try{dw();break}catch(u){Py(t,u)}while(!0);ld(),Ia.current=i,ue=s,Ve!==null?e=0:(Be=null,We=0,e=Fe)}if(e!==0){if(e===2&&(s=Fu(t),s!==0&&(r=s,e=fc(t,s))),e===1)throw n=ki,cr(t,0),Cn(t,r),_t(t,ke()),n;if(e===6)Cn(t,r);else{if(s=t.current.alternate,!(r&30)&&!uw(s)&&(e=Sa(t,r),e===2&&(i=Fu(t),i!==0&&(r=i,e=fc(t,i))),e===1))throw n=ki,cr(t,0),Cn(t,r),_t(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:sr(t,pt,on);break;case 3:if(Cn(t,r),(r&130023424)===r&&(e=Td+500-ke(),10<e)){if(ca(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wu(sr.bind(null,t,pt,on),e);break}sr(t,pt,on);break;case 4:if(Cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-qt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lw(r/1960))-r,10<r){t.timeoutHandle=Wu(sr.bind(null,t,pt,on),r);break}sr(t,pt,on);break;case 5:sr(t,pt,on);break;default:throw Error(z(329))}}}return _t(t,ke()),t.callbackNode===n?Ay.bind(null,t):null}function fc(t,e){var n=ui;return t.current.memoizedState.isDehydrated&&(cr(t,e).flags|=256),t=Sa(t,e),t!==2&&(e=pt,pt=n,e!==null&&mc(e)),t}function mc(t){pt===null?pt=t:pt.push.apply(pt,t)}function uw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~Ed,e&=~Za,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qt(e),r=1<<n;t[n]=-1,e&=~r}}function Nm(t){if(ue&6)throw Error(z(327));Zr();var e=ca(t,0);if(!(e&1))return _t(t,ke()),null;var n=Sa(t,e);if(t.tag!==0&&n===2){var r=Fu(t);r!==0&&(e=r,n=fc(t,r))}if(n===1)throw n=ki,cr(t,0),Cn(t,e),_t(t,ke()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sr(t,pt,on),_t(t,ke()),null}function Nd(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(us=ke()+500,Ga&&Xn())}}function vr(t){Sn!==null&&Sn.tag===0&&!(ue&6)&&Zr();var e=ue;ue|=1;var n=Dt.transition,r=fe;try{if(Dt.transition=null,fe=1,t)return t()}finally{fe=r,Dt.transition=n,ue=e,!(ue&6)&&Xn()}}function Id(){Tt=Wr.current,Ee(Wr)}function cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,F_(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(id(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pa();break;case 3:as(),Ee(vt),Ee(ot),md();break;case 5:fd(r);break;case 4:as();break;case 13:Ee(Ne);break;case 19:Ee(Ne);break;case 10:ud(r.type._context);break;case 22:case 23:Id()}n=n.return}if(Be=t,Ve=t=On(t.current,null),We=Tt=e,Fe=0,ki=null,Ed=Za=yr=0,pt=ui=null,ar!==null){for(e=0;e<ar.length;e++)if(n=ar[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ar=null}return t}function Py(t,e){do{var n=Ve;try{if(ld(),Ko.current=Na,Ta){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ta=!1}if(gr=0,ze=Oe=Ie=null,ai=!1,Si=0,wd.current=null,n===null||n.return===null){Fe=1,ki=e,Ve=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=We,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=dm(o);if(C!==null){C.flags&=-257,hm(C,o,u,i,e),C.mode&1&&cm(i,h,e),e=C,c=h;var S=e.updateQueue;if(S===null){var P=new Set;P.add(c),e.updateQueue=P}else S.add(c);break e}else{if(!(e&1)){cm(i,h,e),Cd();break e}c=Error(z(426))}}else if(Te&&u.mode&1){var D=dm(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),hm(D,o,u,i,e),od(ls(c,u));break e}}i=c=ls(c,u),Fe!==4&&(Fe=2),ui===null?ui=[i]:ui.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=fy(i,c,e);sm(i,I);break e;case 1:u=c;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ln===null||!Ln.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=my(i,u,e);sm(i,b);break e}}i=i.return}while(i!==null)}Vy(n)}catch(R){e=R,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function ky(){var t=Ia.current;return Ia.current=Na,t===null?Na:t}function Cd(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),Be===null||!(yr&268435455)&&!(Za&268435455)||Cn(Be,We)}function Sa(t,e){var n=ue;ue|=2;var r=ky();(Be!==t||We!==e)&&(on=null,cr(t,e));do try{cw();break}catch(s){Py(t,s)}while(!0);if(ld(),ue=n,Ia.current=r,Ve!==null)throw Error(z(261));return Be=null,We=0,Fe}function cw(){for(;Ve!==null;)Ry(Ve)}function dw(){for(;Ve!==null&&!Lx();)Ry(Ve)}function Ry(t){var e=Dy(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?Vy(t):Ve=e,wd.current=null}function Vy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sw(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Ve=null;return}}else if(n=rw(n,e,Tt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Fe===0&&(Fe=5)}function sr(t,e,n){var r=fe,s=Dt.transition;try{Dt.transition=null,fe=1,hw(t,e,n,r)}finally{Dt.transition=s,fe=r}return null}function hw(t,e,n,r){do Zr();while(Sn!==null);if(ue&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Qx(t,i),t===Be&&(Ve=Be=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Do||(Do=!0,Ly(ua,function(){return Zr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var o=fe;fe=1;var u=ue;ue|=4,wd.current=null,ow(t,n),jy(n,t),R_(Hu),da=!!$u,Hu=$u=null,t.current=n,aw(n),Mx(),ue=u,fe=o,Dt.transition=i}else t.current=n;if(Do&&(Do=!1,Sn=t,ja=s),i=t.pendingLanes,i===0&&(Ln=null),Ux(n.stateNode),_t(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ca)throw Ca=!1,t=dc,dc=null,t;return ja&1&&t.tag!==0&&Zr(),i=t.pendingLanes,i&1?t===hc?ci++:(ci=0,hc=t):ci=0,Xn(),null}function Zr(){if(Sn!==null){var t=fg(ja),e=Dt.transition,n=fe;try{if(Dt.transition=null,fe=16>t?16:t,Sn===null)var r=!1;else{if(t=Sn,Sn=null,ja=0,ue&6)throw Error(z(331));var s=ue;for(ue|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for($=h;$!==null;){var m=$;switch(m.tag){case 0:case 11:case 15:li(8,m,i)}var p=m.child;if(p!==null)p.return=m,$=p;else for(;$!==null;){m=$;var _=m.sibling,C=m.return;if(Ny(m),m===h){$=null;break}if(_!==null){_.return=C,$=_;break}$=C}}}var S=i.alternate;if(S!==null){var P=S.child;if(P!==null){S.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:li(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,$=I;break e}$=i.return}}var w=t.current;for($=w;$!==null;){o=$;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,$=T;else e:for(o=w;$!==null;){if(u=$,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ja(9,u)}}catch(R){Ae(u,u.return,R)}if(u===o){$=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,$=b;break e}$=u.return}}if(ue=s,Xn(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot($a,t)}catch{}r=!0}return r}finally{fe=n,Dt.transition=e}}return!1}function Im(t,e,n){e=ls(n,e),e=fy(t,e,1),t=Dn(t,e,1),e=ct(),t!==null&&(qi(t,1,e),_t(t,e))}function Ae(t,e,n){if(t.tag===3)Im(t,t,n);else for(;e!==null;){if(e.tag===3){Im(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){t=ls(n,t),t=my(e,t,1),e=Dn(e,t,1),t=ct(),e!==null&&(qi(e,1,t),_t(e,t));break}}e=e.return}}function fw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(We&n)===n&&(Fe===4||Fe===3&&(We&130023424)===We&&500>ke()-Td?cr(t,0):Ed|=n),_t(t,e)}function by(t,e){e===0&&(t.mode&1?(e=Io,Io<<=1,!(Io&130023424)&&(Io=4194304)):e=1);var n=ct();t=fn(t,e),t!==null&&(qi(t,e,n),_t(t,n))}function mw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),by(t,n)}function pw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),by(t,n)}var Dy;Dy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yt=!1,nw(t,e,n);yt=!!(t.flags&131072)}else yt=!1,Te&&e.flags&1048576&&Fg(e,va,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yo(t,e),t=e.pendingProps;var s=ss(e,ot.current);Jr(e,n),s=gd(null,e,r,t,s,n);var i=yd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,ga(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dd(e),s.updater=Xa,e.stateNode=s,s._reactInternals=e,ec(e,r,t,n),e=rc(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&sd(e),ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yw(r),t=Ut(r,t),s){case 0:e=nc(null,e,r,t,n);break e;case 1:e=pm(null,e,r,t,n);break e;case 11:e=fm(null,e,r,t,n);break e;case 14:e=mm(null,e,r,Ut(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),nc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),pm(t,e,r,s,n);case 3:e:{if(vy(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Hg(t,e),wa(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ls(Error(z(423)),e),e=gm(t,e,r,n,s);break e}else if(r!==s){s=ls(Error(z(424)),e),e=gm(t,e,r,n,s);break e}else for(Nt=bn(e.stateNode.containerInfo.firstChild),Ct=e,Te=!0,Bt=null,n=qg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(is(),r===s){e=mn(t,e,n);break e}ut(t,e,r,n)}e=e.child}return e;case 5:return Qg(e),t===null&&Xu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qu(r,s)?o=null:i!==null&&Qu(r,i)&&(e.flags|=32),yy(t,e),ut(t,e,o,n),e.child;case 6:return t===null&&Xu(e),null;case 13:return xy(t,e,n);case 4:return hd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=os(e,null,r,n):ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),fm(t,e,r,s,n);case 7:return ut(t,e,e.pendingProps,n),e.child;case 8:return ut(t,e,e.pendingProps.children,n),e.child;case 12:return ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(xa,r._currentValue),r._currentValue=o,i!==null)if(Qt(i.value,o)){if(i.children===s.children&&!vt.current){e=mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=cn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ju(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ju(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jr(e,n),s=Lt(s),r=r(s),e.flags|=1,ut(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),mm(t,e,r,s,n);case 15:return py(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Yo(t,e),e.tag=1,xt(r)?(t=!0,ga(e)):t=!1,Jr(e,n),hy(e,r,s),ec(e,r,s,n),rc(null,e,r,!0,t,n);case 19:return _y(t,e,n);case 22:return gy(t,e,n)}throw Error(z(156,e.tag))};function Ly(t,e){return ug(t,e)}function gw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,r){return new gw(t,e,n,r)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yw(t){if(typeof t=="function")return jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qc)return 11;if(t===Wc)return 14}return 2}function On(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mr:return dr(n.children,s,i,e);case Hc:o=8,s|=8;break;case Nu:return t=bt(12,n,e,s|2),t.elementType=Nu,t.lanes=i,t;case Iu:return t=bt(13,n,e,s),t.elementType=Iu,t.lanes=i,t;case Cu:return t=bt(19,n,e,s),t.elementType=Cu,t.lanes=i,t;case Qp:return el(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $p:o=10;break e;case Hp:o=9;break e;case Qc:o=11;break e;case Wc:o=14;break e;case Tn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=bt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function dr(t,e,n,r){return t=bt(7,t,r,e),t.lanes=n,t}function el(t,e,n,r){return t=bt(22,t,r,e),t.elementType=Qp,t.lanes=n,t.stateNode={isHidden:!1},t}function hu(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function fu(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sd(t,e,n,r,s,i,o,u,c){return t=new vw(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dd(i),t}function xw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function My(t){if(!t)return Hn;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(xt(n))return Mg(t,n,e)}return e}function Oy(t,e,n,r,s,i,o,u,c){return t=Sd(n,r,!0,t,s,i,o,u,c),t.context=My(null),n=t.current,r=ct(),s=Mn(n),i=cn(r,s),i.callback=e??null,Dn(n,i,s),t.current.lanes=s,qi(t,s,r),_t(t,r),t}function tl(t,e,n,r){var s=e.current,i=ct(),o=Mn(s);return n=My(n),e.context===null?e.context=n:e.pendingContext=n,e=cn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dn(s,e,o),t!==null&&($t(t,s,o,i),Wo(t,s,o)),o}function Aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ad(t,e){Cm(t,e),(t=t.alternate)&&Cm(t,e)}function _w(){return null}var Fy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pd(t){this._internalRoot=t}nl.prototype.render=Pd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));tl(t,e,null,null)};nl.prototype.unmount=Pd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vr(function(){tl(null,t,null,null)}),e[hn]=null}};function nl(t){this._internalRoot=t}nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=gg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<In.length&&e!==0&&e<In[n].priority;n++);In.splice(n,0,t),n===0&&vg(t)}};function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jm(){}function ww(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Aa(o);i.call(h)}}var o=Oy(e,r,t,0,null,!1,!1,"",jm);return t._reactRootContainer=o,t[hn]=o.current,Ti(t.nodeType===8?t.parentNode:t),vr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Aa(c);u.call(h)}}var c=Sd(t,0,!1,null,null,!1,!1,"",jm);return t._reactRootContainer=c,t[hn]=c.current,Ti(t.nodeType===8?t.parentNode:t),vr(function(){tl(e,c,n,r)}),c}function sl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Aa(o);u.call(c)}}tl(e,o,t,s)}else o=ww(n,e,t,s,r);return Aa(o)}mg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ys(e.pendingLanes);n!==0&&(Yc(e,n|1),_t(e,ke()),!(ue&6)&&(us=ke()+500,Xn()))}break;case 13:vr(function(){var r=fn(t,1);if(r!==null){var s=ct();$t(r,t,1,s)}}),Ad(t,1)}};Xc=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=ct();$t(e,t,134217728,n)}Ad(t,134217728)}};pg=function(t){if(t.tag===13){var e=Mn(t),n=fn(t,e);if(n!==null){var r=ct();$t(n,t,e,r)}Ad(t,e)}};gg=function(){return fe};yg=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Lu=function(t,e,n){switch(e){case"input":if(Au(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ka(r);if(!s)throw Error(z(90));Kp(r),Au(r,s)}}}break;case"textarea":Yp(t,n);break;case"select":e=n.value,e!=null&&Kr(t,!!n.multiple,e,!1)}};rg=Nd;sg=vr;var Ew={usingClientEntryPoint:!1,Events:[Hi,zr,Ka,tg,ng,Nd]},Qs={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tw={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ag(t),t===null?null:t.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||_w,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{$a=Lo.inject(Tw),Xt=Lo}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ew;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(e))throw Error(z(200));return xw(t,e,null,n)};At.createRoot=function(t,e){if(!kd(t))throw Error(z(299));var n=!1,r="",s=Fy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sd(t,1,!1,null,null,n,!1,r,s),t[hn]=e.current,Ti(t.nodeType===8?t.parentNode:t),new Pd(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=ag(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return vr(t)};At.hydrate=function(t,e,n){if(!rl(e))throw Error(z(200));return sl(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!kd(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Fy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Oy(e,null,t,1,n??null,s,!1,i,o),t[hn]=e.current,Ti(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nl(e)};At.render=function(t,e,n){if(!rl(e))throw Error(z(200));return sl(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!rl(t))throw Error(z(40));return t._reactRootContainer?(vr(function(){sl(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1};At.unstable_batchedUpdates=Nd;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rl(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return sl(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Uy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uy)}catch(t){console.error(t)}}Uy(),Up.exports=At;var Nw=Up.exports,Sm=Nw;Eu.createRoot=Sm.createRoot,Eu.hydrateRoot=Sm.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Iw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(t,e)=>{const n=W.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>W.createElement("svg",{ref:m,...Iw,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Cw(t)}`,u].join(" "),...h},[...e.map(([p,_])=>W.createElement(p,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=ve("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=ve("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ve("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=ve("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ve("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=ve("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Am={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Dw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let _=(u&15)<<2|h>>6,C=h&63;c||(C=64,o||(_=64)),r.push(n[m],n[p],n[_],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new Lw;const _=i<<2|u>>4;if(r.push(_),h!==64){const C=u<<4&240|h>>2;if(r.push(C),p!==64){const S=h<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mw=function(t){const e=Hy(t);return Qy.encodeByteArray(e,!0)},Ra=function(t){return Mw(t).replace(/\./g,"")},Ow=function(t){try{return Qy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=()=>Fw().__FIREBASE_DEFAULTS__,zw=()=>{if(typeof process>"u"||typeof Am>"u")return;const t=Am.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Bw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ow(t[1]);return e&&JSON.parse(e)},Dd=()=>{try{return Uw()||zw()||Bw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qw=t=>{var e,n;return(n=(e=Dd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$w=t=>{const e=qw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wy=()=>{var t;return(t=Dd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ra(JSON.stringify(n)),Ra(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kw(){var t;const e=(t=Dd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gw(){return!Kw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function Xw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="FirebaseError";class ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Jw,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ky.prototype.create)}}class Ky{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Zw(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new ws(s,u,r)}}function Zw(t,e){return t.replace(eE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const eE=/\{\$([^}]+)}/g;function pc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Pm(i)&&Pm(o)){if(!pc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Hw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rE(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nE(t){return t===ir?void 0:t}function rE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const iE={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},oE=le.INFO,aE={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},lE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=aE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gy{constructor(e){this.name=e,this._logLevel=oE,this._logHandler=lE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const uE=(t,e)=>e.some(n=>t instanceof n);let km,Rm;function cE(){return km||(km=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dE(){return Rm||(Rm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yy=new WeakMap,gc=new WeakMap,Xy=new WeakMap,mu=new WeakMap,Ld=new WeakMap;function hE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Un(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yy.set(n,t)}).catch(()=>{}),Ld.set(e,t),e}function fE(t){if(gc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gc.set(t,e)}let yc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mE(t){yc=t(yc)}function pE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pu(this),e,...n);return Xy.set(r,e.sort?e.sort():[e]),Un(r)}:dE().includes(t)?function(...e){return t.apply(pu(this),e),Un(Yy.get(this))}:function(...e){return Un(t.apply(pu(this),e))}}function gE(t){return typeof t=="function"?pE(t):(t instanceof IDBTransaction&&fE(t),uE(t,cE())?new Proxy(t,yc):t)}function Un(t){if(t instanceof IDBRequest)return hE(t);if(mu.has(t))return mu.get(t);const e=gE(t);return e!==t&&(mu.set(t,e),Ld.set(e,t)),e}const pu=t=>Ld.get(t);function yE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Un(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Un(o.result),c.oldVersion,c.newVersion,Un(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const vE=["get","getKey","getAll","getAllKeys","count"],xE=["put","add","delete","clear"],gu=new Map;function Vm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gu.get(e))return gu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vE.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return gu.set(e,i),i}mE(t=>({...t,get:(e,n,r)=>Vm(e,n)||t.get(e,n,r),has:(e,n)=>!!Vm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vc="@firebase/app",bm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Gy("@firebase/app"),EE="@firebase/app-compat",TE="@firebase/analytics-compat",NE="@firebase/analytics",IE="@firebase/app-check-compat",CE="@firebase/app-check",jE="@firebase/auth",SE="@firebase/auth-compat",AE="@firebase/database",PE="@firebase/data-connect",kE="@firebase/database-compat",RE="@firebase/functions",VE="@firebase/functions-compat",bE="@firebase/installations",DE="@firebase/installations-compat",LE="@firebase/messaging",ME="@firebase/messaging-compat",OE="@firebase/performance",FE="@firebase/performance-compat",UE="@firebase/remote-config",zE="@firebase/remote-config-compat",BE="@firebase/storage",qE="@firebase/storage-compat",$E="@firebase/firestore",HE="@firebase/vertexai-preview",QE="@firebase/firestore-compat",WE="firebase",KE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="[DEFAULT]",GE={[vc]:"fire-core",[EE]:"fire-core-compat",[NE]:"fire-analytics",[TE]:"fire-analytics-compat",[CE]:"fire-app-check",[IE]:"fire-app-check-compat",[jE]:"fire-auth",[SE]:"fire-auth-compat",[AE]:"fire-rtdb",[PE]:"fire-data-connect",[kE]:"fire-rtdb-compat",[RE]:"fire-fn",[VE]:"fire-fn-compat",[bE]:"fire-iid",[DE]:"fire-iid-compat",[LE]:"fire-fcm",[ME]:"fire-fcm-compat",[OE]:"fire-perf",[FE]:"fire-perf-compat",[UE]:"fire-rc",[zE]:"fire-rc-compat",[BE]:"fire-gcs",[qE]:"fire-gcs-compat",[$E]:"fire-fst",[QE]:"fire-fst-compat",[HE]:"fire-vertex","fire-js":"fire-js",[WE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new Map,YE=new Map,_c=new Map;function Dm(t,e){try{t.container.addComponent(e)}catch(n){pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ba(t){const e=t.name;if(_c.has(e))return pn.debug(`There were multiple attempts to register component ${e}.`),!1;_c.set(e,t);for(const n of Va.values())Dm(n,t);for(const n of YE.values())Dm(n,t);return!0}function XE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new Ky("app","Firebase",JE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=KE;function Jy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zn.create("bad-app-name",{appName:String(s)});if(n||(n=Wy()),!n)throw zn.create("no-options");const i=Va.get(s);if(i){if(pc(n,i.options)&&pc(r,i.config))return i;throw zn.create("duplicate-app",{appName:s})}const o=new sE(s);for(const c of _c.values())o.addComponent(c);const u=new ZE(n,r,o);return Va.set(s,u),u}function t1(t=xc){const e=Va.get(t);if(!e&&t===xc&&Wy())return Jy();if(!e)throw zn.create("no-app",{appName:t});return e}function ts(t,e,n){var r;let s=(r=GE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pn.warn(u.join(" "));return}ba(new Vi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="firebase-heartbeat-database",r1=1,bi="firebase-heartbeat-store";let yu=null;function Zy(){return yu||(yu=yE(n1,r1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bi)}catch(n){console.warn(n)}}}}).catch(t=>{throw zn.create("idb-open",{originalErrorMessage:t.message})})),yu}async function s1(t){try{const n=(await Zy()).transaction(bi),r=await n.objectStore(bi).get(ev(t));return await n.done,r}catch(e){if(e instanceof ws)pn.warn(e.message);else{const n=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pn.warn(n.message)}}}async function Lm(t,e){try{const r=(await Zy()).transaction(bi,"readwrite");await r.objectStore(bi).put(e,ev(t)),await r.done}catch(n){if(n instanceof ws)pn.warn(n.message);else{const r=zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pn.warn(r.message)}}}function ev(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=1024,o1=30*24*60*60*1e3;class a1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Mm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=o1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mm(),{heartbeatsToSend:r,unsentEntries:s}=l1(this._heartbeatsCache.heartbeats),i=Ra(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return pn.warn(n),""}}}function Mm(){return new Date().toISOString().substring(0,10)}function l1(t,e=i1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Om(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Om(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class u1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?Xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Om(t){return Ra(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){ba(new Vi("platform-logger",e=>new _E(e),"PRIVATE")),ba(new Vi("heartbeat",e=>new a1(e),"PRIVATE")),ts(vc,bm,t),ts(vc,bm,"esm2017"),ts("fire-js","")}c1("");var Fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,tv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function E(){}E.prototype=y.prototype,x.D=y.prototype,x.prototype=new E,x.prototype.constructor=x,x.C=function(N,j,A){for(var v=Array(arguments.length-2),G=2;G<arguments.length;G++)v[G-2]=arguments[G];return y.prototype[j].apply(N,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,E){E||(E=0);var N=Array(16);if(typeof y=="string")for(var j=0;16>j;++j)N[j]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(j=0;16>j;++j)N[j]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=x.g[0],E=x.g[1],j=x.g[2];var A=x.g[3],v=y+(A^E&(j^A))+N[0]+3614090360&4294967295;y=E+(v<<7&4294967295|v>>>25),v=A+(j^y&(E^j))+N[1]+3905402710&4294967295,A=y+(v<<12&4294967295|v>>>20),v=j+(E^A&(y^E))+N[2]+606105819&4294967295,j=A+(v<<17&4294967295|v>>>15),v=E+(y^j&(A^y))+N[3]+3250441966&4294967295,E=j+(v<<22&4294967295|v>>>10),v=y+(A^E&(j^A))+N[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(j^y&(E^j))+N[5]+1200080426&4294967295,A=y+(v<<12&4294967295|v>>>20),v=j+(E^A&(y^E))+N[6]+2821735955&4294967295,j=A+(v<<17&4294967295|v>>>15),v=E+(y^j&(A^y))+N[7]+4249261313&4294967295,E=j+(v<<22&4294967295|v>>>10),v=y+(A^E&(j^A))+N[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(j^y&(E^j))+N[9]+2336552879&4294967295,A=y+(v<<12&4294967295|v>>>20),v=j+(E^A&(y^E))+N[10]+4294925233&4294967295,j=A+(v<<17&4294967295|v>>>15),v=E+(y^j&(A^y))+N[11]+2304563134&4294967295,E=j+(v<<22&4294967295|v>>>10),v=y+(A^E&(j^A))+N[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=A+(j^y&(E^j))+N[13]+4254626195&4294967295,A=y+(v<<12&4294967295|v>>>20),v=j+(E^A&(y^E))+N[14]+2792965006&4294967295,j=A+(v<<17&4294967295|v>>>15),v=E+(y^j&(A^y))+N[15]+1236535329&4294967295,E=j+(v<<22&4294967295|v>>>10),v=y+(j^A&(E^j))+N[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^j&(y^E))+N[6]+3225465664&4294967295,A=y+(v<<9&4294967295|v>>>23),v=j+(y^E&(A^y))+N[11]+643717713&4294967295,j=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(j^A))+N[0]+3921069994&4294967295,E=j+(v<<20&4294967295|v>>>12),v=y+(j^A&(E^j))+N[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^j&(y^E))+N[10]+38016083&4294967295,A=y+(v<<9&4294967295|v>>>23),v=j+(y^E&(A^y))+N[15]+3634488961&4294967295,j=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(j^A))+N[4]+3889429448&4294967295,E=j+(v<<20&4294967295|v>>>12),v=y+(j^A&(E^j))+N[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^j&(y^E))+N[14]+3275163606&4294967295,A=y+(v<<9&4294967295|v>>>23),v=j+(y^E&(A^y))+N[3]+4107603335&4294967295,j=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(j^A))+N[8]+1163531501&4294967295,E=j+(v<<20&4294967295|v>>>12),v=y+(j^A&(E^j))+N[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=A+(E^j&(y^E))+N[2]+4243563512&4294967295,A=y+(v<<9&4294967295|v>>>23),v=j+(y^E&(A^y))+N[7]+1735328473&4294967295,j=A+(v<<14&4294967295|v>>>18),v=E+(A^y&(j^A))+N[12]+2368359562&4294967295,E=j+(v<<20&4294967295|v>>>12),v=y+(E^j^A)+N[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^j)+N[8]+2272392833&4294967295,A=y+(v<<11&4294967295|v>>>21),v=j+(A^y^E)+N[11]+1839030562&4294967295,j=A+(v<<16&4294967295|v>>>16),v=E+(j^A^y)+N[14]+4259657740&4294967295,E=j+(v<<23&4294967295|v>>>9),v=y+(E^j^A)+N[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^j)+N[4]+1272893353&4294967295,A=y+(v<<11&4294967295|v>>>21),v=j+(A^y^E)+N[7]+4139469664&4294967295,j=A+(v<<16&4294967295|v>>>16),v=E+(j^A^y)+N[10]+3200236656&4294967295,E=j+(v<<23&4294967295|v>>>9),v=y+(E^j^A)+N[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^j)+N[0]+3936430074&4294967295,A=y+(v<<11&4294967295|v>>>21),v=j+(A^y^E)+N[3]+3572445317&4294967295,j=A+(v<<16&4294967295|v>>>16),v=E+(j^A^y)+N[6]+76029189&4294967295,E=j+(v<<23&4294967295|v>>>9),v=y+(E^j^A)+N[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=A+(y^E^j)+N[12]+3873151461&4294967295,A=y+(v<<11&4294967295|v>>>21),v=j+(A^y^E)+N[15]+530742520&4294967295,j=A+(v<<16&4294967295|v>>>16),v=E+(j^A^y)+N[2]+3299628645&4294967295,E=j+(v<<23&4294967295|v>>>9),v=y+(j^(E|~A))+N[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~j))+N[7]+1126891415&4294967295,A=y+(v<<10&4294967295|v>>>22),v=j+(y^(A|~E))+N[14]+2878612391&4294967295,j=A+(v<<15&4294967295|v>>>17),v=E+(A^(j|~y))+N[5]+4237533241&4294967295,E=j+(v<<21&4294967295|v>>>11),v=y+(j^(E|~A))+N[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~j))+N[3]+2399980690&4294967295,A=y+(v<<10&4294967295|v>>>22),v=j+(y^(A|~E))+N[10]+4293915773&4294967295,j=A+(v<<15&4294967295|v>>>17),v=E+(A^(j|~y))+N[1]+2240044497&4294967295,E=j+(v<<21&4294967295|v>>>11),v=y+(j^(E|~A))+N[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~j))+N[15]+4264355552&4294967295,A=y+(v<<10&4294967295|v>>>22),v=j+(y^(A|~E))+N[6]+2734768916&4294967295,j=A+(v<<15&4294967295|v>>>17),v=E+(A^(j|~y))+N[13]+1309151649&4294967295,E=j+(v<<21&4294967295|v>>>11),v=y+(j^(E|~A))+N[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=A+(E^(y|~j))+N[11]+3174756917&4294967295,A=y+(v<<10&4294967295|v>>>22),v=j+(y^(A|~E))+N[2]+718787259&4294967295,j=A+(v<<15&4294967295|v>>>17),v=E+(A^(j|~y))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(j+(v<<21&4294967295|v>>>11))&4294967295,x.g[2]=x.g[2]+j&4294967295,x.g[3]=x.g[3]+A&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var E=y-this.blockSize,N=this.B,j=this.h,A=0;A<y;){if(j==0)for(;A<=E;)s(this,x,A),A+=this.blockSize;if(typeof x=="string"){for(;A<y;)if(N[j++]=x.charCodeAt(A++),j==this.blockSize){s(this,N),j=0;break}}else for(;A<y;)if(N[j++]=x[A++],j==this.blockSize){s(this,N),j=0;break}}this.h=j,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var E=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=E&255,E/=256;for(this.u(x),x=Array(16),y=E=0;4>y;++y)for(var N=0;32>N;N+=8)x[E++]=this.g[y]>>>N&255;return x};function i(x,y){var E=u;return Object.prototype.hasOwnProperty.call(E,x)?E[x]:E[x]=y(x)}function o(x,y){this.h=y;for(var E=[],N=!0,j=x.length-1;0<=j;j--){var A=x[j]|0;N&&A==y||(E[j]=A,N=!1)}this.g=E}var u={};function c(x){return-128<=x&&128>x?i(x,function(y){return new o([y|0],0>y?-1:0)}):new o([x|0],0>x?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return p;if(0>x)return D(h(-x));for(var y=[],E=1,N=0;x>=E;N++)y[N]=x/E|0,E*=4294967296;return new o(y,0)}function m(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return D(m(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(y,8)),N=p,j=0;j<x.length;j+=8){var A=Math.min(8,x.length-j),v=parseInt(x.substring(j,j+A),y);8>A?(A=h(Math.pow(y,A)),N=N.j(A).add(h(v))):(N=N.j(E),N=N.add(h(v)))}return N}var p=c(0),_=c(1),C=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-D(this).m();for(var x=0,y=1,E=0;E<this.g.length;E++){var N=this.i(E);x+=(0<=N?N:4294967296+N)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S(this))return"0";if(P(this))return"-"+D(this).toString(x);for(var y=h(Math.pow(x,6)),E=this,N="";;){var j=b(E,y).g;E=I(E,j.j(y));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(x);if(E=j,S(E))return A+N;for(;6>A.length;)A="0"+A;N=A+N}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function S(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function P(x){return x.h==-1}t.l=function(x){return x=I(this,x),P(x)?-1:S(x)?0:1};function D(x){for(var y=x.g.length,E=[],N=0;N<y;N++)E[N]=~x.g[N];return new o(E,~x.h).add(_)}t.abs=function(){return P(this)?D(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],N=0,j=0;j<=y;j++){var A=N+(this.i(j)&65535)+(x.i(j)&65535),v=(A>>>16)+(this.i(j)>>>16)+(x.i(j)>>>16);N=v>>>16,A&=65535,v&=65535,E[j]=v<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(x,y){return x.add(D(y))}t.j=function(x){if(S(this)||S(x))return p;if(P(this))return P(x)?D(this).j(D(x)):D(D(this).j(x));if(P(x))return D(this.j(D(x)));if(0>this.l(C)&&0>x.l(C))return h(this.m()*x.m());for(var y=this.g.length+x.g.length,E=[],N=0;N<2*y;N++)E[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<x.g.length;j++){var A=this.i(N)>>>16,v=this.i(N)&65535,G=x.i(j)>>>16,ie=x.i(j)&65535;E[2*N+2*j]+=v*ie,w(E,2*N+2*j),E[2*N+2*j+1]+=A*ie,w(E,2*N+2*j+1),E[2*N+2*j+1]+=v*G,w(E,2*N+2*j+1),E[2*N+2*j+2]+=A*G,w(E,2*N+2*j+2)}for(N=0;N<y;N++)E[N]=E[2*N+1]<<16|E[2*N];for(N=y;N<2*y;N++)E[N]=0;return new o(E,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function T(x,y){this.g=x,this.h=y}function b(x,y){if(S(y))throw Error("division by zero");if(S(x))return new T(p,p);if(P(x))return y=b(D(x),y),new T(D(y.g),D(y.h));if(P(y))return y=b(x,D(y)),new T(D(y.g),y.h);if(30<x.g.length){if(P(x)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var E=_,N=y;0>=N.l(x);)E=R(E),N=R(N);var j=k(E,1),A=k(N,1);for(N=k(N,2),E=k(E,2);!S(N);){var v=A.add(N);0>=v.l(x)&&(j=j.add(E),A=v),N=k(N,1),E=k(E,1)}return y=I(x,j.j(y)),new T(j,y)}for(j=p;0<=x.l(y);){for(E=Math.max(1,Math.floor(x.m()/y.m())),N=Math.ceil(Math.log(E)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),A=h(E),v=A.j(y);P(v)||0<v.l(x);)E-=N,A=h(E),v=A.j(y);S(A)&&(A=_),j=j.add(A),x=I(x,v)}return new T(j,x)}t.A=function(x){return b(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)&x.i(N);return new o(E,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)|x.i(N);return new o(E,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)^x.i(N);return new o(E,this.h^x.h)};function R(x){for(var y=x.g.length+1,E=[],N=0;N<y;N++)E[N]=x.i(N)<<1|x.i(N-1)>>>31;return new o(E,x.h)}function k(x,y){var E=y>>5;y%=32;for(var N=x.g.length-E,j=[],A=0;A<N;A++)j[A]=0<y?x.i(A+E)>>>y|x.i(A+E+1)<<32-y:x.i(A+E);return new o(j,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,hr=o}).apply(typeof Fm<"u"?Fm:typeof self<"u"?self:typeof window<"u"?window:{});var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nv,Js,rv,ta,wc,sv,iv,ov;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mo=="object"&&Mo];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var V=a[g];if(!(V in f))break e;f=f[V]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,g=!1,V={next:function(){if(!g&&f<a.length){var L=f++;return{value:d(L,a[L]),done:!1}}return g=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function m(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,g),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,_.apply(null,arguments)}function C(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function S(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,V,L){for(var B=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)B[pe-2]=arguments[pe];return d.prototype[V].apply(g,B)}}function P(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function D(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const V=a.length||0,L=g.length||0;a.length=V+L;for(let B=0;B<L;B++)a[V+B]=g[B]}else a.push(g)}}class I{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var R=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function k(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function x(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(a,d){let f,g;for(let V=1;V<arguments.length;V++){g=arguments[V];for(f in g)a[f]=g[f];for(let L=0;L<E.length;L++)f=E[L],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function j(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function A(a){u.setTimeout(()=>{throw a},0)}function v(){var a=q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class G{constructor(){this.h=this.g=null}add(d,f){const g=ie.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ie=new I(()=>new oe,a=>a.reset());class oe{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let U,M=!1,q=new G,Y=()=>{const a=u.Promise.resolve(void 0);U=()=>{a.then(he)}};var he=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(f){A(f)}var d=ie;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}M=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function ft(a,d){if(K.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(R){e:{try{b(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Le[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ft.aa.h.call(this)}}S(ft,K);var Le={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),mt=0;function w0(a,d,f,g,V){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=V,this.key=++mt,this.da=this.fa=!1}function to(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function no(a){this.src=a,this.g={},this.h=0}no.prototype.add=function(a,d,f,g,V){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var B=_l(a,d,g,V);return-1<B?(d=a[B],f||(d.fa=!1)):(d=new w0(d,this.src,L,!!g,V),d.fa=f,a.push(d)),d};function xl(a,d){var f=d.type;if(f in a.g){var g=a.g[f],V=Array.prototype.indexOf.call(g,d,void 0),L;(L=0<=V)&&Array.prototype.splice.call(g,V,1),L&&(to(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _l(a,d,f,g){for(var V=0;V<a.length;++V){var L=a[V];if(!L.da&&L.listener==d&&L.capture==!!f&&L.ha==g)return V}return-1}var wl="closure_lm_"+(1e6*Math.random()|0),El={};function _h(a,d,f,g,V){if(Array.isArray(d)){for(var L=0;L<d.length;L++)_h(a,d[L],f,g,V);return null}return f=Th(f),a&&a[Me]?a.K(d,f,h(g)?!!g.capture:!1,V):E0(a,d,f,!1,g,V)}function E0(a,d,f,g,V,L){if(!d)throw Error("Invalid event type");var B=h(V)?!!V.capture:!!V,pe=Nl(a);if(pe||(a[wl]=pe=new no(a)),f=pe.add(d,f,g,B,L),f.proxy)return f;if(g=T0(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)ge||(V=B),V===void 0&&(V=!1),a.addEventListener(d.toString(),g,V);else if(a.attachEvent)a.attachEvent(Eh(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function T0(){function a(f){return d.call(a.src,a.listener,f)}const d=N0;return a}function wh(a,d,f,g,V){if(Array.isArray(d))for(var L=0;L<d.length;L++)wh(a,d[L],f,g,V);else g=h(g)?!!g.capture:!!g,f=Th(f),a&&a[Me]?(a=a.i,d=String(d).toString(),d in a.g&&(L=a.g[d],f=_l(L,f,g,V),-1<f&&(to(L[f]),Array.prototype.splice.call(L,f,1),L.length==0&&(delete a.g[d],a.h--)))):a&&(a=Nl(a))&&(d=a.g[d.toString()],a=-1,d&&(a=_l(d,f,g,V)),(f=-1<a?d[a]:null)&&Tl(f))}function Tl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Me])xl(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(Eh(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Nl(d))?(xl(f,a),f.h==0&&(f.src=null,d[wl]=null)):to(a)}}}function Eh(a){return a in El?El[a]:El[a]="on"+a}function N0(a,d){if(a.da)a=!0;else{d=new ft(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Tl(a),a=f.call(g,d)}return a}function Nl(a){return a=a[wl],a instanceof no?a:null}var Il="__closure_events_fn_"+(1e9*Math.random()>>>0);function Th(a){return typeof a=="function"?a:(a[Il]||(a[Il]=function(d){return a.handleEvent(d)}),a[Il])}function Xe(){ne.call(this),this.i=new no(this),this.M=this,this.F=null}S(Xe,ne),Xe.prototype[Me]=!0,Xe.prototype.removeEventListener=function(a,d,f,g){wh(this,a,d,f,g)};function at(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new K(d,a);else if(d instanceof K)d.target=d.target||a;else{var V=d;d=new K(g,a),N(d,V)}if(V=!0,f)for(var L=f.length-1;0<=L;L--){var B=d.g=f[L];V=ro(B,g,!0,d)&&V}if(B=d.g=a,V=ro(B,g,!0,d)&&V,V=ro(B,g,!1,d)&&V,f)for(L=0;L<f.length;L++)B=d.g=f[L],V=ro(B,g,!1,d)&&V}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)to(f[g]);delete a.g[d],a.h--}}this.F=null},Xe.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Xe.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function ro(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,L=0;L<d.length;++L){var B=d[L];if(B&&!B.da&&B.capture==f){var pe=B.listener,qe=B.ha||B.src;B.fa&&xl(a.i,B),V=pe.call(qe,g)!==!1&&V}}return V&&!g.defaultPrevented}function Nh(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function Ih(a){a.g=Nh(()=>{a.g=null,a.i&&(a.i=!1,Ih(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class I0 extends ne{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ih(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(a){ne.call(this),this.h=a,this.g={}}S(Cs,ne);var Ch=[];function jh(a){k(a.g,function(d,f){this.g.hasOwnProperty(f)&&Tl(d)},a),a.g={}}Cs.prototype.N=function(){Cs.aa.N.call(this),jh(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cl=u.JSON.stringify,C0=u.JSON.parse,j0=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function jl(){}jl.prototype.h=null;function Sh(a){return a.h||(a.h=a.i())}function Ah(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sl(){K.call(this,"d")}S(Sl,K);function Al(){K.call(this,"c")}S(Al,K);var Zn={},Ph=null;function so(){return Ph=Ph||new Xe}Zn.La="serverreachability";function kh(a){K.call(this,Zn.La,a)}S(kh,K);function Ss(a){const d=so();at(d,new kh(d))}Zn.STAT_EVENT="statevent";function Rh(a,d){K.call(this,Zn.STAT_EVENT,a),this.stat=d}S(Rh,K);function lt(a){const d=so();at(d,new Rh(d,a))}Zn.Ma="timingevent";function Vh(a,d){K.call(this,Zn.Ma,a),this.size=d}S(Vh,K);function As(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function Ps(){this.g=!0}Ps.prototype.xa=function(){this.g=!1};function S0(a,d,f,g,V,L){a.info(function(){if(a.g)if(L)for(var B="",pe=L.split("&"),qe=0;qe<pe.length;qe++){var ce=pe[qe].split("=");if(1<ce.length){var Je=ce[0];ce=ce[1];var Ze=Je.split("_");B=2<=Ze.length&&Ze[1]=="type"?B+(Je+"="+ce+"&"):B+(Je+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+g+") [attempt "+V+"]: "+d+`
`+f+`
`+B})}function A0(a,d,f,g,V,L,B){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+V+"]: "+d+`
`+f+`
`+L+" "+B})}function Sr(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+k0(a,f)+(g?" "+g:"")})}function P0(a,d){a.info(function(){return"TIMEOUT: "+d})}Ps.prototype.info=function(){};function k0(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var V=g[1];if(Array.isArray(V)&&!(1>V.length)){var L=V[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<V.length;B++)V[B]=""}}}}return Cl(f)}catch{return d}}var io={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pl;function oo(){}S(oo,jl),oo.prototype.g=function(){return new XMLHttpRequest},oo.prototype.i=function(){return{}},Pl=new oo;function xn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dh}function Dh(){this.i=null,this.g="",this.h=!1}var Lh={},kl={};function Rl(a,d,f){a.L=1,a.v=co(rn(d)),a.m=f,a.P=!0,Mh(a,null)}function Mh(a,d){a.F=Date.now(),ao(a),a.A=rn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Xh(f.i,"t",g),a.C=0,f=a.j.J,a.h=new Dh,a.g=gf(a.j,f?d:null,!a.m),0<a.O&&(a.M=new I0(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ch[0]=V.toString()),V=Ch);for(var L=0;L<V.length;L++){var B=_h(f,V[L],g||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ss(),S0(a.i,a.u,a.A,a.l,a.R,a.m)}xn.prototype.ca=function(a){a=a.target;const d=this.M;d&&sn(a)==3?d.j():this.Y(a)},xn.prototype.Y=function(a){try{if(a==this.g)e:{const Ze=sn(this.g);var d=this.g.Ba();const kr=this.g.Z();if(!(3>Ze)&&(Ze!=3||this.g&&(this.h.h||this.g.oa()||sf(this.g)))){this.J||Ze!=4||d==7||(d==8||0>=kr?Ss(3):Ss(2)),Vl(this);var f=this.g.Z();this.X=f;t:if(Oh(this)){var g=sf(this.g);a="";var V=g.length,L=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),ks(this);var B="";break t}this.h.i=new u.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(L&&d==V-1)});g.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,A0(this.i,this.u,this.A,this.l,this.R,Ze,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,qe=this.g;if((pe=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(pe)){var ce=pe;break t}}ce=null}if(f=ce)Sr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bl(this,f);else{this.o=!1,this.s=3,lt(12),er(this),ks(this);break e}}if(this.P){f=!0;let Ot;for(;!this.J&&this.C<B.length;)if(Ot=R0(this,B),Ot==kl){Ze==4&&(this.s=4,lt(14),f=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Lh){this.s=4,lt(15),Sr(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Sr(this.i,this.l,Ot,null),bl(this,Ot);if(Oh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||B.length!=0||this.h.h||(this.s=1,lt(16),f=!1),this.o=this.o&&f,!f)Sr(this.i,this.l,B,"[Invalid Chunked Response]"),er(this),ks(this);else if(0<B.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ul(Je),Je.M=!0,lt(11))}}else Sr(this.i,this.l,B,null),bl(this,B);Ze==4&&er(this),this.o&&!this.J&&(Ze==4?hf(this.j,this):(this.o=!1,ao(this)))}else G0(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),er(this),ks(this)}}}catch{}finally{}};function Oh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function R0(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?kl:(f=Number(d.substring(f,g)),isNaN(f)?Lh:(g+=1,g+f>d.length?kl:(d=d.slice(g,g+f),a.C=g+f,d)))}xn.prototype.cancel=function(){this.J=!0,er(this)};function ao(a){a.S=Date.now()+a.I,Fh(a,a.I)}function Fh(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=As(_(a.ba,a),d)}function Vl(a){a.B&&(u.clearTimeout(a.B),a.B=null)}xn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(P0(this.i,this.A),this.L!=2&&(Ss(),lt(17)),er(this),this.s=2,ks(this)):Fh(this,this.S-a)};function ks(a){a.j.G==0||a.J||hf(a.j,a)}function er(a){Vl(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,jh(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function bl(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Dl(f.h,a))){if(!a.K&&Dl(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var V=g;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)yo(f),po(f);else break e;Fl(f),lt(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=As(_(f.Za,f),6e3));if(1>=Bh(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else nr(f,11)}else if((a.K||f.g==a)&&yo(f),!w(d))for(V=f.Da.g.parse(d),d=0;d<V.length;d++){let ce=V[d];if(f.T=ce[0],ce=ce[1],f.G==2)if(ce[0]=="c"){f.K=ce[1],f.ia=ce[2];const Je=ce[3];Je!=null&&(f.la=Je,f.j.info("VER="+f.la));const Ze=ce[4];Ze!=null&&(f.Aa=Ze,f.j.info("SVER="+f.Aa));const kr=ce[5];kr!=null&&typeof kr=="number"&&0<kr&&(g=1.5*kr,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Ot=a.g;if(Ot){const xo=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var L=g.h;L.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ll(L,L.h),L.h=null))}if(g.D){const zl=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(g.ya=zl,xe(g.I,g.D,zl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var B=a;if(g.qa=pf(g,g.J?g.ia:null,g.W),B.K){qh(g.h,B);var pe=B,qe=g.L;qe&&(pe.I=qe),pe.B&&(Vl(pe),ao(pe)),g.g=B}else cf(g);0<f.i.length&&go(f)}else ce[0]!="stop"&&ce[0]!="close"||nr(f,7);else f.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?nr(f,7):Ol(f):ce[0]!="noop"&&f.l&&f.l.ta(ce),f.v=0)}}Ss(4)}catch{}}var V0=class{constructor(a,d){this.g=a,this.map=d}};function Uh(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Bh(a){return a.h?1:a.g?a.g.size:0}function Dl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Ll(a,d){a.g?a.g.add(d):a.h=d}function qh(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Uh.prototype.cancel=function(){if(this.i=$h(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function $h(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return P(a.i)}function b0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function D0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function Hh(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=D0(a),g=b0(a),V=g.length,L=0;L<V;L++)d.call(void 0,g[L],f&&f[L],a)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L0(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),V=null;if(0<=g){var L=a[f].substring(0,g);V=a[f].substring(g+1)}else L=a[f];d(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function tr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof tr){this.h=a.h,lo(this,a.j),this.o=a.o,this.g=a.g,uo(this,a.s),this.l=a.l;var d=a.i,f=new bs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Wh(this,f),this.m=a.m}else a&&(d=String(a).match(Qh))?(this.h=!1,lo(this,d[1]||"",!0),this.o=Rs(d[2]||""),this.g=Rs(d[3]||"",!0),uo(this,d[4]),this.l=Rs(d[5]||"",!0),Wh(this,d[6]||"",!0),this.m=Rs(d[7]||"")):(this.h=!1,this.i=new bs(null,this.h))}tr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Vs(d,Kh,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Vs(d,Kh,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Vs(f,f.charAt(0)=="/"?F0:O0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Vs(f,z0)),a.join("")};function rn(a){return new tr(a)}function lo(a,d,f){a.j=f?Rs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function uo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Wh(a,d,f){d instanceof bs?(a.i=d,B0(a.i,a.h)):(f||(d=Vs(d,U0)),a.i=new bs(d,a.h))}function xe(a,d,f){a.i.set(d,f)}function co(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Rs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Vs(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,M0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function M0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Kh=/[#\/\?@]/g,O0=/[#\?:]/g,F0=/[#\?]/g,U0=/[#\?@]/g,z0=/#/g;function bs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function _n(a){a.g||(a.g=new Map,a.h=0,a.i&&L0(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=bs.prototype,t.add=function(a,d){_n(this),this.i=null,a=Ar(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Gh(a,d){_n(a),d=Ar(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Yh(a,d){return _n(a),d=Ar(a,d),a.g.has(d)}t.forEach=function(a,d){_n(this),this.g.forEach(function(f,g){f.forEach(function(V){a.call(d,V,g,this)},this)},this)},t.na=function(){_n(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const V=a[g];for(let L=0;L<V.length;L++)f.push(d[g])}return f},t.V=function(a){_n(this);let d=[];if(typeof a=="string")Yh(this,a)&&(d=d.concat(this.g.get(Ar(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return _n(this),this.i=null,a=Ar(this,a),Yh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Xh(a,d,f){Gh(a,d),0<f.length&&(a.i=null,a.g.set(Ar(a,d),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const L=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var V=L;B[g]!==""&&(V+="="+encodeURIComponent(String(B[g]))),a.push(V)}}return this.i=a.join("&")};function Ar(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function B0(a,d){d&&!a.j&&(_n(a),a.i=null,a.g.forEach(function(f,g){var V=g.toLowerCase();g!=V&&(Gh(this,g),Xh(this,V,f))},a)),a.j=d}function q0(a,d){const f=new Ps;if(u.Image){const g=new Image;g.onload=C(wn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=C(wn,f,"TestLoadImage: error",!1,d,g),g.onabort=C(wn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=C(wn,f,"TestLoadImage: timeout",!1,d,g),u.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function $0(a,d){const f=new Ps,g=new AbortController,V=setTimeout(()=>{g.abort(),wn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(V),L.ok?wn(f,"TestPingServer: ok",!0,d):wn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),wn(f,"TestPingServer: error",!1,d)})}function wn(a,d,f,g,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),g(f)}catch{}}function H0(){this.g=new j0}function Q0(a,d,f){const g=f||"";try{Hh(a,function(V,L){let B=V;h(V)&&(B=Cl(V)),d.push(g+L+"="+encodeURIComponent(B))})}catch(V){throw d.push(g+"type="+encodeURIComponent("_badmap")),V}}function ho(a){this.l=a.Ub||null,this.j=a.eb||!1}S(ho,jl),ho.prototype.g=function(){return new fo(this.l,this.j)},ho.prototype.i=function(a){return function(){return a}}({});function fo(a,d){Xe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(fo,Xe),t=fo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ds(this):Ls(this),this.readyState==3&&Jh(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ds(this))},t.Qa=function(a){this.g&&(this.response=a,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ls(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zh(a){let d="";return k(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Ml(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Zh(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):xe(a,d,f))}function Se(a){Xe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Se,Xe);var W0=/^https?$/i,K0=["POST","PUT"];t=Se.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pl.g(),this.v=this.o?Sh(this.o):Sh(Pl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(L){ef(this,L);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var V in g)f.set(V,g[V]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())f.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),V=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(K0,d,void 0))||g||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of f)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rf(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){ef(this,L)}};function ef(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,tf(a),mo(a)}function tf(a){a.A||(a.A=!0,at(a,"complete"),at(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,at(this,"complete"),at(this,"abort"),mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mo(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nf(this):this.bb())},t.bb=function(){nf(this)};function nf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||sn(a)!=4||a.Z()!=2)){if(a.u&&sn(a)==4)Nh(a.Ea,0,a);else if(at(a,"readystatechange"),sn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=B===0){var V=String(a.D).match(Qh)[1]||null;!V&&u.self&&u.self.location&&(V=u.self.location.protocol.slice(0,-1)),g=!W0.test(V?V.toLowerCase():"")}f=g}if(f)at(a,"complete"),at(a,"success");else{a.m=6;try{var L=2<sn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",tf(a)}}finally{mo(a)}}}}function mo(a,d){if(a.g){rf(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||at(a,"ready");try{f.onreadystatechange=g}catch{}}}function rf(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function sn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),C0(d)}};function sf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function G0(a){const d={};a=(a.g&&2<=sn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=j(a[g]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=d[V]||[];d[V]=L,L.push(f)}x(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function of(a){this.Aa=0,this.i=[],this.j=new Ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,a),this.cb=Ms("retryDelaySeedMs",1e4,a),this.Wa=Ms("forwardChannelMaxRetries",2,a),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Uh(a&&a.concurrentRequestLimit),this.Da=new H0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=of.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){lt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=pf(this,null,this.W),go(this)};function Ol(a){if(af(a),a.G==3){var d=a.U++,f=rn(a.I);if(xe(f,"SID",a.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),Os(a,f),d=new xn(a,a.j,d),d.L=2,d.v=co(rn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=gf(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ao(d)}mf(a)}function po(a){a.g&&(Ul(a),a.g.cancel(),a.g=null)}function af(a){po(a),a.u&&(u.clearTimeout(a.u),a.u=null),yo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function go(a){if(!zh(a.h)&&!a.s){a.s=!0;var d=a.Ga;U||Y(),M||(U(),M=!0),q.add(d,a),a.B=0}}function Y0(a,d){return Bh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=As(_(a.Ga,a,d),ff(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new xn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),N(L,this.S)):L=this.S),this.m!==null||this.O||(V.H=L,L=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=uf(this,V,d),f=rn(this.I),xe(f,"RID",a),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),Os(this,f),L&&(this.O?d="headers="+encodeURIComponent(String(Zh(L)))+"&"+d:this.m&&Ml(f,this.m,L)),Ll(this.h,V),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),V.T=!0,Rl(V,f,null)):Rl(V,f,d),this.G=2}}else this.G==3&&(a?lf(this,a):this.i.length==0||zh(this.h)||lf(this))};function lf(a,d){var f;d?f=d.l:f=a.U++;const g=rn(a.I);xe(g,"SID",a.K),xe(g,"RID",f),xe(g,"AID",a.T),Os(a,g),a.m&&a.o&&Ml(g,a.m,a.o),f=new xn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=uf(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ll(a.h,f),Rl(f,g,d)}function Os(a,d){a.H&&k(a.H,function(f,g){xe(d,g,f)}),a.l&&Hh({},function(f,g){xe(d,g,f)})}function uf(a,d,f){f=Math.min(a.i.length,f);var g=a.l?_(a.l.Na,a.l,a):null;e:{var V=a.i;let L=-1;for(;;){const B=["count="+f];L==-1?0<f?(L=V[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let pe=!0;for(let qe=0;qe<f;qe++){let ce=V[qe].g;const Je=V[qe].map;if(ce-=L,0>ce)L=Math.max(0,V[qe].g-100),pe=!1;else try{Q0(Je,B,"req"+ce+"_")}catch{g&&g(Je)}}if(pe){g=B.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function cf(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;U||Y(),M||(U(),M=!0),q.add(d,a),a.v=0}}function Fl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=As(_(a.Fa,a),ff(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,df(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=As(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),po(this),df(this))};function Ul(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function df(a){a.g=new xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=rn(a.qa);xe(d,"RID","rpc"),xe(d,"SID",a.K),xe(d,"AID",a.T),xe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(d,"TO",a.ja),xe(d,"TYPE","xmlhttp"),Os(a,d),a.m&&a.o&&Ml(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=co(rn(d)),f.m=null,f.P=!0,Mh(f,a)}t.Za=function(){this.C!=null&&(this.C=null,po(this),Fl(this),lt(19))};function yo(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function hf(a,d){var f=null;if(a.g==d){yo(a),Ul(a),a.g=null;var g=2}else if(Dl(a.h,d))f=d.D,qh(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;g=so(),at(g,new Vh(g,f)),go(a)}else cf(a);else if(V=d.s,V==3||V==0&&0<d.X||!(g==1&&Y0(a,d)||g==2&&Fl(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),V){case 1:nr(a,5);break;case 4:nr(a,10);break;case 3:nr(a,6);break;default:nr(a,2)}}}function ff(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function nr(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),g=a.Xa;const V=!g;g=new tr(g||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||lo(g,"https"),co(g),V?q0(g.toString(),f):$0(g.toString(),f)}else lt(2);a.G=0,a.l&&a.l.sa(d),mf(a),af(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function mf(a){if(a.G=0,a.ka=[],a.l){const d=$h(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ka,d),D(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function pf(a,d,f){var g=f instanceof tr?rn(f):new tr(f);if(g.g!="")d&&(g.g=d+"."+g.g),uo(g,g.s);else{var V=u.location;g=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var L=new tr(null);g&&lo(L,g),d&&(L.g=d),V&&uo(L,V),f&&(L.l=f),g=L}return f=a.D,d=a.ya,f&&d&&xe(g,f,d),xe(g,"VER",a.la),Os(a,g),g}function gf(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Se(new ho({eb:f})):new Se(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yf(){}t=yf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vo(){}vo.prototype.g=function(a,d){return new Et(a,d)};function Et(a,d){Xe.call(this),this.g=new of(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Pr(this)}S(Et,Xe),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Ol(this.g)},Et.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Cl(a),a=f);d.i.push(new V0(d.Ya++,a)),d.G==3&&go(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,Et.aa.N.call(this)};function vf(a){Sl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(vf,Sl);function xf(){Al.call(this),this.status=1}S(xf,Al);function Pr(a){this.g=a}S(Pr,yf),Pr.prototype.ua=function(){at(this.g,"a")},Pr.prototype.ta=function(a){at(this.g,new vf(a))},Pr.prototype.sa=function(a){at(this.g,new xf)},Pr.prototype.ra=function(){at(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,ov=function(){return new vo},iv=function(){return so()},sv=Zn,wc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},io.NO_ERROR=0,io.TIMEOUT=8,io.HTTP_ERROR=6,ta=io,bh.COMPLETE="complete",rv=bh,Ah.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Js=Ah,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,nv=Se}).apply(typeof Mo<"u"?Mo:typeof self<"u"?self:typeof window<"u"?window:{});const Um="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Gy("@firebase/firestore");function Ws(){return _r.logLevel}function Q(t,...e){if(_r.logLevel<=le.DEBUG){const n=e.map(Md);_r.debug(`Firestore (${Es}): ${t}`,...n)}}function gn(t,...e){if(_r.logLevel<=le.ERROR){const n=e.map(Md);_r.error(`Firestore (${Es}): ${t}`,...n)}}function cs(t,...e){if(_r.logLevel<=le.WARN){const n=e.map(Md);_r.warn(`Firestore (${Es}): ${t}`,...n)}}function Md(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Es}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function me(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class h1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class f1{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new av(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new rt(e)}}class m1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class p1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new m1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new g1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=v1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function ds(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new De(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new De(0,0))}static max(){return new ee(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Di{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const x1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Di{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return x1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new H(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new H(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(we.fromString(e))}static fromName(e){return new J(we.fromString(e).popFirst(5))}static empty(){return new J(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new we(e.slice()))}}function _1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new Qn(s,J.empty(),e)}function w1(t){return new Qn(t.readTime,t.key,-1)}class Qn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qn(ee.min(),J.empty(),-1)}static max(){return new Qn(ee.max(),J.empty(),-1)}}function E1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==T1)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function I1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Od.oe=-1;function ol(t){return t==null}function Da(t){return t===0&&1/t==-1/0}function C1(t){return typeof t=="number"&&Number.isInteger(t)&&!Da(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||He.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oo(this.root,e,this.comparator,!0)}}class Oo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class He{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??He.RED,this.left=s??He.EMPTY,this.right=i??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new He(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return He.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new He(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bm(this.data.getIterator())}getIteratorFrom(e){return new Bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Bm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new It([])}unionWith(e){let n=new Ke(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new It(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cv("Invalid base64 string: "+i):i}}(e);return new Ye(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ye(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const j1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(t){if(me(!!t),typeof t=="string"){let e=0;const n=j1.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wr(t){return typeof t=="string"?Ye.fromBase64String(t):Ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ud(t){const e=t.mapValue.fields.__previous_value__;return Fd(e)?Ud(e):e}function Li(t){const e=Wn(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r,s,i,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class Mi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo={mapValue:{}};function Er(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fd(t)?4:P1(t)?9007199254740991:A1(t)?10:11:Z()}function nn(t,e){if(t===e)return!0;const n=Er(t);if(n!==Er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Li(t).isEqual(Li(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Wn(s.timestampValue),u=Wn(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return wr(s.bytesValue).isEqual(wr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pe(s.doubleValue),u=Pe(i.doubleValue);return o===u?Da(o)===Da(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ds(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(zm(o)!==zm(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!nn(o[c],u[c])))return!1;return!0}(t,e);default:return Z()}}function Oi(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=Er(t),r=Er(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Pe(i.integerValue||i.doubleValue),c=Pe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return qm(t.timestampValue,e.timestampValue);case 4:return qm(Li(t),Li(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(i,o){const u=wr(i),c=wr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=de(u[h],c[h]);if(m!==0)return m}return de(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=de(Pe(i.latitude),Pe(o.latitude));return u!==0?u:de(Pe(i.longitude),Pe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $m(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,m;const p=i.fields||{},_=o.fields||{},C=(u=p.value)===null||u===void 0?void 0:u.arrayValue,S=(c=_.value)===null||c===void 0?void 0:c.arrayValue,P=de(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return P!==0?P:$m(C,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Fo.mapValue&&o===Fo.mapValue)return 0;if(i===Fo.mapValue)return 1;if(o===Fo.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const _=de(c[p],m[p]);if(_!==0)return _;const C=hs(u[c[p]],h[m[p]]);if(C!==0)return C}return de(c.length,m.length)}(t.mapValue,e.mapValue);default:throw Z()}}function qm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Wn(t),r=Wn(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function $m(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hs(n[s],r[s]);if(i)return i}return de(n.length,r.length)}function fs(t){return Ec(t)}function Ec(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ec(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ec(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Hm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tc(t){return!!t&&"integerValue"in t}function zd(t){return!!t&&"arrayValue"in t}function Qm(t){return!!t&&"nullValue"in t}function Wm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function na(t){return!!t&&"mapValue"in t}function A1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function di(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=di(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=di(t.arrayValue.values[n]);return e}return Object.assign({},t)}function P1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.value=e}static empty(){return new gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!na(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=di(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=di(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());na(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];na(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new gt(di(this.value))}}function dv(t){const e=[];return Ir(t.fields,(n,r)=>{const s=new Qe([n]);if(na(r)){const i=dv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new It(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new it(e,0,ee.min(),ee.min(),ee.min(),gt.empty(),0)}static newFoundDocument(e,n,r,s){return new it(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new it(e,2,n,ee.min(),ee.min(),gt.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,ee.min(),ee.min(),gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.position=e,this.inclusive=n}}function Km(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=hs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n="asc"){this.field=e,this.dir=n}}function k1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{}class be extends hv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new V1(e,n,r):n==="array-contains"?new L1(e,r):n==="in"?new M1(e,r):n==="not-in"?new O1(e,r):n==="array-contains-any"?new F1(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b1(e,r):new D1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hs(n,this.value)):n!==null&&Er(this.value)===Er(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends hv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wt(e,n)}matches(e){return fv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fv(t){return t.op==="and"}function mv(t){return R1(t)&&fv(t)}function R1(t){for(const e of t.filters)if(e instanceof Wt)return!1;return!0}function Nc(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+fs(t.value);if(mv(t))return t.filters.map(e=>Nc(e)).join(",");{const e=t.filters.map(n=>Nc(n)).join(",");return`${t.op}(${e})`}}function pv(t,e){return t instanceof be?function(r,s){return s instanceof be&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof Wt?function(r,s){return s instanceof Wt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&pv(o,s.filters[u]),!0):!1}(t,e):void Z()}function gv(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${fs(n.value)}`}(t):t instanceof Wt?function(n){return n.op.toString()+" {"+n.getFilters().map(gv).join(" ,")+"}"}(t):"Filter"}class V1 extends be{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class b1 extends be{constructor(e,n){super(e,"in",n),this.keys=yv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D1 extends be{constructor(e,n){super(e,"not-in",n),this.keys=yv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class L1 extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zd(n)&&Oi(n.arrayValue,this.value)}}class M1 extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oi(this.value.arrayValue,n)}}class O1 extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Oi(this.value.arrayValue,n)}}class F1 extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function Ym(t,e=null,n=[],r=[],s=null,i=null,o=null){return new U1(t,e,n,r,s,i,o)}function Bd(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ol(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fs(r)).join(",")),e.ue=n}return e.ue}function qd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gm(t.startAt,e.startAt)&&Gm(t.endAt,e.endAt)}function Ic(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function z1(t,e,n,r,s,i,o,u){return new Ts(t,e,n,r,s,i,o,u)}function $d(t){return new Ts(t)}function Xm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vv(t){return t.collectionGroup!==null}function hi(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ke(Qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Fi(i,r))}),n.has(Qe.keyField().canonicalString())||e.ce.push(new Fi(Qe.keyField(),r))}return e.ce}function Zt(t){const e=te(t);return e.le||(e.le=B1(e,hi(t))),e.le}function B1(t,e){if(t.limitType==="F")return Ym(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fi(s.field,i)});const n=t.endAt?new La(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new La(t.startAt.position,t.startAt.inclusive):null;return Ym(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cc(t,e){const n=t.filters.concat([e]);return new Ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jc(t,e,n){return new Ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function al(t,e){return qd(Zt(t),Zt(e))&&t.limitType===e.limitType}function xv(t){return`${Bd(Zt(t))}|lt:${t.limitType}`}function Vr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gv(s)).join(", ")}]`),ol(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fs(s)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function ll(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of hi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=Km(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,hi(r),s)||r.endAt&&!function(o,u,c){const h=Km(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,hi(r),s))}(t,e)}function q1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _v(t){return(e,n)=>{let r=!1;for(const s of hi(t)){const i=$1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function $1(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?hs(c,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return uv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new je(J.comparator);function yn(){return H1}const wv=new je(J.comparator);function Zs(...t){let e=wv;for(const n of t)e=e.insert(n.key,n);return e}function Ev(t){let e=wv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ur(){return fi()}function Tv(){return fi()}function fi(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const Q1=new je(J.comparator),W1=new Ke(J.comparator);function se(...t){let e=W1;for(const n of t)e=e.add(n);return e}const K1=new Ke(de);function G1(){return K1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}function Nv(t){return{integerValue:""+t}}function Y1(t,e){return C1(e)?Nv(e):Hd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this._=void 0}}function X1(t,e,n){return t instanceof Ma?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Fd(i)&&(i=Ud(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ui?Cv(t,e):t instanceof zi?jv(t,e):function(s,i){const o=Iv(s,i),u=Jm(o)+Jm(s.Pe);return Tc(o)&&Tc(s.Pe)?Nv(u):Hd(s.serializer,u)}(t,e)}function J1(t,e,n){return t instanceof Ui?Cv(t,e):t instanceof zi?jv(t,e):n}function Iv(t,e){return t instanceof Oa?function(r){return Tc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ma extends ul{}class Ui extends ul{constructor(e){super(),this.elements=e}}function Cv(t,e){const n=Sv(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class zi extends ul{constructor(e){super(),this.elements=e}}function jv(t,e){let n=Sv(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class Oa extends ul{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jm(t){return Pe(t.integerValue||t.doubleValue)}function Sv(t){return zd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Z1(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ui&&s instanceof Ui||r instanceof zi&&s instanceof zi?ds(r.elements,s.elements,nn):r instanceof Oa&&s instanceof Oa?nn(r.Pe,s.Pe):r instanceof Ma&&s instanceof Ma}(t.transform,e.transform)}class eT{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ra(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cl{}function Av(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qd(t.key,Ht.none()):new Yi(t.key,t.data,Ht.none());{const n=t.data,r=gt.empty();let s=new Ke(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Jn(t.key,r,new It(s.toArray()),Ht.none())}}function tT(t,e,n){t instanceof Yi?function(s,i,o){const u=s.value.clone(),c=ep(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Jn?function(s,i,o){if(!ra(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=ep(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Pv(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mi(t,e,n,r){return t instanceof Yi?function(i,o,u,c){if(!ra(i.precondition,o))return u;const h=i.value.clone(),m=tp(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jn?function(i,o,u,c){if(!ra(i.precondition,o))return u;const h=tp(i.fieldTransforms,c,o),m=o.data;return m.setAll(Pv(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return ra(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function nT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Iv(r.transform,s||null);i!=null&&(n===null&&(n=gt.empty()),n.set(r.field,i))}return n||null}function Zm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ds(r,s,(i,o)=>Z1(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yi extends cl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jn extends cl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ep(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,J1(o,u,n[s]))}return r}function tp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,X1(i,o,e))}return r}class Qd extends cl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rT extends cl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Av(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(n,r)=>Zm(n,r))&&ds(this.baseMutations,e.baseMutations,(n,r)=>Zm(n,r))}}class Wd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return Q1}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Wd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,ae;function aT(t){switch(t){default:return Z();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function kv(t){if(t===void 0)return gn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Re.OK:return O.OK;case Re.CANCELLED:return O.CANCELLED;case Re.UNKNOWN:return O.UNKNOWN;case Re.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Re.INTERNAL:return O.INTERNAL;case Re.UNAVAILABLE:return O.UNAVAILABLE;case Re.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Re.NOT_FOUND:return O.NOT_FOUND;case Re.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Re.ABORTED:return O.ABORTED;case Re.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Re.DATA_LOSS:return O.DATA_LOSS;default:return Z()}}(ae=Re||(Re={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new hr([4294967295,4294967295],0);function np(t){const e=lT().encode(t),n=new tv;return n.update(e),new Uint8Array(n.digest())}function rp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class Kd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ei(`Invalid padding: ${n}`);if(r<0)throw new ei(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ei(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ei(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(uT)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=np(e),[r,s]=rp(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Kd(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=np(e),[r,s]=rp(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ei extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dl(ee.min(),s,new je(de),yn(),se())}}class Xi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xi(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Rv{constructor(e,n){this.targetId=e,this.me=n}}class Vv{constructor(e,n,r=Ye.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sp{constructor(){this.fe=0,this.ge=op(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new Xi(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=op()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cT{constructor(e){this.Le=e,this.Be=new Map,this.ke=yn(),this.qe=ip(),this.Qe=new je(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ic(i))if(r===0){const o=new J(i.path);this.Ue(n,o,it.newNoDocument(o,ee.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=wr(r).toUint8Array()}catch(c){if(c instanceof cv)return cs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Kd(o,s,i)}catch(c){return cs(c instanceof ei?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Ic(u.target)){const c=new J(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,it.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=se();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new dl(e,n,this.Qe,this.ke,r);return this.ke=yn(),this.qe=ip(),this.Qe=new je(de),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ip(){return new je(J.comparator)}function op(){return new je(J.comparator)}const dT={asc:"ASCENDING",desc:"DESCENDING"},hT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fT={and:"AND",or:"OR"};class mT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sc(t,e){return t.useProto3Json||ol(e)?e:{value:e}}function Fa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pT(t,e){return Fa(t,e.toTimestamp())}function en(t){return me(!!t),ee.fromTimestamp(function(n){const r=Wn(n);return new De(r.seconds,r.nanos)}(t))}function Gd(t,e){return Ac(t,e).canonicalString()}function Ac(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dv(t){const e=we.fromString(t);return me(Uv(e)),e}function Pc(t,e){return Gd(t.databaseId,e.path)}function vu(t,e){const n=Dv(e);if(n.get(1)!==t.databaseId.projectId)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(Mv(n))}function Lv(t,e){return Gd(t.databaseId,e)}function gT(t){const e=Dv(t);return e.length===4?we.emptyPath():Mv(e)}function kc(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mv(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ap(t,e,n){return{name:Pc(t,e),fields:n.value.mapValue.fields}}function yT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(me(m===void 0||typeof m=="string"),Ye.fromBase64String(m||"")):(me(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Ye.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?O.UNKNOWN:kv(h.code);return new H(m,h.message||"")}(o);n=new Vv(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vu(t,r.document.name),i=en(r.document.updateTime),o=r.document.createTime?en(r.document.createTime):ee.min(),u=new gt({mapValue:{fields:r.document.fields}}),c=it.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new sa(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vu(t,r.document),i=r.readTime?en(r.readTime):ee.min(),o=it.newNoDocument(s,i),u=r.removedTargetIds||[];n=new sa([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vu(t,r.document),i=r.removedTargetIds||[];n=new sa([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new oT(s,i),u=r.targetId;n=new Rv(u,o)}}return n}function vT(t,e){let n;if(e instanceof Yi)n={update:ap(t,e.key,e.value)};else if(e instanceof Qd)n={delete:Pc(t,e.key)};else if(e instanceof Jn)n={update:ap(t,e.key,e.data),updateMask:jT(e.fieldMask)};else{if(!(e instanceof rT))return Z();n={verify:Pc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ui)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Oa)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function xT(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?en(s.updateTime):en(i);return o.isEqual(ee.min())&&(o=en(i)),new eT(o,s.transformResults||[])}(n,e))):[]}function _T(t,e){return{documents:[Lv(t,e.path)]}}function wT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lv(t,s);const i=function(h){if(h.length!==0)return Fv(Wt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:br(_.field),direction:NT(_.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Sc(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function ET(t){let e=gT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const _=Ov(p);return _ instanceof Wt&&mv(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(_=>function(S){return new Fi(Dr(S.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(p){let _;return _=typeof p=="object"?p.value:p,ol(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(p){const _=!!p.before,C=p.values||[];return new La(C,_)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const _=!p.before,C=p.values||[];return new La(C,_)}(n.endAt)),z1(e,s,o,i,u,"F",c,h)}function TT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ov(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dr(n.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Dr(n.unaryFilter.field);return be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dr(n.unaryFilter.field);return be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dr(n.unaryFilter.field);return be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return be.create(Dr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wt.create(n.compositeFilter.filters.map(r=>Ov(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function NT(t){return dT[t]}function IT(t){return hT[t]}function CT(t){return fT[t]}function br(t){return{fieldPath:t.canonicalString()}}function Dr(t){return Qe.fromServerFormat(t.fieldPath)}function Fv(t){return t instanceof be?function(n){if(n.op==="=="){if(Wm(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NAN"}};if(Qm(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wm(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NOT_NAN"}};if(Qm(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:br(n.field),op:IT(n.op),value:n.value}}}(t):t instanceof Wt?function(n){const r=n.getFilters().map(s=>Fv(s));return r.length===1?r[0]:{compositeFilter:{op:CT(n.op),filters:r}}}(t):Z()}function jT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Uv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,s,i=ee.min(),o=ee.min(),u=Ye.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Pn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.ct=e}}function AT(t){const e=ET({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.un=new kT}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Qn.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Qn.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class kT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ms(0)}static kn(){return new ms(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&mi(r.mutation,s,It.empty(),De.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=ur();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Zs();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=yn();const o=fi(),u=function(){return fi()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Jn)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),mi(m.mutation,h,m.mutation.getFieldMask(),De.now())):o.set(h.key,It.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var p;return u.set(h,new VT(m,(p=o.get(h))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=fi();let s=new je((o,u)=>o-u),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||It.empty();m=u.applyToLocalView(h,m),r.set(c,m);const p=(s.get(u.batchId)||se()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,p=Tv();m.forEach(_=>{if(!i.has(_)){const C=Av(n.get(_),r.get(_));C!==null&&p.set(_,C),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ur());let u=-1,c=i;return o.next(h=>F.forEach(h,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{c=c.insert(m,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,se())).next(m=>({batchId:u,changes:Ev(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Zs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Zs();return this.indexManager.getCollectionParents(e,i).next(u=>F.forEach(u,c=>{const h=function(p,_){return new Ts(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,it.newInvalidDocument(m)))});let u=Zs();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&mi(m.mutation,h,It.empty(),De.now()),ll(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:en(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:AT(s.bundledQuery),readTime:en(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.overlays=new je(J.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ur();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ur(),i=n.length+1,o=new J(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=ur(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=ur(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return F.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iT(n,r));let i=this.Ir.get(n);i===void 0&&(i=se(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this.Tr=new Ke(Ue.Er),this.dr=new Ke(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new we([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new we([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=se();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Ue.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sT(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new Ue(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(de);return n.forEach(s=>{const i=new Ue(s,0),o=new Ue(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ue(new J(i),0);let u=new Ke(de);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.wr)),!0)},o),F.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.Mr=e,this.docs=function(){return new je(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():it.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yn();const o=n.path,u=new J(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||E1(w1(m),r)<=0||(s.has(m.key)||ll(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UT(this)}getSize(e){return F.resolve(this.size)}}class UT extends RT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.persistence=e,this.Nr=new Ns(n=>Bd(n),qd),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yd,this.targetCount=0,this.kr=ms.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ms(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Od(0),this.Kr=!1,this.Kr=!0,this.$r=new MT,this.referenceDelegate=e(this),this.Ur=new zT(this),this.indexManager=new PT,this.remoteDocumentCache=function(s){return new FT(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ST(n),this.Gr=new DT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new OT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new qT(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qT extends N1{constructor(e){super(),this.currentSequenceNumber=e}}class Xd{constructor(e){this.persistence=e,this.Jr=new Yd,this.Yr=null}static Zr(e){return new Xd(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Jd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Gw()?8:I1(Ww())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $T;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ws()<=le.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Vr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ws()<=le.DEBUG&&Q("QueryEngine","Query:",Vr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ws()<=le.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Vr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):F.resolve())}Yi(e,n){if(Xm(n))return F.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jc(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,jc(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Xm(n)||s.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Ws()<=le.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vr(n)),this.rs(e,o,n,_1(s,-1)).next(u=>u))})}ts(e,n){let r=new Ke(_v(e));return n.forEach((s,i)=>{ll(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ws()<=le.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Vr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(de),this._s=new Ns(i=>Bd(i),qd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WT(t,e,n,r){return new QT(t,e,n,r)}async function zv(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=se();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function KT(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const p=h.batch,_=p.keys();let C=F.resolve();return _.forEach(S=>{C=C.next(()=>m.getEntry(c,S)).next(P=>{const D=h.docVersions.get(S);me(D!==null),P.version.compareTo(D)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),m.addEntry(P)))})}),C.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=se();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Bv(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function GT(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((m,p)=>{const _=s.get(p);if(!_)return;u.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,p)));let C=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(Ye.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,r)),s=s.insert(p,C),function(P,D,I){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,C,m)&&u.push(n.Ur.updateTargetData(i,C))});let c=yn(),h=se();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(YT(i,o,e.documentUpdates).next(m=>{c=m.Ps,h=m.Is})),!r.isEqual(ee.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return F.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function YT(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=yn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):Q("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function XT(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JT(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Pn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Rc(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Gi(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function lp(t,e,n){const r=te(t);let s=ee.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const p=te(c),_=p._s.get(m);return _!==void 0?F.resolve(p.os.get(_)):p.Ur.getTargetData(h,m)}(r,o,Zt(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:se())).next(u=>(ZT(r,q1(e),u),{documents:u,Ts:i})))}function ZT(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class up{constructor(){this.activeTargetIds=G1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eN{constructor(){this.so=new up,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new up,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=null;function xu(){return Uo===null?Uo=function(){return 268435456+Math.round(2147483648*Math.random())}():Uo++,"0x"+Uo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt="WebChannelConnection";class sN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=xu(),c=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(m=>(Q("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw cs("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",s),m})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Es}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=nN[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=xu();return new Promise((o,u)=>{const c=new nv;c.setWithCredentials(!0),c.listenOnce(rv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ta.NO_ERROR:const m=c.getResponseJson();Q(nt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case ta.TIMEOUT:Q(nt,`RPC '${e}' ${i} timed out`),u(new H(O.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:const p=c.getStatus();if(Q(nt,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const S=function(D){const I=D.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(I)>=0?I:O.UNKNOWN}(C.status);u(new H(S,C.message))}else u(new H(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new H(O.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{Q(nt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Q(nt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=xu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ov(),u=iv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");Q(nt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);let _=!1,C=!1;const S=new rN({Io:D=>{C?Q(nt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(_||(Q(nt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),_=!0),Q(nt,`RPC '${e}' stream ${s} sending:`,D),p.send(D))},To:()=>p.close()}),P=(D,I,w)=>{D.listen(I,T=>{try{w(T)}catch(b){setTimeout(()=>{throw b},0)}})};return P(p,Js.EventType.OPEN,()=>{C||(Q(nt,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),P(p,Js.EventType.CLOSE,()=>{C||(C=!0,Q(nt,`RPC '${e}' stream ${s} transport closed`),S.So())}),P(p,Js.EventType.ERROR,D=>{C||(C=!0,cs(nt,`RPC '${e}' stream ${s} transport errored:`,D),S.So(new H(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,Js.EventType.MESSAGE,D=>{var I;if(!C){const w=D.data[0];me(!!w);const T=w,b=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(b){Q(nt,`RPC '${e}' stream ${s} received error:`,b);const R=b.status;let k=function(E){const N=Re[E];if(N!==void 0)return kv(N)}(R),x=b.message;k===void 0&&(k=O.INTERNAL,x="Unknown error status: "+R+" with message "+b.message),C=!0,S.So(new H(k,x)),p.close()}else Q(nt,`RPC '${e}' stream ${s} received:`,w),S.bo(w)}}),P(u,sv.STAT_EVENT,D=>{D.stat===wc.PROXY?Q(nt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===wc.NOPROXY&&Q(nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function _u(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){return new mT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iN extends $v{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yT(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?en(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=kc(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Ic(c)?{documents:_T(i,c)}:{query:wT(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=bv(i,o.resumeToken);const h=Sc(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(ee.min())>0){u.readTime=Fa(i,o.snapshotVersion.toTimestamp());const h=Sc(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=TT(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=kc(this.serializer),n.removeTarget=e,this.a_(n)}}class oN extends $v{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xT(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=kc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ac(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Ac(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Cr(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=te(c);h.L_.add(4),await Ji(h),h.q_.set("Unknown"),h.L_.delete(4),await fl(h)}(this))})}),this.q_=new lN(r,s)}}async function fl(t){if(Cr(t))for(const e of t.B_)await e(!0)}async function Ji(t){for(const e of t.B_)await e(!1)}function Hv(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),nh(n)?th(n):Is(n).r_()&&eh(n,e))}function Zd(t,e){const n=te(t),r=Is(n);n.N_.delete(e),r.r_()&&Qv(n,e),n.N_.size===0&&(r.r_()?r.o_():Cr(n)&&n.q_.set("Unknown"))}function eh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Is(t).A_(e)}function Qv(t,e){t.Q_.xe(e),Is(t).R_(e)}function th(t){t.Q_=new cT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Is(t).start(),t.q_.v_()}function nh(t){return Cr(t)&&!Is(t).n_()&&t.N_.size>0}function Cr(t){return te(t).L_.size===0}function Wv(t){t.Q_=void 0}async function cN(t){t.q_.set("Online")}async function dN(t){t.N_.forEach((e,n)=>{eh(t,e)})}async function hN(t,e){Wv(t),nh(t)?(t.q_.M_(e),th(t)):t.q_.set("Unknown")}async function fN(t,e,n){if(t.q_.set("Online"),e instanceof Vv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ua(t,r)}else if(e instanceof sa?t.Q_.Ke(e):e instanceof Rv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await Bv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.N_.get(c);if(!m)return;i.N_.set(c,m.withResumeToken(Ye.EMPTY_BYTE_STRING,m.snapshotVersion)),Qv(i,c);const p=new Pn(m.target,c,h,m.sequenceNumber);eh(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Ua(t,r)}}async function Ua(t,e,n){if(!Gi(e))throw e;t.L_.add(1),await Ji(t),t.q_.set("Offline"),n||(n=()=>Bv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fl(t)})}function Kv(t,e){return e().catch(n=>Ua(t,n,e))}async function ml(t){const e=te(t),n=Kn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mN(e);)try{const s=await XT(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,pN(e,s)}catch(s){await Ua(e,s)}Gv(e)&&Yv(e)}function mN(t){return Cr(t)&&t.O_.length<10}function pN(t,e){t.O_.push(e);const n=Kn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Gv(t){return Cr(t)&&!Kn(t).n_()&&t.O_.length>0}function Yv(t){Kn(t).start()}async function gN(t){Kn(t).p_()}async function yN(t){const e=Kn(t);for(const n of t.O_)e.m_(n.mutations)}async function vN(t,e,n){const r=t.O_.shift(),s=Wd.from(r,e,n);await Kv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ml(t)}async function xN(t,e){e&&Kn(t).V_&&await async function(r,s){if(function(o){return aT(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Kn(r).s_(),await Kv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ml(r)}}(t,e),Gv(t)&&Yv(t)}async function dp(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Cr(n);n.L_.add(3),await Ji(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fl(n)}async function _N(t,e){const n=te(t);e?(n.L_.delete(2),await fl(n)):e||(n.L_.add(2),await Ji(n),n.q_.set("Unknown"))}function Is(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new iN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:cN.bind(null,t),Ro:dN.bind(null,t),mo:hN.bind(null,t),d_:fN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),nh(t)?th(t):t.q_.set("Unknown")):(await t.K_.stop(),Wv(t))})),t.K_}function Kn(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new oN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gN.bind(null,t),mo:xN.bind(null,t),f_:yN.bind(null,t),g_:vN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ml(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new rh(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sh(t,e){if(gn("AsyncQueue",`${e}: ${t}`),Gi(t))return new H(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Zs(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new ns(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ns;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.W_=new je(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ps{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new ps(e,n,ns.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&al(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class EN{constructor(){this.queries=fp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=fp(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new H(O.ABORTED,"Firestore shutting down"))}}function fp(){return new Ns(t=>xv(t),al)}async function TN(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new wN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=sh(o,`Initialization of query '${Vr(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&ih(n)}async function NN(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IN(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&ih(n)}function CN(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function ih(t){t.Y_.forEach(e=>{e.next()})}var Vc,mp;(mp=Vc||(Vc={})).ea="default",mp.Cache="cache";class jN{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.key=e}}class Jv{constructor(e){this.key=e}}class SN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=_v(e),this.Ra=new ns(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new hp,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const _=s.get(m),C=ll(this.query,p)?p:null,S=!!_&&this.mutatedKeys.has(_.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;_&&C?_.data.isEqual(C.data)?S!==P&&(r.track({type:3,doc:C}),D=!0):this.ga(_,C)||(r.track({type:2,doc:C}),D=!0,(c&&this.Aa(C,c)>0||h&&this.Aa(C,h)<0)&&(u=!0)):!_&&C?(r.track({type:0,doc:C}),D=!0):_&&!C&&(r.track({type:1,doc:_}),D=!0,(c||h)&&(u=!0)),D&&(C?(o=o.add(C),i=P?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,p)=>function(C,S){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return P(C)-P(S)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new ps(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Jv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Xv(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PN{constructor(e){this.key=e,this.va=!1}}class kN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ns(u=>xv(u),al),this.Ma=new Map,this.xa=new Set,this.Oa=new je(J.comparator),this.Na=new Map,this.La=new Yd,this.Ba={},this.ka=new Map,this.qa=ms.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RN(t,e,n=!0){const r=s0(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Zv(r,e,n,!0),s}async function VN(t,e){const n=s0(t);await Zv(n,e,!0,!1)}async function Zv(t,e,n,r){const s=await JT(t.localStore,Zt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await bN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hv(t.remoteStore,s),u}async function bN(t,e,n,r,s){t.Ka=(p,_,C)=>async function(P,D,I,w){let T=D.view.ma(I);T.ns&&(T=await lp(P.localStore,D.query,!1).then(({documents:x})=>D.view.ma(x,T)));const b=w&&w.targetChanges.get(D.targetId),R=w&&w.targetMismatches.get(D.targetId)!=null,k=D.view.applyChanges(T,P.isPrimaryClient,b,R);return gp(P,D.targetId,k.wa),k.snapshot}(t,p,_,C);const i=await lp(t.localStore,e,!0),o=new SN(e,i.Ts),u=o.ma(i.documents),c=Xi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);gp(t,n,h.wa);const m=new AN(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function DN(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!al(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Rc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Zd(r.remoteStore,s.targetId),bc(r,s.targetId)}).catch(Ki)):(bc(r,s.targetId),await Rc(r.localStore,s.targetId,!0))}async function LN(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zd(n.remoteStore,r.targetId))}async function MN(t,e,n){const r=$N(t);try{const s=await function(o,u){const c=te(o),h=De.now(),m=u.reduce((C,S)=>C.add(S.key),se());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let S=yn(),P=se();return c.cs.getEntries(C,m).next(D=>{S=D,S.forEach((I,w)=>{w.isValidDocument()||(P=P.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,S)).next(D=>{p=D;const I=[];for(const w of u){const T=nT(w,p.get(w.key).overlayedDocument);T!=null&&I.push(new Jn(w.key,T,dv(T.value.mapValue),Ht.exists(!0)))}return c.mutationQueue.addMutationBatch(C,h,I,u)}).next(D=>{_=D;const I=D.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(C,D.batchId,I)})}).then(()=>({batchId:_.batchId,changes:Ev(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new je(de)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Zi(r,s.changes),await ml(r.remoteStore)}catch(s){const i=sh(s,"Failed to persist write");n.reject(i)}}async function e0(t,e){const n=te(t);try{const r=await GT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?me(o.va):s.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await Zi(n,r,e)}catch(r){await Ki(r)}}function pp(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=te(o);c.onlineState=u;let h=!1;c.queries.forEach((m,p)=>{for(const _ of p.j_)_.Z_(u)&&(h=!0)}),h&&ih(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ON(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new je(J.comparator);o=o.insert(i,it.newNoDocument(i,ee.min()));const u=se().add(i),c=new dl(ee.min(),new Map,new je(de),o,u);await e0(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),oh(r)}else await Rc(r.localStore,e,!1).then(()=>bc(r,e,n)).catch(Ki)}async function FN(t,e){const n=te(t),r=e.batch.batchId;try{const s=await KT(n.localStore,e);n0(n,r,null),t0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zi(n,s)}catch(s){await Ki(s)}}async function UN(t,e,n){const r=te(t);try{const s=await function(o,u){const c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(me(p!==null),m=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);n0(r,e,n),t0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zi(r,s)}catch(s){await Ki(s)}}function t0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function n0(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function bc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||r0(t,r)})}function r0(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Zd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),oh(t))}function gp(t,e,n){for(const r of n)r instanceof Xv?(t.La.addReference(r.key,e),zN(t,r)):r instanceof Jv?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||r0(t,r.key)):Z()}function zN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),oh(t))}function oh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(we.fromString(e)),r=t.qa.next();t.Na.set(r,new PN(n)),t.Oa=t.Oa.insert(n,r),Hv(t.remoteStore,new Pn(Zt($d(n.path)),r,"TargetPurposeLimboResolution",Od.oe))}}async function Zi(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Jd.Wi(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const m=te(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,_=>F.forEach(_.$i,C=>m.persistence.referenceDelegate.addReference(p,_.targetId,C)).next(()=>F.forEach(_.Ui,C=>m.persistence.referenceDelegate.removeReference(p,_.targetId,C)))))}catch(p){if(!Gi(p))throw p;Q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const C=m.os.get(_),S=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(S);m.os=m.os.insert(_,P)}}}(r.localStore,i))}async function BN(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await zv(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new H(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zi(n,r.hs)}}function qN(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function s0(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=e0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ON.bind(null,e),e.Ca.d_=IN.bind(null,e.eventManager),e.Ca.$a=CN.bind(null,e.eventManager),e}function $N(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UN.bind(null,e),e}class za{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WT(this.persistence,new HT,e.initialUser,this.serializer)}Ga(e){return new BT(Xd.Zr,this.serializer)}Wa(e){return new eN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}za.provider={build:()=>new za};class Dc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BN.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EN}()}createDatastore(e){const n=hl(e.databaseInfo.databaseId),r=function(i){return new sN(i)}(e.databaseInfo);return function(i,o,u,c){return new aN(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new uN(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>pp(this.syncEngine,n,0),function(){return cp.D()?new cp:new tN}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const p=new kN(s,i,o,u,c,h);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ji(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dc.provider={build:()=>new Dc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=rt.UNAUTHENTICATED,this.clientId=lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wu(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await zv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WN(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>dp(e.remoteStore,s)),t._onlineComponents=e}async function WN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await wu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;cs("Error using user provided cache. Falling back to memory cache: "+n),await wu(t,new za)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await wu(t,new za);return t._offlineComponents}async function i0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await yp(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await yp(t,new Dc))),t._onlineComponents}function KN(t){return i0(t).then(e=>e.syncEngine)}async function vp(t){const e=await i0(t),n=e.eventManager;return n.onListen=RN.bind(null,e.syncEngine),n.onUnlisten=DN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LN.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t,e,n){if(!n)throw new H(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GN(t,e,n,r){if(e===!0&&r===!0)throw new H(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _p(t){if(!J.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wp(t){if(J.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pl(t);throw new H(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ep({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ep(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d1;switch(r.type){case"firstParty":return new p1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xp.get(n);r&&(Q("ComponentProvider","Removing Datastore"),xp.delete(n),r.terminate())}(this),Promise.resolve()}}function YN(t,e,n,r={}){var s;const i=(t=Bn(t,gl))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=rt.MOCK_USER;else{u=Qw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new H(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new rt(h)}t._authCredentials=new h1(new av(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class qn extends jr{constructor(e,n,r){super(e,n,$d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new J(e))}withConverter(e){return new qn(this.firestore,e,this._path)}}function Tp(t,e,...n){if(t=tn(t),a0("collection","path",e),t instanceof gl){const r=we.fromString(e,...n);return wp(r),new qn(t,null,r)}{if(!(t instanceof wt||t instanceof qn))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return wp(r),new qn(t.firestore,null,r)}}function Lc(t,e,...n){if(t=tn(t),arguments.length===1&&(e=lv.newId()),a0("doc","path",e),t instanceof gl){const r=we.fromString(e,...n);return _p(r),new wt(t,null,new J(r))}{if(!(t instanceof wt||t instanceof qn))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return _p(r),new wt(t.firestore,t instanceof qn?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qv(this,"async_queue_retry"),this.Vu=()=>{const r=_u();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=_u();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=_u();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gi(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=rh.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Ip(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gs extends gl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Np,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Np(e),this._firestoreClient=void 0,await e}}}function XN(t,e){const n=typeof t=="object"?t:t1(),r=typeof t=="string"?t:"(default)",s=XE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$w("firestore");i&&YN(s,...i)}return s}function l0(t){if(t._terminated)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JN(t),t._firestoreClient}function JN(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,m){return new S1(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,o0(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new QN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(Ye.fromBase64String(e))}catch(n){throw new H(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ys(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=/^__.*__$/;class eI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yi(e,this.data,n,this.fieldTransforms)}}class u0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Jn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function c0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class ch{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ch(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ba(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(c0(this.Cu)&&ZN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hl(e)}Qu(e,n,r,s=!1){return new ch({Cu:e,methodName:n,qu:r,path:Qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dh(t){const e=t._freezeSettings(),n=hl(t._databaseId);return new tI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nI(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);hh("Data must be an object, but it was:",o,r);const u=d0(r,o);let c,h;if(i.merge)c=new It(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const _=Mc(e,p,n);if(!o.contains(_))throw new H(O.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);f0(m,_)||m.push(_)}c=new It(m),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new eI(new gt(u),c,h)}class vl extends ah{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vl}}function rI(t,e,n,r){const s=t.Qu(1,e,n);hh("Data must be an object, but it was:",s,r);const i=[],o=gt.empty();Ir(r,(c,h)=>{const m=fh(e,c,n);h=tn(h);const p=s.Nu(m);if(h instanceof vl)i.push(m);else{const _=eo(h,p);_!=null&&(i.push(m),o.set(m,_))}});const u=new It(i);return new u0(o,u,s.fieldTransforms)}function sI(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[Mc(e,r,n)],c=[s];if(i.length%2!=0)throw new H(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)u.push(Mc(e,i[_])),c.push(i[_+1]);const h=[],m=gt.empty();for(let _=u.length-1;_>=0;--_)if(!f0(h,u[_])){const C=u[_];let S=c[_];S=tn(S);const P=o.Nu(C);if(S instanceof vl)h.push(C);else{const D=eo(S,P);D!=null&&(h.push(C),m.set(C,D))}}const p=new It(h);return new u0(m,p,o.fieldTransforms)}function iI(t,e,n,r=!1){return eo(n,t.Qu(r?4:3,e))}function eo(t,e){if(h0(t=tn(t)))return hh("Unsupported field value:",e,t),d0(t,e);if(t instanceof ah)return function(r,s){if(!c0(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=eo(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=De.fromDate(r);return{timestampValue:Fa(s.serializer,i)}}if(r instanceof De){const i=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fa(s.serializer,i)}}if(r instanceof lh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ys)return{bytesValue:bv(s.serializer,r._byteString)};if(r instanceof wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof uh)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Hd(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${pl(r)}`)}(t,e)}function d0(t,e){const n={};return uv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(t,(r,s)=>{const i=eo(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function h0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof lh||t instanceof ys||t instanceof wt||t instanceof ah||t instanceof uh)}function hh(t,e,n){if(!h0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Mc(t,e,n){if((e=tn(e))instanceof yl)return e._internalPath;if(typeof e=="string")return fh(t,e);throw Ba("Field path arguments must be of type string or ",t,!1,void 0,n)}const oI=new RegExp("[~\\*/\\[\\]]");function fh(t,e,n){if(e.search(oI)>=0)throw Ba(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yl(...e.split("."))._internalPath}catch{throw Ba(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ba(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new H(O.INVALID_ARGUMENT,u+t+c)}function f0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aI extends m0{data(){return super.data()}}function mh(t,e){return typeof e=="string"?fh(t,e):e instanceof yl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ph{}class p0 extends ph{}function uI(t,e,...n){let r=[];e instanceof ph&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof yh).length,u=i.filter(c=>c instanceof gh).length;if(o>1||o>0&&u>0)throw new H(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class gh extends p0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gh(e,n,r)}_apply(e){const n=this._parse(e);return g0(e._query,n),new jr(e.firestore,e.converter,Cc(e._query,n))}_parse(e){const n=dh(e.firestore);return function(i,o,u,c,h,m,p){let _;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){jp(p,m);const C=[];for(const S of p)C.push(Cp(c,i,S));_={arrayValue:{values:C}}}else _=Cp(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||jp(p,m),_=iI(u,o,p,m==="in"||m==="not-in");return be.create(h,m,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class yh extends ph{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)g0(o,c),o=Cc(o,c)}(e._query,n),new jr(e.firestore,e.converter,Cc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vh extends p0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vh(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fi(i,o)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ts(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function cI(t,e="asc"){const n=e,r=mh("orderBy",t);return vh._create(r,n)}function Cp(t,e,n){if(typeof(n=tn(n))=="string"){if(n==="")throw new H(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vv(e)&&n.indexOf("/")!==-1)throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!J.isDocumentKey(r))throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hm(t,new J(r))}if(n instanceof wt)return Hm(t,n._key);throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pl(n)}.`)}function jp(t,e){if(!Array.isArray(t)||t.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g0(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dI{convertValue(e,n="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Pe(o.doubleValue));return new uh(i)}convertGeoPoint(e){return new lh(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ud(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const n=Wn(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);me(Uv(r));const s=new Mi(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class y0 extends m0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ia extends y0{data(e={}){return super.data(e)}}class fI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ti(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ia(this._firestore,this._userDataWriter,r.key,r,new ti(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new ia(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ti(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new ia(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ti(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:mI(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class v0 extends dI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function pI(t,e,n,...r){t=Bn(t,wt);const s=Bn(t.firestore,gs),i=dh(s);let o;return o=typeof(e=tn(e))=="string"||e instanceof yl?sI(i,"updateDoc",t._key,e,n,r):rI(i,"updateDoc",t._key,e),xh(s,[o.toMutation(t._key,Ht.exists(!0))])}function gI(t){return xh(Bn(t.firestore,gs),[new Qd(t._key,Ht.none())])}function yI(t,e){const n=Bn(t.firestore,gs),r=Lc(t),s=hI(t.converter,e);return xh(n,[nI(dh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function vI(t,...e){var n,r,s;t=tn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ip(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Ip(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,h,m;if(t instanceof wt)h=Bn(t.firestore,gs),m=$d(t._key.path),c={next:p=>{e[o]&&e[o](xI(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Bn(t,jr);h=Bn(p.firestore,gs),m=p._query;const _=new v0(h);c={next:C=>{e[o]&&e[o](new fI(h,_,p,C))},error:e[o+1],complete:e[o+2]},lI(t._query)}return function(_,C,S,P){const D=new HN(P),I=new jN(C,D,S);return _.asyncQueue.enqueueAndForget(async()=>TN(await vp(_),I)),()=>{D.Za(),_.asyncQueue.enqueueAndForget(async()=>NN(await vp(_),I))}}(l0(h),m,u,c)}function xh(t,e){return function(r,s){const i=new fr;return r.asyncQueue.enqueueAndForget(async()=>MN(await KN(r),s,i)),i.promise}(l0(t),e)}function xI(t,e,n){const r=n.docs.get(e._key),s=new v0(t);return new y0(t,s,e._key,r,new ti(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Es=s})(e1),ba(new Vi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new gs(new f1(r.getProvider("auth-internal")),new y1(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mi(h.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),ts(Um,"4.7.3",e),ts(Um,"4.7.3","esm2017")})();var _I="firebase",wI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(_I,wI,"app");const EI={apiKey:"AIzaSyA_ddlLI6vYKoW_I1MIUStTME7NxXXb46Y",authDomain:"solarie-acessorios.firebaseapp.com",projectId:"solarie-acessorios",storageBucket:"solarie-acessorios.firebasestorage.app",messagingSenderId:"238111392073",appId:"1:238111392073:web:14732f6e219e5ee06c9a98",measurementId:"G-VF07SL4T0F"},TI=Jy(EI),zo=XN(TI),jt=t=>{const[e,n]=W.useState([]),[r,s]=W.useState(!0),[i,o]=W.useState(null);return W.useEffect(()=>{const m=Tp(zo,t),p=uI(m,cI("createdAt","desc")),_=vI(p,C=>{const S=C.docs.map(P=>{const D=P.data(),I=w=>{if(w instanceof De)return w.toDate();if(Array.isArray(w))return w.map(T=>I(T));if(typeof w=="object"&&w!==null){const T={};return Object.keys(w).forEach(b=>{T[b]=I(w[b])}),T}return w};return{id:P.id,...I(D)}});n(S),s(!1)},C=>{o(C.message),s(!1)});return()=>_()},[t]),{data:e,loading:r,error:i,add:async m=>{try{s(!0);const p=await yI(Tp(zo,t),{...m,createdAt:new Date,updatedAt:new Date});return s(!1),p.id}catch(p){throw o(p.message),s(!1),p}},update:async(m,p)=>{try{s(!0);const _=Lc(zo,t,m);await pI(_,{...p,updatedAt:new Date}),s(!1)}catch(_){throw o(_.message),s(!1),_}},remove:async m=>{try{s(!0),await gI(Lc(zo,t,m)),s(!1)}catch(p){throw o(p.message),s(!1),p}}}},NI=(t,e)=>e===0?0:t/e,II=(t,e,n,r)=>t+e+n+r,CI=(t,e,n,r,s,i)=>{const c=(t+e+n)*(1+r/100)+s,m=1-Math.max(0,Math.min(100,i))/100;return m>0?c/m:c},jI=(t,e)=>t-e,SI=t=>{const e=t.reduce((r,s)=>r+s.subtotal,0),n=t.reduce((r,s)=>{const i=(s.precoUnitario-s.joia.custoAquisicao)*s.quantidade;return r+i},0);return{valorTotal:e,lucroReal:n}},X=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),x0=t=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t),_0=t=>{const e=t.length,n=t.filter(u=>u.status==="disponivel").length,r=t.filter(u=>u.status==="vendida").length,s=t.reduce((u,c)=>u+c.custoAquisicao*c.quantidade,0),i=t.filter(u=>u.status==="disponivel").reduce((u,c)=>u+c.precoVendaFinal*c.quantidade,0),o=i-s;return{totalJoias:e,joiasDisponiveis:n,joiasVendidas:r,valorInvestido:s,valorEstoque:i,lucroTotal:o}},Sp=({joiaEdicao:t,onFinishEdicao:e})=>{const{add:n,update:r,loading:s,data:i}=jt("joias"),[o,u]=W.useState({codigo:"",nome:"",categoria:"",quantidade:1,material:"",fornecedor:"",dataCompra:new Date().toISOString().split("T")[0],precoPorPeca:0,freteTotal:0,totalPecasCompra:1,custoEmbalagem:0,outrosCustos:0,margemLucro:100,taxaCredito:5}),[c,h]=W.useState({fretePorPeca:0,custoAquisicao:0,precoVendaFinal:0,lucroEsperado:0}),[m,p]=W.useState({}),[_,C]=W.useState(!1);W.useEffect(()=>{t&&u({codigo:t.codigo,nome:t.nome,categoria:t.categoria,quantidade:t.quantidade,material:t.material,fornecedor:t.fornecedor,dataCompra:new Date(t.dataCompra).toISOString().split("T")[0],precoPorPeca:t.precoPorPeca,freteTotal:t.freteTotal,totalPecasCompra:t.totalPecasCompra,custoEmbalagem:t.custoEmbalagem,outrosCustos:t.outrosCustos,margemLucro:t.margemLucro,taxaCredito:t.taxaCredito})},[t]),W.useEffect(()=>{const w=NI(o.freteTotal,o.totalPecasCompra),T=II(o.precoPorPeca,w,o.custoEmbalagem,o.outrosCustos),b=CI(o.precoPorPeca,w,o.outrosCustos,o.margemLucro,o.custoEmbalagem,o.taxaCredito),R=jI(b,T);h({fretePorPeca:w,custoAquisicao:T,precoVendaFinal:b,lucroEsperado:R})},[o.precoPorPeca,o.freteTotal,o.totalPecasCompra,o.custoEmbalagem,o.outrosCustos,o.margemLucro,o.taxaCredito]);const S=w=>w.replace(/\S+/g,T=>T.charAt(0).toUpperCase()+T.slice(1).toLowerCase()),P=w=>{const{name:T,value:b,type:R}=w.target;let k=R==="number"?parseFloat(b)||0:b;T==="codigo"&&(k=b.toUpperCase()),(T==="nome"||T==="material"||T==="fornecedor")&&(k=S(b)),u(x=>({...x,[T]:k})),m[T]&&p(x=>({...x,[T]:""}))},D=()=>{const w={};return o.codigo.trim()||(w.codigo="Código é obrigatório"),o.nome.trim()||(w.nome="Nome é obrigatório"),o.categoria.trim()||(w.categoria="Categoria é obrigatória"),o.material.trim()||(w.material="Material é obrigatório"),o.fornecedor.trim()||(w.fornecedor="Fornecedor é obrigatório"),o.quantidade<=0&&(w.quantidade="Quantidade deve ser maior que zero"),o.precoPorPeca<=0&&(w.precoPorPeca="Preço por peça deve ser maior que zero"),o.totalPecasCompra<=0&&(w.totalPecasCompra="Total de peças da compra deve ser maior que zero"),p(w),Object.keys(w).length===0},I=async w=>{if(w.preventDefault(),!!D())try{if(t)await r(t.id,{...o,dataCompra:new Date(`${o.dataCompra}T12:00:00`),fretePorPeca:c.fretePorPeca,custoAquisicao:c.custoAquisicao,precoVendaFinal:c.precoVendaFinal,lucroEsperado:c.lucroEsperado});else{const T={...o,dataCompra:new Date(`${o.dataCompra}T12:00:00`),fretePorPeca:c.fretePorPeca,custoAquisicao:c.custoAquisicao,precoVendaFinal:c.precoVendaFinal,lucroEsperado:c.lucroEsperado,status:"disponivel"};await n(T)}C(!0),setTimeout(()=>C(!1),3e3),u({codigo:"",nome:"",categoria:"",quantidade:1,material:"",fornecedor:"",dataCompra:new Date().toISOString().split("T")[0],precoPorPeca:0,freteTotal:0,totalPecasCompra:1,custoEmbalagem:0,outrosCustos:0,margemLucro:100,taxaCredito:5}),e&&e()}catch(T){console.error("Erro ao cadastrar joia:",T)}};return l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(qy,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Cadastrar Nova Joia"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Adicione uma nova joia ao seu estoque com cálculos automáticos de preços"}),t&&l.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:["Editando joia já cadastrada: ",l.jsx("strong",{children:t.codigo})," - ",t.nome]}),!t&&i&&i.length>0&&l.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:["Última joia cadastrada: ",l.jsx("strong",{children:i[0].codigo})," - ",i[0].nome]})]}),_&&l.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[l.jsx("div",{className:"h-4 w-4 bg-green-500 rounded-full mr-3"}),l.jsx("span",{className:"text-green-800 font-medium",children:"Joia cadastrada com sucesso!"})]}),l.jsxs("form",{onSubmit:I,className:"space-y-6",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Básicas"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código *"}),l.jsx("input",{type:"text",name:"codigo",value:o.codigo,onChange:P,className:`input-field ${m.codigo?"border-red-500":""}`,placeholder:"Ex: JOI001"}),m.codigo&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.codigo]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),l.jsx("input",{type:"text",name:"nome",value:o.nome,onChange:P,className:`input-field ${m.nome?"border-red-500":""}`,placeholder:"Ex: Anel de Ouro"}),m.nome&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.nome]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria *"}),l.jsxs("select",{name:"categoria",value:o.categoria,onChange:P,className:`input-field ${m.categoria?"border-red-500":""}`,children:[l.jsx("option",{value:"",children:"Selecione..."}),l.jsx("option",{value:"Anéis",children:"Anéis"}),l.jsx("option",{value:"Brincos",children:"Brincos"}),l.jsx("option",{value:"Colares",children:"Colares"}),l.jsx("option",{value:"Pulseiras",children:"Pulseiras"}),l.jsx("option",{value:"Pingentes",children:"Pingentes"}),l.jsx("option",{value:"Conjuntos",children:"Conjuntos"}),l.jsx("option",{value:"Outros",children:"Outros"})]}),m.categoria&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.categoria]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade *"}),l.jsx("input",{type:"number",name:"quantidade",value:o.quantidade,onChange:P,min:"1",className:`input-field ${m.quantidade?"border-red-500":""}`}),m.quantidade&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.quantidade]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material *"}),l.jsx("input",{type:"text",name:"material",value:o.material,onChange:P,className:`input-field ${m.material?"border-red-500":""}`,placeholder:"Ex: Ouro 18k"}),m.material&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.material]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor *"}),l.jsx("input",{type:"text",name:"fornecedor",value:o.fornecedor,onChange:P,className:`input-field ${m.fornecedor?"border-red-500":""}`,placeholder:"Ex: Joias & Cia"}),m.fornecedor&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.fornecedor]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Compra"}),l.jsx("input",{type:"date",name:"dataCompra",value:o.dataCompra,onChange:P,className:"input-field"})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[l.jsx(jw,{className:"h-5 w-5 mr-2 text-solarie-600"}),"Custos e Cálculo de Preços"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preço por Peça *"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"R$"}),l.jsx("input",{type:"number",name:"precoPorPeca",value:o.precoPorPeca,onChange:P,step:"0.01",min:"0",className:`input-field pl-10 ${m.precoPorPeca?"border-red-500":""}`,placeholder:"0,00"})]}),m.precoPorPeca&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.precoPorPeca]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frete Total da Compra"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"R$"}),l.jsx("input",{type:"number",name:"freteTotal",value:o.freteTotal,onChange:P,step:"0.01",min:"0",className:"input-field pl-10",placeholder:"0,00"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total de Peças na Compra *"}),l.jsx("input",{type:"number",name:"totalPecasCompra",value:o.totalPecasCompra,onChange:P,min:"1",className:`input-field ${m.totalPecasCompra?"border-red-500":""}`}),m.totalPecasCompra&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),m.totalPecasCompra]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo de Embalagem"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"R$"}),l.jsx("input",{type:"number",name:"custoEmbalagem",value:o.custoEmbalagem,onChange:P,step:"0.01",min:"0",className:"input-field pl-10",placeholder:"0,00"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outros Custos por Peça"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"R$"}),l.jsx("input",{type:"number",name:"outrosCustos",value:o.outrosCustos,onChange:P,step:"0.01",min:"0",className:"input-field pl-10",placeholder:"0,00"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margem de Lucro (%)"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",name:"margemLucro",value:o.margemLucro,onChange:P,step:"0.01",min:"0",className:"input-field pr-8",placeholder:"100"}),l.jsx("span",{className:"absolute right-3 top-2 text-gray-500",children:"%"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Taxa Crédito Fixa (%)"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",name:"taxaCredito",value:o.taxaCredito,onChange:P,step:"0.01",min:"0",className:"input-field pr-8",placeholder:"5"}),l.jsx("span",{className:"absolute right-3 top-2 text-gray-500",children:"%"})]})]})]}),l.jsxs("div",{className:"bg-solarie-50 p-4 rounded-lg border border-solarie-200",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Valores Calculados"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Frete por Peça"}),l.jsx("p",{className:"font-semibold text-gray-900",children:X(c.fretePorPeca)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Custo de Aquisição"}),l.jsx("p",{className:"font-semibold text-gray-900",children:X(c.custoAquisicao)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Preço de Venda Final"}),l.jsx("p",{className:"font-semibold text-solarie-700 text-lg",children:X(c.precoVendaFinal)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Lucro Esperado"}),l.jsx("p",{className:"font-semibold text-green-600",children:X(c.lucroEsperado)})]})]})]})]}),l.jsxs("div",{className:"flex justify-end items-center space-x-3",children:[l.jsxs("button",{type:"submit",disabled:s,className:"btn-primary flex items-center px-6 py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(bd,{className:"h-4 w-4 mr-2"}),s?"Salvando...":t?"Salvar Edição":"Salvar Joia"]}),_&&l.jsx("span",{className:"text-green-700 text-sm",children:"Salvo com sucesso!"})]})]})]})},AI=({onEditarJoia:t})=>{const{data:e,loading:n,remove:r}=jt("joias"),[s,i]=W.useState({codigo:"",nome:"",categoria:"",status:"todos",material:"",fornecedor:""}),[o,u]=W.useState(null),[c,h]=W.useState(!1),[m,p]=W.useState(null),_=W.useMemo(()=>e.filter(b=>(s.codigo===""||b.codigo.toLowerCase().includes(s.codigo.toLowerCase()))&&(s.nome===""||b.nome.toLowerCase().includes(s.nome.toLowerCase()))&&(s.categoria===""||b.categoria===s.categoria)&&(s.status==="todos"||b.status===s.status)&&(s.material===""||b.material.toLowerCase().includes(s.material.toLowerCase()))&&(s.fornecedor===""||b.fornecedor.toLowerCase().includes(s.fornecedor.toLowerCase()))).sort((b,R)=>{if(b.status!==R.status)return b.status==="disponivel"?-1:1;const k=b.codigo.toLowerCase(),x=R.codigo.toLowerCase();return k!==x?k.localeCompare(x):b.nome.toLowerCase().localeCompare(R.nome.toLowerCase())}),[e,s]),C=W.useMemo(()=>_0(e),[e]),S=T=>{const{name:b,value:R}=T.target;i(k=>({...k,[b]:R}))},P=()=>{i({codigo:"",nome:"",categoria:"",status:"todos",material:"",fornecedor:""})},D=async T=>{p(T),h(!0)},I=async()=>{if(m)try{await r(m.id),h(!1),p(null)}catch(T){console.error("Erro ao excluir joia:",T)}},w=T=>{switch(T){case"disponivel":return l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Disponível"});case"vendida":return l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Vendida"});default:return l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:T})}};return n?l.jsxs("div",{className:"p-6 flex items-center justify-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solarie-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando estoque..."})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(es,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Gerenciar Estoque"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Visualize e gerencie todas as joias do seu estoque"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(es,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Joias"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.totalJoias})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Pa,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disponíveis"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:C.joiasDisponiveis})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(An,{className:"h-8 w-8 text-solarie-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor do Estoque"}),l.jsx("p",{className:"text-2xl font-bold text-solarie-700",children:X(C.valorEstoque)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Wi,{className:"h-8 w-8 text-purple-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Esperado"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:X(C.lucroTotal)})]})]})})]}),l.jsxs("div",{className:"card mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[l.jsx(Rd,{className:"h-5 w-5 mr-2"}),"Filtros"]}),l.jsx("button",{onClick:P,className:"text-sm text-gray-500 hover:text-gray-700",children:"Limpar Filtros"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ri,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",name:"codigo",value:s.codigo,onChange:S,className:"input-field pl-9",placeholder:"Buscar por código..."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ri,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",name:"nome",value:s.nome,onChange:S,className:"input-field pl-9",placeholder:"Buscar por nome..."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),l.jsxs("select",{name:"categoria",value:s.categoria,onChange:S,className:"input-field",children:[l.jsx("option",{value:"",children:"Todas as categorias"}),l.jsx("option",{value:"Anéis",children:"Anéis"}),l.jsx("option",{value:"Brincos",children:"Brincos"}),l.jsx("option",{value:"Colares",children:"Colares"}),l.jsx("option",{value:"Pulseiras",children:"Pulseiras"}),l.jsx("option",{value:"Pingentes",children:"Pingentes"}),l.jsx("option",{value:"Conjuntos",children:"Conjuntos"}),l.jsx("option",{value:"Outros",children:"Outros"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsxs("select",{name:"status",value:s.status,onChange:S,className:"input-field",children:[l.jsx("option",{value:"todos",children:"Todos os status"}),l.jsx("option",{value:"disponivel",children:"Disponível"}),l.jsx("option",{value:"vendida",children:"Vendida"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material"}),l.jsx("input",{type:"text",name:"material",value:s.material,onChange:S,className:"input-field",placeholder:"Buscar por material..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor"}),l.jsx("input",{type:"text",name:"fornecedor",value:s.fornecedor,onChange:S,className:"input-field",placeholder:"Buscar por fornecedor..."})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Joias (",_.length,")"]})}),_.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(es,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Nenhuma joia encontrada com os filtros aplicados"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código / Nome"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria / Material"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Cliente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lucro"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(T=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.codigo}),l.jsx("div",{className:"text-sm text-gray-500",children:T.nome})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-900",children:T.categoria}),l.jsx("div",{className:"text-sm text-gray-500",children:T.material})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:T.quantidade})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-solarie-600",children:X(T.precoVendaFinal)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-green-600",children:X(T.lucroEsperado)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(T.status)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>u(T),className:"text-blue-600 hover:text-blue-900",title:"Ver detalhes",children:l.jsx(Pa,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>t&&t(T),className:"text-yellow-600 hover:text-yellow-900",title:"Editar",children:l.jsx(Vd,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>D(T),className:"text-red-600 hover:text-red-900",title:"Excluir",children:l.jsx(il,{className:"h-4 w-4"})})]})})]},T.id))})]})})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Detalhes da Joia"}),l.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Fn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Informações Básicas"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Código:"})," ",l.jsx("span",{className:"font-medium",children:o.codigo})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Nome:"})," ",l.jsx("span",{className:"font-medium",children:o.nome})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Categoria:"})," ",l.jsx("span",{className:"font-medium",children:o.categoria})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Material:"})," ",l.jsx("span",{className:"font-medium",children:o.material})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Fornecedor:"})," ",l.jsx("span",{className:"font-medium",children:o.fornecedor})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Quantidade:"})," ",l.jsx("span",{className:"font-medium",children:o.quantidade})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Data da Compra:"})," ",l.jsx("span",{className:"font-medium",children:x0(o.dataCompra)})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Valores e Custos"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Preço por Peça:"})," ",l.jsx("span",{className:"font-medium",children:X(o.precoPorPeca)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Frete por Peça:"})," ",l.jsx("span",{className:"font-medium",children:X(o.fretePorPeca)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Custo Embalagem:"})," ",l.jsx("span",{className:"font-medium",children:X(o.custoEmbalagem)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Outros Custos:"})," ",l.jsx("span",{className:"font-medium",children:X(o.outrosCustos)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Custo de Aquisição:"})," ",l.jsx("span",{className:"font-medium text-red-600",children:X(o.custoAquisicao)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Preço de Venda:"})," ",l.jsx("span",{className:"font-medium text-solarie-600",children:X(o.precoVendaFinal)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Lucro Esperado:"})," ",l.jsx("span",{className:"font-medium text-green-600",children:X(o.lucroEsperado)})]})]})]})]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:()=>u(null),className:"btn-secondary",children:"Fechar"})})]})}),c&&m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(kt,{className:"h-6 w-6 text-red-600 mr-2"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar Exclusão"})]}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Tem certeza que deseja excluir a joia ",l.jsx("strong",{children:m.nome})," (Código: ",m.codigo,")? Esta ação não pode ser desfeita."]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{onClick:()=>h(!1),className:"btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:I,className:"btn-danger",children:"Excluir"})]})]})})]})},PI=()=>{const{data:t,update:e}=jt("joias"),{add:n,loading:r}=jt("vendas"),[s,i]=W.useState(""),[o,u]=W.useState(new Date().toISOString().split("T")[0]),[c,h]=W.useState("dinheiro"),[m,p]=W.useState("nao"),[_,C]=W.useState([]),[S,P]=W.useState(""),[D,I]=W.useState({}),[w,T]=W.useState(!1),b=W.useMemo(()=>t.filter(v=>v.status==="disponivel"&&v.quantidade>0&&(S===""||v.codigo.toLowerCase().includes(S.toLowerCase())||v.nome.toLowerCase().includes(S.toLowerCase()))),[t,S]),R=W.useMemo(()=>SI(_),[_]),k=v=>{const G=v.precoVendaFinal;if(c==="dinheiro"&&m==="sim"){const ie=v.taxaCredito||0;return G*(1-ie/100)}return G},x=v=>{const G=_.find(ie=>ie.joiaId===v.id);if(G)G.quantidade<v.quantidade&&C(ie=>ie.map(oe=>oe.joiaId===v.id?{...oe,quantidade:oe.quantidade+1,subtotal:(oe.quantidade+1)*oe.precoUnitario}:oe));else{const ie=k(v),oe={joiaId:v.id,joia:v,quantidade:1,precoUnitario:ie,subtotal:ie};C(U=>[...U,oe])}P("")},y=v=>{C(G=>G.filter(ie=>ie.joiaId!==v))},E=(v,G)=>{if(G<=0){y(v);return}C(ie=>ie.map(oe=>{if(oe.joiaId===v){const U=oe.joia.quantidade,M=Math.min(G,U);return{...oe,quantidade:M,subtotal:M*oe.precoUnitario}}return oe}))},N=(v,G)=>{C(ie=>ie.map(oe=>oe.joiaId===v?{...oe,precoUnitario:G,subtotal:oe.quantidade*G}:oe))},j=()=>{const v={};s.trim()||(v.nomeCliente="Nome da cliente é obrigatório"),_.length===0&&(v.itens="Adicione pelo menos uma joia à venda");for(const G of _)if(G.quantidade>G.joia.quantidade){v.quantidade=`Quantidade insuficiente para ${G.joia.nome}`;break}return I(v),Object.keys(v).length===0};W.useEffect(()=>{C(v=>v.map(G=>{const ie=k(G.joia);return{...G,precoUnitario:ie,subtotal:ie*G.quantidade}}))},[c,m]);const A=async()=>{if(j())try{const G={nomeCliente:(ie=>ie.replace(/\S+/g,oe=>oe.charAt(0).toUpperCase()+oe.slice(1).toLowerCase()))(s),dataVenda:new Date(`${o}T12:00:00`),formaPagamento:c,itens:_,valorTotal:R.valorTotal,lucroReal:R.lucroReal};await n(G);for(const ie of _){const oe=ie.joia.quantidade-ie.quantidade,U=oe===0?"vendida":"disponivel";await e(ie.joiaId,{quantidade:oe,status:U})}T(!0),setTimeout(()=>T(!1),3e3),i(""),u(new Date().toISOString().split("T")[0]),h("dinheiro"),p("nao"),C([]),P(""),I({})}catch(v){console.error("Erro ao finalizar venda:",v)}};return l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(ka,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Registrar Venda"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Registre uma nova venda e atualize automaticamente o estoque"})]}),w&&l.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[l.jsx("div",{className:"h-4 w-4 bg-green-500 rounded-full mr-3"}),l.jsx("span",{className:"text-green-800 font-medium",children:"Venda registrada com sucesso!"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"card",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[l.jsx($y,{className:"h-5 w-5 mr-2"}),"Informações da Venda"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Cliente *"}),l.jsx("input",{type:"text",value:s,onChange:v=>i(v.target.value.replace(/\S+/g,G=>G.charAt(0).toUpperCase()+G.slice(1).toLowerCase())),className:`input-field ${D.nomeCliente?"border-red-500":""}`,placeholder:"Digite o nome da cliente..."}),D.nomeCliente&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[l.jsx(kt,{className:"h-3 w-3 mr-1"}),D.nomeCliente]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Venda"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",value:o,onChange:v=>u(v.target.value),className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pagamento"}),l.jsxs("div",{className:"relative",children:[l.jsx(By,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsxs("select",{value:c,onChange:v=>h(v.target.value),className:"input-field pl-9",children:[l.jsx("option",{value:"dinheiro",children:"Dinheiro/PIX"}),l.jsx("option",{value:"credito",children:"Cartão de Crédito"}),l.jsx("option",{value:"debito",children:"Cartão de Débito"})]})]})]}),c==="dinheiro"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desconto Taxa Crédito"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:"descontoTaxa",checked:m==="sim",onChange:()=>p("sim")}),l.jsx("span",{children:"Sim"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:"descontoTaxa",checked:m==="nao",onChange:()=>p("nao")}),l.jsx("span",{children:"Não"})]})]})]})]}),_.length>0&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Resumo da Venda"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),l.jsx("span",{className:"font-semibold text-lg",children:X(R.valorTotal)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Lucro Real:"}),l.jsx("span",{className:"font-semibold text-green-600",children:X(R.lucroReal)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"Itens:"}),l.jsxs("span",{children:[_.reduce((v,G)=>v+G.quantidade,0)," peças"]})]})]}),l.jsxs("button",{onClick:A,disabled:r||_.length===0,className:"w-full mt-4 btn-primary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(bd,{className:"h-4 w-4 mr-2"}),r?"Finalizando...":"Finalizar Venda"]})]})]})}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsxs("div",{className:"card mb-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[l.jsx(Ri,{className:"h-5 w-5 mr-2"}),"Buscar Joias"]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(Ri,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",value:S,onChange:v=>P(v.target.value),className:"input-field pl-9",placeholder:"Busque por código ou nome da joia..."})]}),D.itens&&l.jsxs("p",{className:"text-red-500 text-sm mb-4 flex items-center",children:[l.jsx(kt,{className:"h-4 w-4 mr-1"}),D.itens]}),D.quantidade&&l.jsxs("p",{className:"text-red-500 text-sm mb-4 flex items_center",children:[l.jsx(kt,{className:"h-4 w-4 mr-1"}),D.quantidade]}),S&&l.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:b.length===0?l.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma joia encontrada"}):l.jsx("div",{className:"divide-y divide-gray-200",children:b.map(v=>l.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>x(v),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium text-gray-900",children:[v.codigo," - ",v.nome]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[v.categoria," • ",v.material," • Qtd: ",v.quantidade]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-semibold text-solarie-600",children:X(v.precoVendaFinal)}),l.jsx("div",{className:"text-xs text-gray-500",children:"por peça"})]})]})},v.id))})})]}),l.jsxs("div",{className:"card",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Itens da Venda (",_.length,")"]}),_.length===0?l.jsxs("div",{className:"text-center py-8 text_gray-500",children:[l.jsx(ka,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),l.jsx("p",{children:"Nenhuma joia adicionada à venda"}),l.jsx("p",{className:"text-sm",children:"Use a busca acima para adicionar joias"})]}):l.jsx("div",{className:"space-y-4",children:_.map(v=>l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium text-gray-900",children:[v.joia.codigo," - ",v.joia.nome]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[v.joia.categoria," • ",v.joia.material]}),l.jsxs("div",{className:"text-xs text-gray-400",children:["Disponível: ",v.joia.quantidade," peças"]})]}),l.jsx("button",{onClick:()=>y(v.joiaId),className:"text-red-600 hover:text-red-800",children:l.jsx(il,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Quantidade"}),l.jsxs("div",{className:"flex items_center",children:[l.jsx("button",{onClick:()=>E(v.joiaId,v.quantidade-1),className:"p-1 text-gray-600 hover:text-gray-800",children:l.jsx(Rw,{className:"h-4 w-4"})}),l.jsx("input",{type:"number",value:v.quantidade,onChange:G=>E(v.joiaId,parseInt(G.target.value)||0),min:"1",max:v.joia.quantidade,className:"w-16 text-center border border-gray-300 rounded px-2 py-1 mx-2"}),l.jsx("button",{onClick:()=>E(v.joiaId,v.quantidade+1),disabled:v.quantidade>=v.joia.quantidade,className:"p-1 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(qy,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Preço Unitário"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-1.5 text-xs text-gray-500",children:"R$"}),l.jsx("input",{type:"number",value:v.precoUnitario,onChange:G=>N(v.joiaId,parseFloat(G.target.value)||0),step:"0.01",min:"0",className:"w-full pl-6 pr-2 py-1 border border-gray-300 rounded text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Subtotal"}),l.jsx("div",{className:"py-1 px-2 bg-white border border-gray-300 rounded text-sm font-semibold text-solarie-600",children:X(v.subtotal)})]})]})]},v.joiaId))})]})]})]})]})},kI=()=>{const{data:t,loading:e,update:n,remove:r}=jt("vendas"),{data:s,update:i}=jt("joias"),[o,u]=W.useState({nomeCliente:"",dataInicio:"",dataFim:"",formaPagamento:""}),[c,h]=W.useState(null),[m,p]=W.useState(null),[_,C]=W.useState(null),[S,P]=W.useState({nomeCliente:"",dataVenda:new Date().toISOString().split("T")[0],formaPagamento:"dinheiro"}),[D,I]=W.useState(""),[w,T]=W.useState(""),[b,R]=W.useState([]),k=W.useMemo(()=>t.filter(U=>{const M=new Date(U.dataVenda),q=o.dataInicio?new Date(o.dataInicio):null,Y=o.dataFim?new Date(o.dataFim):null;return(o.nomeCliente===""||U.nomeCliente.toLowerCase().includes(o.nomeCliente.toLowerCase()))&&(o.formaPagamento===""||U.formaPagamento===o.formaPagamento)&&(!q||M>=q)&&(!Y||M<=Y)}),[t,o]),x=W.useMemo(()=>{const U=k.reduce((ne,K)=>ne+K.valorTotal,0),M=k.reduce((ne,K)=>ne+K.lucroReal,0),q=k.length,Y=q>0?U/q:0,he=k.reduce((ne,K)=>(ne[K.formaPagamento]||(ne[K.formaPagamento]={quantidade:0,valor:0}),ne[K.formaPagamento].quantidade+=1,ne[K.formaPagamento].valor+=K.valorTotal,ne),{});return{totalVendas:U,totalLucro:M,quantidadeVendas:q,ticketMedio:Y,estatisticasPagamento:he}},[k]),y=U=>{const{name:M,value:q}=U.target;u(Y=>({...Y,[M]:q}))},E=()=>{u({nomeCliente:"",dataInicio:"",dataFim:"",formaPagamento:""})},N=U=>({dinheiro:"Dinheiro",credito:"Cartão de Crédito",debito:"Cartão de Débito",pix:"PIX",transferencia:"Transferência"})[U]||U,j=U=>{const M={dinheiro:"bg-green-100 text-green-800",credito:"bg-blue-100 text-blue-800",debito:"bg-purple-100 text-purple-800",pix:"bg-orange-100 text-orange-800",transferencia:"bg-gray-100 text-gray-800"};return l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${M[U]||"bg-gray-100 text-gray-800"}`,children:N(U)})},A=U=>U.replace(/\S+/g,M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()),v=U=>{p(U),P({nomeCliente:U.nomeCliente,dataVenda:new Date(U.dataVenda).toISOString().split("T")[0],formaPagamento:U.formaPagamento});const M=Array.isArray(U.itens)?U.itens:[];R(M.map(q=>({...q,joia:{...q.joia}}))),T(""),I("")},G=async()=>{var U,M;if(m)try{T("");const q=b.reduce((K,ge)=>K+ge.subtotal,0),Y=b.reduce((K,ge)=>K+(ge.precoUnitario-ge.joia.custoAquisicao)*ge.quantidade,0),he=new Map;(Array.isArray(m.itens)?m.itens:[]).forEach(K=>{he.set(K.joiaId,(he.get(K.joiaId)||0)+K.quantidade)});const ne=new Map;b.forEach(K=>{var ge;ne.set(K.joiaId,{quantidade:(((ge=ne.get(K.joiaId))==null?void 0:ge.quantidade)||0)+K.quantidade,joia:K.joia})});for(const[K,ge]of ne.entries()){const ft=he.get(K)||0,Le=ge.quantidade-ft;if(Le>0){const Me=s.find(mt=>mt.id===K)||ge.joia;if(Me.quantidade<Le){T(`Estoque insuficiente para ${Me.codigo} - ${Me.nome}. Disponível: ${Me.quantidade}, solicitado: +${Le}`);return}}}for(const[K,ge]of he.entries()){const Le=(((U=ne.get(K))==null?void 0:U.quantidade)||0)-ge,Me=s.find(mt=>mt.id===K)||(Array.isArray(m.itens)?(M=m.itens.find(mt=>mt.joiaId===K))==null?void 0:M.joia:void 0);if(Me&&Le<0){const mt=-Le;await i(K,{quantidade:Me.quantidade+mt,status:"disponivel"})}}for(const[K,ge]of ne.entries()){const ft=he.get(K)||0,Le=ge.quantidade-ft,Me=s.find(mt=>mt.id===K)||ge.joia;if(Le>0){const mt=Me.quantidade-Le;await i(K,{quantidade:mt,status:mt===0?"vendida":"disponivel"})}}await n(m.id,{nomeCliente:A(S.nomeCliente.trim()),dataVenda:new Date(`${S.dataVenda}T12:00:00`),formaPagamento:S.formaPagamento,itens:b,valorTotal:q,lucroReal:Y}),I("Venda atualizada com sucesso!"),setTimeout(()=>I(""),2500),p(null)}catch(q){console.error("Erro ao atualizar venda:",q),T("Erro ao atualizar venda. Tente novamente.")}},ie=U=>{C(U)},oe=async()=>{if(_)try{const U=Array.isArray(_.itens)?_.itens:[];for(const M of U){const q=M.joia.quantidade+M.quantidade;await i(M.joiaId,{quantidade:q,status:"disponivel"})}await r(_.id),I("Venda excluída com sucesso!"),setTimeout(()=>I(""),2500),C(null)}catch(U){console.error("Erro ao excluir venda:",U)}};return e?l.jsxs("div",{className:"p-6 flex items-center justify-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solarie-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando histórico..."})]}):l.jsxs("div",{className:"p-6",children:[w&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:w}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(ea,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Histórico de Vendas"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Acompanhe todas as vendas realizadas e suas estatísticas"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(An,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total em Vendas"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(x.totalVendas)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Wi,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Total"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:X(x.totalLucro)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(ea,{className:"h-8 w-8 text-purple-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Quantidade de Vendas"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.quantidadeVendas})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx($y,{className:"h-8 w-8 text-solarie-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Médio"}),l.jsx("p",{className:"text-2xl font-bold text-solarie-700",children:X(x.ticketMedio)})]})]})})]}),Object.keys(x.estatisticasPagamento).length>0&&l.jsxs("div",{className:"card mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Forma de Pagamento"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(x.estatisticasPagamento).map(([U,M])=>l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"font-medium text-gray-900",children:N(U)}),j(U)]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsxs("p",{children:["Quantidade: ",l.jsxs("span",{className:"font-medium",children:[M.quantidade," vendas"]})]}),l.jsxs("p",{children:["Valor: ",l.jsx("span",{className:"font-medium text-solarie-600",children:X(M.valor)})]})]})]},U))})]}),l.jsxs("div",{className:"card mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[l.jsx(Rd,{className:"h-5 w-5 mr-2"}),"Filtros"]}),l.jsx("button",{onClick:E,className:"text-sm text-gray-500 hover:text-gray-700",children:"Limpar Filtros"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Cliente"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ri,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",name:"nomeCliente",value:o.nomeCliente,onChange:y,className:"input-field pl-9",placeholder:"Buscar por nome..."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Início"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",name:"dataInicio",value:o.dataInicio,onChange:y,className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",name:"dataFim",value:o.dataFim,onChange:y,className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pagamento"}),l.jsxs("div",{className:"relative",children:[l.jsx(By,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsxs("select",{name:"formaPagamento",value:o.formaPagamento,onChange:y,className:"input-field pl-9",children:[l.jsx("option",{value:"",children:"Todas as formas"}),l.jsx("option",{value:"dinheiro",children:"Dinheiro"}),l.jsx("option",{value:"credito",children:"Cartão de Crédito"}),l.jsx("option",{value:"debito",children:"Cartão de Débito"}),l.jsx("option",{value:"pix",children:"PIX"}),l.jsx("option",{value:"transferencia",children:"Transferência"})]})]})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Vendas (",k.length,")"]})}),k.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ea,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Nenhuma venda encontrada com os filtros aplicados"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente / Data"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Forma de Pagamento"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Itens"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lucro"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(U=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.nomeCliente}),l.jsx("div",{className:"text-sm text-gray-500",children:new Date(U.dataVenda).toLocaleDateString("pt-BR")})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j(U.formaPagamento)}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsxs("div",{className:"text-sm text-gray-900",children:[(Array.isArray(U.itens)?U.itens:[]).reduce((M,q)=>M+q.quantidade,0)," peças"]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[(Array.isArray(U.itens)?U.itens:[]).length," item",(Array.isArray(U.itens)?U.itens:[]).length!==1?"s":""]})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:X(U.valorTotal)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-green-600",children:X(U.lucroReal)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>h(U),className:"text-blue-600 hover:text-blue-900",title:"Ver detalhes",children:l.jsx(Pa,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>v(U),className:"text-yellow-600 hover:text-yellow-900",title:"Editar",children:l.jsx(Vd,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>ie(U),className:"text-red-600 hover:text-red-900",title:"Excluir",children:l.jsx(il,{className:"h-4 w-4"})})]})})]},U.id))})]})})]}),D&&l.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:D}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Detalhes da Venda"}),l.jsx("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Fn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Informações da Venda"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Cliente:"})," ",l.jsx("span",{className:"font-medium",children:c.nomeCliente})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Data:"})," ",l.jsx("span",{className:"font-medium",children:x0(c.dataVenda)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Forma de Pagamento:"})," ",l.jsx("span",{className:"font-medium",children:N(c.formaPagamento)})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Resumo Financeiro"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Valor Total:"})," ",l.jsx("span",{className:"font-medium text-lg",children:X(c.valorTotal)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Lucro Real:"})," ",l.jsx("span",{className:"font-medium text-green-600",children:X(c.lucroReal)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total de Itens:"})," ",l.jsxs("span",{className:"font-medium",children:[c.itens.reduce((U,M)=>U+M.quantidade,0)," peças"]})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Itens Vendidos"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Joia"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Código"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Qtd"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Preço Unit."}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subtotal"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.itens.map((U,M)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.joia.nome}),l.jsxs("div",{className:"text-sm text-gray-500",children:[U.joia.categoria," • ",U.joia.material]})]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:U.joia.codigo}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:U.quantidade}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:X(U.precoUnitario)}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-solarie-600",children:X(U.subtotal)})]},M))})]})})]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:()=>h(null),className:"btn-secondary",children:"Fechar"})})]})}),m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Editar Venda"}),l.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Fn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Cliente"}),l.jsx("input",{type:"text",value:S.nomeCliente,onChange:U=>P(M=>({...M,nomeCliente:U.target.value})),className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Venda"}),l.jsx("input",{type:"date",value:S.dataVenda,onChange:U=>P(M=>({...M,dataVenda:U.target.value})),className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pagamento"}),l.jsxs("select",{value:S.formaPagamento,onChange:U=>P(M=>({...M,formaPagamento:U.target.value})),className:"input-field",children:[l.jsx("option",{value:"dinheiro",children:"Dinheiro/PIX"}),l.jsx("option",{value:"credito",children:"Cartão de Crédito"}),l.jsx("option",{value:"debito",children:"Cartão de Débito"})]})]})]}),l.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[l.jsx("button",{onClick:()=>p(null),className:"btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:G,className:"btn-primary",children:"Salvar"})]})]})}),_&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(Fn,{className:"h-6 w-6 text-red-600 mr-2"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excluir Venda"})]}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Tem certeza que deseja excluir esta venda? O estoque das joias será reposto."}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{onClick:()=>C(null),className:"btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:oe,className:"btn-danger",children:"Excluir"})]})]})})]})},RI=()=>{const{data:t,loading:e}=jt("joias"),{data:n,loading:r}=jt("vendas"),[s,i]=W.useState({dataInicio:"",dataFim:"",categoria:"",fornecedor:""}),o=e||r,u=W.useMemo(()=>{const C=s.dataInicio?new Date(s.dataInicio):null,S=s.dataFim?new Date(s.dataFim):null,P=t.filter(I=>{const w=new Date(I.dataCompra);return(s.categoria===""||I.categoria===s.categoria)&&(s.fornecedor===""||I.fornecedor===s.fornecedor)&&(!C||w>=C)&&(!S||w<=S)}),D=n.filter(I=>{const w=new Date(I.dataVenda);return(!C||w>=C)&&(!S||w<=S)});return{joiasFiltradas:P,vendasFiltradas:D}},[t,n,s]),c=W.useMemo(()=>{const{joiasFiltradas:C,vendasFiltradas:S}=u,P=_0(C),D=S.reduce((T,b)=>T+b.valorTotal,0),I=S.reduce((T,b)=>T+b.lucroReal,0),w=S.length;return{...P,totalVendasPeriodo:D,lucroRealPeriodo:I,quantidadeVendasPeriodo:w}},[u]),h=W.useMemo(()=>{const{vendasFiltradas:C}=u,S=new Map;return C.forEach(P=>{const D=new Date(P.dataVenda),I=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`,w=D.toLocaleDateString("pt-BR",{month:"long",year:"numeric"});S.has(I)||S.set(I,{mes:w,ano:D.getFullYear(),joiasVendidas:0,totalVendas:0,lucroTotal:0});const T=Array.isArray(P.itens)?P.itens:[],b=S.get(I);b.joiasVendidas+=T.reduce((R,k)=>R+k.quantidade,0),b.totalVendas+=P.valorTotal,b.lucroTotal+=P.lucroReal}),Array.from(S.values()).sort((P,D)=>D.ano-P.ano)},[u]),m=C=>{const{name:S,value:P}=C.target;i(D=>({...D,[S]:P}))},p=()=>{i({dataInicio:"",dataFim:"",categoria:"",fornecedor:""})},_=()=>{console.log("Exportar relatório:",{estatisticasGerais:c,relatorioMensal:h})};return o?l.jsxs("div",{className:"p-6 flex items-center justify-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solarie-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando relatórios..."})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(zy,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Relatórios"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Análise completa do seu negócio com métricas detalhadas"})]}),l.jsxs("div",{className:"card mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[l.jsx(Rd,{className:"h-5 w-5 mr-2"}),"Filtros do Relatório"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:p,className:"text-sm text-gray-500 hover:text-gray-700",children:"Limpar Filtros"}),l.jsxs("button",{onClick:_,className:"btn-secondary text-sm flex items-center",children:[l.jsx(Sw,{className:"h-4 w-4 mr-1"}),"Exportar"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Início"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",name:"dataInicio",value:s.dataInicio,onChange:m,className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",name:"dataFim",value:s.dataFim,onChange:m,className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),l.jsxs("select",{name:"categoria",value:s.categoria,onChange:m,className:"input-field",children:[l.jsx("option",{value:"",children:"Todas as categorias"}),l.jsx("option",{value:"Anéis",children:"Anéis"}),l.jsx("option",{value:"Brincos",children:"Brincos"}),l.jsx("option",{value:"Colares",children:"Colares"}),l.jsx("option",{value:"Pulseiras",children:"Pulseiras"}),l.jsx("option",{value:"Pingentes",children:"Pingentes"}),l.jsx("option",{value:"Conjuntos",children:"Conjuntos"}),l.jsx("option",{value:"Outros",children:"Outros"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor"}),l.jsx("input",{type:"text",name:"fornecedor",value:s.fornecedor,onChange:m,className:"input-field",placeholder:"Filtrar por fornecedor..."})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(es,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Joias"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.totalJoias}),l.jsxs("p",{className:"text-xs text-gray-500",children:[c.joiasDisponiveis," disponíveis"]})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(An,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Investido"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(c.valorInvestido)}),l.jsx("p",{className:"text-xs text-gray-500",children:"Custo total do estoque"})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Wi,{className:"h-8 w-8 text-solarie-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor do Estoque"}),l.jsx("p",{className:"text-2xl font-bold text-solarie-700",children:X(c.valorEstoque)}),l.jsx("p",{className:"text-xs text-gray-500",children:"Valor de venda disponível"})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(ka,{className:"h-8 w-8 text-purple-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas no Período"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:X(c.totalVendasPeriodo)}),l.jsxs("p",{className:"text-xs text-gray-500",children:[c.quantidadeVendasPeriodo," vendas"]})]})]})})]}),h.length>0&&l.jsxs("div",{className:"card mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relatório Mensal Detalhado"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mês"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joias Vendidas"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total de Vendas"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lucro Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((C,S)=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:C.mes})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:C.joiasVendidas})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:X(C.totalVendas)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-green-600",children:X(C.lucroTotal)})})]},S))})]})})]})]})},VI=()=>{const{data:t}=jt("vendas"),{data:e,add:n,update:r,remove:s}=jt("fluxo"),i=W.useMemo(()=>{let k=0,x=0;t.forEach(j=>{const A=Array.isArray(j.itens)?j.itens:[];k+=j.valorTotal,x+=A.reduce((v,G)=>v+(G.joia.custoEmbalagem||0)*G.quantidade,0)});const y=t.reduce((j,A)=>j+A.lucroReal,0),E=e.filter(j=>j.origem==="caixa").reduce((j,A)=>j+A.valor,0),N=e.filter(j=>j.origem==="embalagem").reduce((j,A)=>j+A.valor,0);return{totalVendas:k,lucroTotal:y,valorEmbalagem:x,saldoCaixa:Math.max(0,k-E),saldoEmbalagem:Math.max(0,x-N),saidasCaixa:E,saidasEmbalagem:N}},[t,e]),[o,u]=W.useState({reinvestimento:50,caixaLoja:30,salario:20}),c=(k,x)=>{const y={...o,[k]:Math.max(0,Math.min(100,x))},E=y.reinvestimento+y.caixaLoja+y.salario;if(E>100){const N=["reinvestimento","caixaLoja","salario"].filter(v=>v!==k),j=E-100,A=y[N[0]]+y[N[1]];A>0&&N.forEach(v=>{const G=y[v]/A;y[v]=Math.max(0,y[v]-j*G)})}u(y)},[h,m]=W.useState({data:new Date().toISOString().split("T")[0],descricao:"",origem:"caixa",valor:0}),[p,_]=W.useState(!1),[C,S]=W.useState(null),[P,D]=W.useState({data:new Date().toISOString().split("T")[0],descricao:"",origem:"caixa",valor:0}),I=k=>k.replace(/\S+/g,x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()),w=async()=>{if(!(!h.descricao.trim()||h.valor<=0))try{_(!0),await n({data:new Date(`${h.data}T12:00:00`),descricao:I(h.descricao.trim()),tipo:"saida",origem:h.origem,suborigem:h.origem==="caixa"?h.suborigem||"reinvestimento":void 0,valor:h.valor}),m({data:new Date().toISOString().split("T")[0],descricao:"",origem:"caixa",valor:0})}finally{_(!1)}},T=k=>{S(k),D({data:new Date(k.data).toISOString().split("T")[0],descricao:k.descricao,origem:k.origem,valor:k.valor,suborigem:k.suborigem})},b=async()=>{C&&(!P.descricao.trim()||P.valor<=0||(await r(C.id,{data:new Date(`${P.data}T12:00:00`),descricao:I(P.descricao.trim()),origem:P.origem,valor:P.valor,suborigem:P.origem==="caixa"?P.suborigem||"reinvestimento":void 0}),S(null)))},R=async k=>{await s(k.id)};return l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(An,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Fluxo de Caixa"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Acompanhe entradas das vendas e registre saídas."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(An,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Saldo Caixa"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(i.saldoCaixa)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(An,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Saldo Embalagem"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:X(i.saldoEmbalagem)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Vw,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Vendas"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(i.totalVendas)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(kw,{className:"h-8 w-8 text-purple-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Embalagem"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:X(i.valorEmbalagem)})]})]})}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(An,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Total"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(i.lucroTotal)})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Registrar Saída"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",value:h.data,onChange:k=>m(x=>({...x,data:k.target.value})),className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Origem"}),l.jsxs("select",{value:h.origem,onChange:k=>m(x=>({...x,origem:k.target.value})),className:"input-field",children:[l.jsx("option",{value:"caixa",children:"Caixa"}),l.jsx("option",{value:"embalagem",children:"Embalagem"})]})]}),h.origem==="caixa"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usar saldo de"}),l.jsxs("select",{value:h.suborigem||"reinvestimento",onChange:k=>m(x=>({...x,suborigem:k.target.value})),className:"input-field",children:[l.jsx("option",{value:"reinvestimento",children:"Reinvestimento"}),l.jsx("option",{value:"caixa_loja",children:"Caixa da Loja"}),l.jsx("option",{value:"salario",children:"Salário"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),l.jsx("input",{type:"text",value:h.descricao,onChange:k=>m(x=>({...x,descricao:I(k.target.value)})),className:"input-field",placeholder:"Ex: Compra lote fornecedor X, Salário, Embalagens..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:h.valor,onChange:k=>m(x=>({...x,valor:parseFloat(k.target.value)||0})),className:"input-field"})]})]}),l.jsxs("button",{onClick:w,disabled:p,className:"mt-4 btn-primary flex items-center",children:[l.jsx(bd,{className:"h-4 w-4 mr-2"}),p?"Salvando...":"Registrar Saída"]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Movimentações"}),l.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-gray-200",children:e.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sem movimentações registradas."}):e.map(k=>l.jsx("div",{className:"py-3 text-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:k.descricao}),l.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(k.data).toLocaleDateString("pt-BR")," • Origem: ",k.origem,k.origem==="caixa"&&k.suborigem?` (${k.suborigem==="caixa_loja"?"Caixa da Loja":k.suborigem.charAt(0).toUpperCase()+k.suborigem.slice(1)})`:""]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"text-red-600",children:["- ",X(k.valor)]}),l.jsx("button",{onClick:()=>T(k),className:"text-yellow-600 hover:text-yellow-800",title:"Editar",children:l.jsx(Vd,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>R(k),className:"text-red-600 hover:text-red-800",title:"Excluir",children:l.jsx(il,{className:"h-4 w-4"})})]})]})},k.id))})]})]}),l.jsxs("div",{className:"card mt-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Divisão do Saldo do Caixa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reinvestimento (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:o.reinvestimento,onChange:k=>c("reinvestimento",parseFloat(k.target.value)||0),className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caixa da Loja (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:o.caixaLoja,onChange:k=>c("caixaLoja",parseFloat(k.target.value)||0),className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salário (%)"}),l.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:o.salario,onChange:k=>c("salario",parseFloat(k.target.value)||0),className:"input-field"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded",children:[l.jsx("div",{className:"text-gray-600",children:"Reinvestimento"}),l.jsx("div",{className:"font-semibold text-green-700",children:X(i.saldoCaixa*(o.reinvestimento/100))})]}),l.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[l.jsx("div",{className:"text-gray-600",children:"Caixa da Loja"}),l.jsx("div",{className:"font-semibold text-blue-700",children:X(i.saldoCaixa*(o.caixaLoja/100))})]}),l.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[l.jsx("div",{className:"text-gray-600",children:"Salário"}),l.jsx("div",{className:"font-semibold text-purple-700",children:X(i.saldoCaixa*(o.salario/100))})]})]}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Total: ",(o.reinvestimento+o.caixaLoja+o.salario).toFixed(0),"%"]})]}),C&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Editar Movimentação"}),l.jsx("button",{onClick:()=>S(null),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Fn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data"}),l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"date",value:P.data,onChange:k=>D(x=>({...x,data:k.target.value})),className:"input-field pl-9"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Origem"}),l.jsxs("select",{value:P.origem,onChange:k=>D(x=>({...x,origem:k.target.value})),className:"input-field",children:[l.jsx("option",{value:"caixa",children:"Caixa"}),l.jsx("option",{value:"embalagem",children:"Embalagem"})]})]}),P.origem==="caixa"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usar saldo de"}),l.jsxs("select",{value:P.suborigem||"reinvestimento",onChange:k=>D(x=>({...x,suborigem:k.target.value})),className:"input-field",children:[l.jsx("option",{value:"reinvestimento",children:"Reinvestimento"}),l.jsx("option",{value:"caixa_loja",children:"Caixa da Loja"}),l.jsx("option",{value:"salario",children:"Salário"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),l.jsx("input",{type:"text",value:P.descricao,onChange:k=>D(x=>({...x,descricao:I(k.target.value)})),className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:P.valor,onChange:k=>D(x=>({...x,valor:parseFloat(k.target.value)||0})),className:"input-field"})]})]}),l.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[l.jsx("button",{onClick:()=>S(null),className:"btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:b,className:"btn-primary",children:"Salvar"})]})]})})]})},bI=()=>{const{data:t,loading:e}=jt("joias"),{data:n,loading:r}=jt("vendas"),{data:s,loading:i,update:o}=jt("lotes"),[u,c]=W.useState(null),[h,m]=W.useState(null),[p,_]=W.useState({reinvestimento:50,reservaEmergencia:30,lucroLiquido:20}),C=e||i||r,S=W.useMemo(()=>{const R=new Map;t.forEach(x=>{R.has(x.fornecedor)||R.set(x.fornecedor,[]),R.get(x.fornecedor).push(x)});const k=new Map;return n.forEach(x=>{(Array.isArray(x.itens)?x.itens:[]).forEach(E=>{const N=E.joia.fornecedor,j=k.get(N)||{valorVendido:0,lucroObtido:0,quantidadeVendida:0,valorEmbalagem:0};j.valorVendido+=E.subtotal,j.lucroObtido+=(E.precoUnitario-E.joia.custoAquisicao)*E.quantidade,j.quantidadeVendida+=E.quantidade,j.valorEmbalagem+=(E.joia.custoEmbalagem||0)*E.quantidade,k.set(N,j)})}),Array.from(R.entries()).map(([x,y])=>{const E=y.reduce((q,Y)=>q+Y.custoAquisicao*Y.quantidade,0),N=k.get(x)||{valorVendido:0,lucroObtido:0,quantidadeVendida:0,valorEmbalagem:0},j=N.valorVendido,A=N.lucroObtido,v=y.reduce((q,Y)=>q+Y.quantidade,0),G=N.quantidadeVendida,ie=v>0?G/v*100:0,oe=N.valorEmbalagem,U=s.find(q=>q.fornecedor===x),M=(U==null?void 0:U.divisaoLucro)||{reinvestimento:50,reservaEmergencia:30,lucroLiquido:20};return{id:(U==null?void 0:U.id)||`temp-${x}`,fornecedor:x,joias:y,valorInvestido:E,valorVendido:j,lucroObtido:A,percentualVendido:ie,joiasVendidas:G,valorEmbalagemVendida:oe,divisaoLucro:M,createdAt:(U==null?void 0:U.createdAt)||new Date,updatedAt:(U==null?void 0:U.updatedAt)||new Date}})},[t,s,n]),P=R=>{m(R),c("detalhes")},D=R=>{m(R),_(R.divisaoLucro),c("edicao")},I=async()=>{if(h)try{const R={reinvestimento:p.reinvestimento,reservaEmergencia:p.reservaEmergencia,lucroLiquido:p.lucroLiquido};if(R.reinvestimento+R.reservaEmergencia+R.lucroLiquido!==100){alert("A soma das porcentagens deve ser igual a 100%");return}await o(h.id,{divisaoLucro:R}),c(null),m(null)}catch(R){console.error("Erro ao salvar divisão de lucro:",R)}},w=(R,k)=>{const x={...p,[R]:k},y=Object.values(x).reduce((E,N)=>E+N,0);if(y>100){const E=Object.keys(p).filter(A=>A!==R),N=y-100,j=E.reduce((A,v)=>A+x[v],0);j>0&&E.forEach(A=>{const v=x[A]/j;x[A]=Math.max(0,x[A]-N*v)})}_(x)},T=(R,k)=>({reinvestimento:R*k.reinvestimento/100,reservaEmergencia:R*k.reservaEmergencia/100,lucroLiquido:R*k.lucroLiquido/100}),b=R=>R<25?"bg-red-500":R<50?"bg-yellow-500":R<75?"bg-blue-500":"bg-green-500";return C?l.jsxs("div",{className:"p-6 flex items-center justify-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solarie-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando investimentos..."})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[l.jsx(Wi,{className:"h-6 w-6 mr-2 text-solarie-600"}),"Gestão de Investimentos"]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Acompanhe o desempenho dos seus investimentos por fornecedor"})]}),S.length===0?l.jsxs("div",{className:"card text-center py-12",children:[l.jsx(es,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum investimento encontrado"}),l.jsx("p",{className:"text-gray-500",children:"Cadastre algumas joias para começar a acompanhar seus investimentos por fornecedor."})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(R=>{const k=Math.max(0,R.valorVendido-R.valorEmbalagemVendida||0),x=T(k,R.divisaoLucro);return l.jsxs("div",{className:"card hover:shadow-lg transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:R.fornecedor}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:()=>P(R),className:"p-1 text-blue-600 hover:text-blue-800",title:"Ver detalhes",children:l.jsx(Pa,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>D(R),className:"p-1 text-yellow-600 hover:text-yellow-800",title:"Editar divisão de lucro",children:l.jsx(bw,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[l.jsx("span",{children:"Progresso de Vendas"}),l.jsxs("span",{children:[R.percentualVendido.toFixed(1),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${b(R.percentualVendido)}`,style:{width:`${Math.min(R.percentualVendido,100)}%`}})})]}),l.jsxs("div",{className:"space-y-3 mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Valor Investido:"}),l.jsx("span",{className:"font-medium text-gray-900",children:X(R.valorInvestido)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Valor Vendido:"}),l.jsx("span",{className:"font-medium text-green-600",children:X(R.valorVendido)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Lucro Obtido:"}),l.jsx("span",{className:"font-semibold text-solarie-600",children:X(R.lucroObtido)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total de Joias:"}),l.jsx("span",{className:"font-medium",children:R.joias.reduce((y,E)=>y+E.quantidade,0)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Joias Vendidas:"}),l.jsx("span",{className:"font-medium text-red-600",children:R.joiasVendidas||0})]})]}),R.lucroObtido>0&&l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Distribuição do Lucro"}),l.jsxs("div",{className:"space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-600",children:["Reinvestimento (",R.divisaoLucro.reinvestimento,"%):"]}),l.jsx("span",{className:"font-medium",children:X(x.reinvestimento)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-600",children:["Reserva (",R.divisaoLucro.reservaEmergencia,"%):"]}),l.jsx("span",{className:"font-medium",children:X(x.reservaEmergencia)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-600",children:["Lucro Líquido (",R.divisaoLucro.lucroLiquido,"%):"]}),l.jsx("span",{className:"font-medium text-green-600",children:X(x.lucroLiquido)})]})]})]})]},R.id)})}),u==="detalhes"&&h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Detalhes do Lote - ",h.fornecedor]}),l.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Fn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Resumo Financeiro"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Valor Investido:"}),l.jsx("span",{className:"font-medium",children:X(h.valorInvestido)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Valor Vendido:"}),l.jsx("span",{className:"font-medium text-green-600",children:X(h.valorVendido)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Lucro Obtido:"}),l.jsx("span",{className:"font-semibold text-solarie-600",children:X(h.lucroObtido)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"ROI:"}),l.jsxs("span",{className:"font-medium",children:[h.valorInvestido>0?(h.lucroObtido/h.valorInvestido*100).toFixed(1):0,"%"]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Progresso de Vendas"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Total de Joias:"}),l.jsx("span",{className:"font-medium",children:h.joias.reduce((R,k)=>R+k.quantidade,0)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Joias Vendidas:"}),l.jsx("span",{className:"font-medium text-red-600",children:h.joias.filter(R=>R.status==="vendida").reduce((R,k)=>R+k.quantidade,0)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Joias Disponíveis:"}),l.jsx("span",{className:"font-medium text-green-600",children:h.joias.filter(R=>R.status==="disponivel").reduce((R,k)=>R+k.quantidade,0)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Percentual Vendido:"}),l.jsxs("span",{className:"font-medium",children:[h.percentualVendido.toFixed(1),"%"]})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Joias do Lote"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Código"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Qtd"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Custo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Preço"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.joias.map(R=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:R.codigo}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:R.nome}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:R.categoria}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:R.quantidade}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:X(R.custoAquisicao)}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:X(R.precoVendaFinal)}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.status==="disponivel"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.status==="disponivel"?"Disponível":"Vendida"})})]},R.id))})]})})]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:()=>c(null),className:"btn-secondary",children:"Fechar"})})]})}),u==="edicao"&&h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Editar Divisão de Lucro"}),l.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Fn,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reinvestimento (%)"}),l.jsx("input",{type:"number",value:p.reinvestimento,onChange:R=>w("reinvestimento",parseFloat(R.target.value)||0),min:"0",max:"100",className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reserva de Emergência (%)"}),l.jsx("input",{type:"number",value:p.reservaEmergencia,onChange:R=>w("reservaEmergencia",parseFloat(R.target.value)||0),min:"0",max:"100",className:"input-field"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lucro Líquido (%)"}),l.jsx("input",{type:"number",value:p.lucroLiquido,onChange:R=>w("lucroLiquido",parseFloat(R.target.value)||0),min:"0",max:"100",className:"input-field"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Total:"}),l.jsxs("span",{className:`font-medium ${p.reinvestimento+p.reservaEmergencia+p.lucroLiquido===100?"text-green-600":"text-red-600"}`,children:[(p.reinvestimento+p.reservaEmergencia+p.lucroLiquido).toFixed(1),"%"]})]})})]}),l.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[l.jsx("button",{onClick:()=>c(null),className:"btn-secondary",children:"Cancelar"}),l.jsx("button",{onClick:I,className:"btn-primary",disabled:p.reinvestimento+p.reservaEmergencia+p.lucroLiquido!==100,children:"Salvar"})]})]})})]})},DI=[{id:"cadastrar",label:"Cadastrar Joias",icon:Aw},{id:"estoque",label:"Gerenciar Estoque",icon:es},{id:"vendas",label:"Registrar Vendas",icon:ka},{id:"historico",label:"Histórico",icon:ea},{id:"relatorios",label:"Relatórios",icon:zy},{id:"investimentos",label:"Investimentos",icon:Wi},{id:"fluxo",label:"Fluxo de Caixa",icon:An}];function LI(){const[t,e]=W.useState("cadastrar"),[n,r]=W.useState(!1),[s,i]=W.useState(null),o=()=>{switch(t){case"cadastrar":return l.jsx(Sp,{joiaEdicao:s,onFinishEdicao:()=>i(null)});case"estoque":return l.jsx(AI,{onEditarJoia:u=>{i(u),e("cadastrar")}});case"vendas":return l.jsx(PI,{});case"historico":return l.jsx(kI,{});case"relatorios":return l.jsx(RI,{});case"investimentos":return l.jsx(bI,{});case"fluxo":return l.jsx(VI,{});default:return l.jsx(Sp,{})}};return l.jsxs("div",{className:"min-h-screen bg-[#F7EAA2]",children:[l.jsx("header",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"relative flex items-center justify-center h-24",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:"/sol-icon.png.png",alt:"Sol",className:"h-12 w-12 mr-4"}),l.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold gradient-text text-center",children:"SOLARIE Acessórios"})]}),l.jsx("div",{className:"md:hidden absolute right-0",children:l.jsx("button",{onClick:()=>r(!n),className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:n?l.jsx(Fn,{className:"h-6 w-6"}):l.jsx(Pw,{className:"h-6 w-6"})})})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[l.jsx("nav",{className:`${n?"block":"hidden"} lg:block lg:w-64 space-y-2`,children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Navegação"}),DI.map(u=>{const c=u.icon;return l.jsxs("button",{onClick:()=>{e(u.id),r(!1)},className:`w-full flex items-center px-4 py-3 text-left rounded-lg transition-all duration-200 whitespace-nowrap ${t===u.id?"bg-solarie-gradient text-gray-900 shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[l.jsx(c,{className:"h-5 w-5 mr-3"}),l.jsx("span",{className:"font-medium",children:u.label})]},u.id)})]})}),l.jsx("main",{className:"flex-1",children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm min-h-[600px]",children:o()})})]})})]})}Eu.createRoot(document.getElementById("root")).render(l.jsx(fx.StrictMode,{children:l.jsx(LI,{})}));
